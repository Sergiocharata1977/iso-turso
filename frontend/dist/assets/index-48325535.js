var Qy=Object.defineProperty;var Yy=(t,e,s)=>e in t?Qy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var K=(t,e,s)=>(Yy(t,typeof e!="symbol"?e+"":e,s),s),ka=(t,e,s)=>{if(!e.has(t))throw TypeError("Cannot "+s)};var c=(t,e,s)=>(ka(t,e,"read from private field"),s?s.call(t):e.get(t)),w=(t,e,s)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,s)},v=(t,e,s,n)=>(ka(t,e,"write to private field"),n?n.call(t,s):e.set(t,s),s);var Bt=(t,e,s,n)=>({set _(r){v(t,e,r,s)},get _(){return c(t,e,n)}}),R=(t,e,s)=>(ka(t,e,"access private method"),s);import{r as p,a as ol,R as A,b as uf,t as df,g as Xy,u as Jy,N as Za,_ as Jo,c as Zy,d as di,B as eg}from"./vendor-b9987279.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=s(r);fetch(r.href,o)}})();var ff={exports:{}},ga={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tg=p,sg=Symbol.for("react.element"),ng=Symbol.for("react.fragment"),rg=Object.prototype.hasOwnProperty,og=tg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ig={key:!0,ref:!0,__self:!0,__source:!0};function hf(t,e,s){var n,r={},o=null,i=null;s!==void 0&&(o=""+s),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(i=e.ref);for(n in e)rg.call(e,n)&&!ig.hasOwnProperty(n)&&(r[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:sg,type:t,key:o,ref:i,props:r,_owner:og.current}}ga.Fragment=ng;ga.jsx=hf;ga.jsxs=hf;ff.exports=ga;var x=ff.exports,ec={},lu=ol;ec.createRoot=lu.createRoot,ec.hydrateRoot=lu.hydrateRoot;function pf(t){var e,s,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(s=pf(t[e]))&&(n&&(n+=" "),n+=s)}else for(s in t)t[s]&&(n&&(n+=" "),n+=s);return n}function mf(){for(var t,e,s=0,n="",r=arguments.length;s<r;s++)(t=arguments[s])&&(e=pf(t))&&(n&&(n+=" "),n+=e);return n}function ag(){for(var t=0,e,s,n="";t<arguments.length;)(e=arguments[t++])&&(s=yf(e))&&(n&&(n+=" "),n+=s);return n}function yf(t){if(typeof t=="string")return t;for(var e,s="",n=0;n<t.length;n++)t[n]&&(e=yf(t[n]))&&(s&&(s+=" "),s+=e);return s}var il="-";function cg(t){var e=ug(t),s=t.conflictingClassGroups,n=t.conflictingClassGroupModifiers,r=n===void 0?{}:n;function o(a){var u=a.split(il);return u[0]===""&&u.length!==1&&u.shift(),gf(u,e)||lg(a)}function i(a,u){var l=s[a]||[];return u&&r[a]?[].concat(l,r[a]):l}return{getClassGroupId:o,getConflictingClassGroupIds:i}}function gf(t,e){var i;if(t.length===0)return e.classGroupId;var s=t[0],n=e.nextPart.get(s),r=n?gf(t.slice(1),n):void 0;if(r)return r;if(e.validators.length!==0){var o=t.join(il);return(i=e.validators.find(function(a){var u=a.validator;return u(o)}))==null?void 0:i.classGroupId}}var uu=/^\[(.+)\]$/;function lg(t){if(uu.test(t)){var e=uu.exec(t)[1],s=e==null?void 0:e.substring(0,e.indexOf(":"));if(s)return"arbitrary.."+s}}function ug(t){var e=t.theme,s=t.prefix,n={nextPart:new Map,validators:[]},r=fg(Object.entries(t.classGroups),s);return r.forEach(function(o){var i=o[0],a=o[1];tc(a,n,i,e)}),n}function tc(t,e,s,n){t.forEach(function(r){if(typeof r=="string"){var o=r===""?e:du(e,r);o.classGroupId=s;return}if(typeof r=="function"){if(dg(r)){tc(r(n),e,s,n);return}e.validators.push({validator:r,classGroupId:s});return}Object.entries(r).forEach(function(i){var a=i[0],u=i[1];tc(u,du(e,a),s,n)})})}function du(t,e){var s=t;return e.split(il).forEach(function(n){s.nextPart.has(n)||s.nextPart.set(n,{nextPart:new Map,validators:[]}),s=s.nextPart.get(n)}),s}function dg(t){return t.isThemeGetter}function fg(t,e){return e?t.map(function(s){var n=s[0],r=s[1],o=r.map(function(i){return typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(function(a){var u=a[0],l=a[1];return[e+u,l]})):i});return[n,o]}):t}function hg(t){if(t<1)return{get:function(){},set:function(){}};var e=0,s=new Map,n=new Map;function r(o,i){s.set(o,i),e++,e>t&&(e=0,n=s,s=new Map)}return{get:function(i){var a=s.get(i);if(a!==void 0)return a;if((a=n.get(i))!==void 0)return r(i,a),a},set:function(i,a){s.has(i)?s.set(i,a):r(i,a)}}}var bf="!";function pg(t){var e=t.separator||":",s=e.length===1,n=e[0],r=e.length;return function(i){for(var a=[],u=0,l=0,f,d=0;d<i.length;d++){var h=i[d];if(u===0){if(h===n&&(s||i.slice(d,d+r)===e)){a.push(i.slice(l,d)),l=d+r;continue}if(h==="/"){f=d;continue}}h==="["?u++:h==="]"&&u--}var m=a.length===0?i:i.substring(l),b=m.startsWith(bf),g=b?m.substring(1):m,y=f&&f>l?f-l:void 0;return{modifiers:a,hasImportantModifier:b,baseClassName:g,maybePostfixModifierPosition:y}}}function mg(t){if(t.length<=1)return t;var e=[],s=[];return t.forEach(function(n){var r=n[0]==="[";r?(e.push.apply(e,s.sort().concat([n])),s=[]):s.push(n)}),e.push.apply(e,s.sort()),e}function yg(t){return{cache:hg(t.cacheSize),splitModifiers:pg(t),...cg(t)}}var gg=/\s+/;function bg(t,e){var s=e.splitModifiers,n=e.getClassGroupId,r=e.getConflictingClassGroupIds,o=new Set;return t.trim().split(gg).map(function(i){var a=s(i),u=a.modifiers,l=a.hasImportantModifier,f=a.baseClassName,d=a.maybePostfixModifierPosition,h=n(d?f.substring(0,d):f),m=!!d;if(!h){if(!d)return{isTailwindClass:!1,originalClassName:i};if(h=n(f),!h)return{isTailwindClass:!1,originalClassName:i};m=!1}var b=mg(u).join(":"),g=l?b+bf:b;return{isTailwindClass:!0,modifierId:g,classGroupId:h,originalClassName:i,hasPostfixModifier:m}}).reverse().filter(function(i){if(!i.isTailwindClass)return!0;var a=i.modifierId,u=i.classGroupId,l=i.hasPostfixModifier,f=a+u;return o.has(f)?!1:(o.add(f),r(u,l).forEach(function(d){return o.add(a+d)}),!0)}).reverse().map(function(i){return i.originalClassName}).join(" ")}function vg(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];var n,r,o,i=a;function a(l){var f=e[0],d=e.slice(1),h=d.reduce(function(m,b){return b(m)},f());return n=yg(h),r=n.cache.get,o=n.cache.set,i=u,u(l)}function u(l){var f=r(l);if(f)return f;var d=bg(l,n);return o(l,d),d}return function(){return i(ag.apply(null,arguments))}}function ee(t){var e=function(n){return n[t]||[]};return e.isThemeGetter=!0,e}var vf=/^\[(?:([a-z-]+):)?(.+)\]$/i,wg=/^\d+\/\d+$/,xg=new Set(["px","full","screen"]),Sg=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Cg=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Eg=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function at(t){return rn(t)||xg.has(t)||wg.test(t)||sc(t)}function sc(t){return Nn(t,"length",Ig)}function Tg(t){return Nn(t,"size",wf)}function Rg(t){return Nn(t,"position",wf)}function Pg(t){return Nn(t,"url",Og)}function fi(t){return Nn(t,"number",rn)}function rn(t){return!Number.isNaN(Number(t))}function Ag(t){return t.endsWith("%")&&rn(t.slice(0,-1))}function Gr(t){return fu(t)||Nn(t,"number",fu)}function $(t){return vf.test(t)}function Kr(){return!0}function ys(t){return Sg.test(t)}function _g(t){return Nn(t,"",Mg)}function Nn(t,e,s){var n=vf.exec(t);return n?n[1]?n[1]===e:s(n[2]):!1}function Ig(t){return Cg.test(t)}function wf(){return!1}function Og(t){return t.startsWith("url(")}function fu(t){return Number.isInteger(Number(t))}function Mg(t){return Eg.test(t)}function Dg(){var t=ee("colors"),e=ee("spacing"),s=ee("blur"),n=ee("brightness"),r=ee("borderColor"),o=ee("borderRadius"),i=ee("borderSpacing"),a=ee("borderWidth"),u=ee("contrast"),l=ee("grayscale"),f=ee("hueRotate"),d=ee("invert"),h=ee("gap"),m=ee("gradientColorStops"),b=ee("gradientColorStopPositions"),g=ee("inset"),y=ee("margin"),C=ee("opacity"),T=ee("padding"),S=ee("saturate"),E=ee("scale"),P=ee("sepia"),O=ee("skew"),I=ee("space"),_=ee("translate"),D=function(){return["auto","contain","none"]},j=function(){return["auto","hidden","clip","visible","scroll"]},U=function(){return["auto",$,e]},k=function(){return[$,e]},G=function(){return["",at]},L=function(){return["auto",rn,$]},H=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},M=function(){return["solid","dashed","dotted","double","none"]},Q=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},Z=function(){return["start","end","center","between","around","evenly","stretch"]},Y=function(){return["","0",$]},ze=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},N=function(){return[rn,fi]},B=function(){return[rn,$]};return{cacheSize:500,theme:{colors:[Kr],spacing:[at],blur:["none","",ys,$],brightness:N(),borderColor:[t],borderRadius:["none","","full",ys,$],borderSpacing:k(),borderWidth:G(),contrast:N(),grayscale:Y(),hueRotate:B(),invert:Y(),gap:k(),gradientColorStops:[t],gradientColorStopPositions:[Ag,sc],inset:U(),margin:U(),opacity:N(),padding:k(),saturate:N(),scale:N(),sepia:Y(),skew:B(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",$]}],container:["container"],columns:[{columns:[ys]}],"break-after":[{"break-after":ze()}],"break-before":[{"break-before":ze()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(H(),[$])}],overflow:[{overflow:j()}],"overflow-x":[{"overflow-x":j()}],"overflow-y":[{"overflow-y":j()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Gr]}],basis:[{basis:U()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",$]}],grow:[{grow:Y()}],shrink:[{shrink:Y()}],order:[{order:["first","last","none",Gr]}],"grid-cols":[{"grid-cols":[Kr]}],"col-start-end":[{col:["auto",{span:["full",Gr]},$]}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":[Kr]}],"row-start-end":[{row:["auto",{span:[Gr]},$]}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",$]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",$]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal"].concat(Z())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(Z(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(Z(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[T]}],px:[{px:[T]}],py:[{py:[T]}],ps:[{ps:[T]}],pe:[{pe:[T]}],pt:[{pt:[T]}],pr:[{pr:[T]}],pb:[{pb:[T]}],pl:[{pl:[T]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",$,e]}],"min-w":[{"min-w":["min","max","fit",$,at]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[ys]},ys,$]}],h:[{h:[$,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",$,at]}],"max-h":[{"max-h":[$,e,"min","max","fit"]}],"font-size":[{text:["base",ys,sc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",fi]}],"font-family":[{font:[Kr]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",$]}],"line-clamp":[{"line-clamp":["none",rn,fi]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",$,at]}],"list-image":[{"list-image":["none",$]}],"list-style-type":[{list:["none","disc","decimal",$]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[C]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[C]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(M(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",at]}],"underline-offset":[{"underline-offset":["auto",$,at]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",$]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",$]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[C]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(H(),[Rg])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Tg]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Pg]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[C]}],"border-style":[{border:[].concat(M(),["hidden"])}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[C]}],"divide-style":[{divide:M()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:[""].concat(M())}],"outline-offset":[{"outline-offset":[$,at]}],"outline-w":[{outline:[at]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:G()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[C]}],"ring-offset-w":[{"ring-offset":[at]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ys,_g]}],"shadow-color":[{shadow:[Kr]}],opacity:[{opacity:[C]}],"mix-blend":[{"mix-blend":Q()}],"bg-blend":[{"bg-blend":Q()}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[n]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",ys,$]}],grayscale:[{grayscale:[l]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[d]}],saturate:[{saturate:[S]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[l]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[C]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",$]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",$]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",$]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[Gr,$]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",$]}],accent:[{accent:["auto",t]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",$]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",$]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[at,fi]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var Lg=vg(Dg);function le(...t){return Lg(mf(t))}function ie(t,e,{checkForDefaultPrevented:s=!0}={}){return function(r){if(t==null||t(r),s===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function hu(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function kg(...t){return e=>{let s=!1;const n=t.map(r=>{const o=hu(r,e);return!s&&typeof o=="function"&&(s=!0),o});if(s)return()=>{for(let r=0;r<n.length;r++){const o=n[r];typeof o=="function"?o():hu(t[r],null)}}}}function cs(...t){return p.useCallback(kg(...t),t)}function bP(t,e){const s=p.createContext(e),n=o=>{const{children:i,...a}=o,u=p.useMemo(()=>a,Object.values(a));return x.jsx(s.Provider,{value:u,children:i})};n.displayName=t+"Provider";function r(o){const i=p.useContext(s);if(i)return i;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${t}\``)}return[n,r]}function Zo(t,e=[]){let s=[];function n(o,i){const a=p.createContext(i),u=s.length;s=[...s,i];const l=d=>{var C;const{scope:h,children:m,...b}=d,g=((C=h==null?void 0:h[t])==null?void 0:C[u])||a,y=p.useMemo(()=>b,Object.values(b));return x.jsx(g.Provider,{value:y,children:m})};l.displayName=o+"Provider";function f(d,h){var g;const m=((g=h==null?void 0:h[t])==null?void 0:g[u])||a,b=p.useContext(m);if(b)return b;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${o}\``)}return[l,f]}const r=()=>{const o=s.map(i=>p.createContext(i));return function(a){const u=(a==null?void 0:a[t])||o;return p.useMemo(()=>({[`__scope${t}`]:{...a,[t]:u}}),[a,u])}};return r.scopeName=t,[n,Ng(r,...e)]}function Ng(...t){const e=t[0];if(t.length===1)return e;const s=()=>{const n=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(o){const i=n.reduce((a,{useScope:u,scopeName:l})=>{const d=u(o)[`__scope${l}`];return{...a,...d}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return s.scopeName=e.scopeName,s}function Li(t){const e=jg(t),s=p.forwardRef((n,r)=>{const{children:o,...i}=n,a=p.Children.toArray(o),u=a.find(Fg);if(u){const l=u.props.children,f=a.map(d=>d===u?p.Children.count(l)>1?p.Children.only(null):p.isValidElement(l)?l.props.children:null:d);return x.jsx(e,{...i,ref:r,children:p.isValidElement(l)?p.cloneElement(l,void 0,f):null})}return x.jsx(e,{...i,ref:r,children:o})});return s.displayName=`${t}.Slot`,s}var Vg=Li("Slot");function jg(t){const e=p.forwardRef((s,n)=>{const{children:r,...o}=s,i=p.isValidElement(r)?Bg(r):void 0,a=cs(i,n);if(p.isValidElement(r)){const u=qg(o,r.props);return r.type!==p.Fragment&&(u.ref=a),p.cloneElement(r,u)}return p.Children.count(r)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var xf=Symbol("radix.slottable");function vP(t){const e=({children:s})=>x.jsx(x.Fragment,{children:s});return e.displayName=`${t}.Slottable`,e.__radixId=xf,e}function Fg(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===xf}function qg(t,e){const s={...e};for(const n in e){const r=t[n],o=e[n];/^on[A-Z]/.test(n)?r&&o?s[n]=(...a)=>{const u=o(...a);return r(...a),u}:r&&(s[n]=r):n==="style"?s[n]={...r,...o}:n==="className"&&(s[n]=[r,o].filter(Boolean).join(" "))}return{...t,...s}}function Bg(t){var n,r;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}function Sf(t){const e=t+"CollectionProvider",[s,n]=Zo(e),[r,o]=s(e,{collectionRef:{current:null},itemMap:new Map}),i=g=>{const{scope:y,children:C}=g,T=A.useRef(null),S=A.useRef(new Map).current;return x.jsx(r,{scope:y,itemMap:S,collectionRef:T,children:C})};i.displayName=e;const a=t+"CollectionSlot",u=Li(a),l=A.forwardRef((g,y)=>{const{scope:C,children:T}=g,S=o(a,C),E=cs(y,S.collectionRef);return x.jsx(u,{ref:E,children:T})});l.displayName=a;const f=t+"CollectionItemSlot",d="data-radix-collection-item",h=Li(f),m=A.forwardRef((g,y)=>{const{scope:C,children:T,...S}=g,E=A.useRef(null),P=cs(y,E),O=o(f,C);return A.useEffect(()=>(O.itemMap.set(E,{ref:E,...S}),()=>void O.itemMap.delete(E))),x.jsx(h,{[d]:"",ref:P,children:T})});m.displayName=f;function b(g){const y=o(t+"CollectionConsumer",g);return A.useCallback(()=>{const T=y.collectionRef.current;if(!T)return[];const S=Array.from(T.querySelectorAll(`[${d}]`));return Array.from(y.itemMap.values()).sort((O,I)=>S.indexOf(O.ref.current)-S.indexOf(I.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:i,Slot:l,ItemSlot:m},b,n]}var Ug=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],me=Ug.reduce((t,e)=>{const s=Li(`Primitive.${e}`),n=p.forwardRef((r,o)=>{const{asChild:i,...a}=r,u=i?s:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),x.jsx(u,{...a,ref:o})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function Cf(t,e){t&&ol.flushSync(()=>t.dispatchEvent(e))}function ls(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...s)=>{var n;return(n=e.current)==null?void 0:n.call(e,...s)},[])}function $g(t,e=globalThis==null?void 0:globalThis.document){const s=ls(t);p.useEffect(()=>{const n=r=>{r.key==="Escape"&&s(r)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[s,e])}var zg="DismissableLayer",nc="dismissableLayer.update",Hg="dismissableLayer.pointerDownOutside",Wg="dismissableLayer.focusOutside",pu,Ef=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Tf=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:n,onPointerDownOutside:r,onFocusOutside:o,onInteractOutside:i,onDismiss:a,...u}=t,l=p.useContext(Ef),[f,d]=p.useState(null),h=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=p.useState({}),b=cs(e,I=>d(I)),g=Array.from(l.layers),[y]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),C=g.indexOf(y),T=f?g.indexOf(f):-1,S=l.layersWithOutsidePointerEventsDisabled.size>0,E=T>=C,P=Kg(I=>{const _=I.target,D=[...l.branches].some(j=>j.contains(_));!E||D||(r==null||r(I),i==null||i(I),I.defaultPrevented||a==null||a())},h),O=Qg(I=>{const _=I.target;[...l.branches].some(j=>j.contains(_))||(o==null||o(I),i==null||i(I),I.defaultPrevented||a==null||a())},h);return $g(I=>{T===l.layers.size-1&&(n==null||n(I),!I.defaultPrevented&&a&&(I.preventDefault(),a()))},h),p.useEffect(()=>{if(f)return s&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(pu=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(f)),l.layers.add(f),mu(),()=>{s&&l.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=pu)}},[f,h,s,l]),p.useEffect(()=>()=>{f&&(l.layers.delete(f),l.layersWithOutsidePointerEventsDisabled.delete(f),mu())},[f,l]),p.useEffect(()=>{const I=()=>m({});return document.addEventListener(nc,I),()=>document.removeEventListener(nc,I)},[]),x.jsx(me.div,{...u,ref:b,style:{pointerEvents:S?E?"auto":"none":void 0,...t.style},onFocusCapture:ie(t.onFocusCapture,O.onFocusCapture),onBlurCapture:ie(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:ie(t.onPointerDownCapture,P.onPointerDownCapture)})});Tf.displayName=zg;var Gg="DismissableLayerBranch",Rf=p.forwardRef((t,e)=>{const s=p.useContext(Ef),n=p.useRef(null),r=cs(e,n);return p.useEffect(()=>{const o=n.current;if(o)return s.branches.add(o),()=>{s.branches.delete(o)}},[s.branches]),x.jsx(me.div,{...t,ref:r})});Rf.displayName=Gg;function Kg(t,e=globalThis==null?void 0:globalThis.document){const s=ls(t),n=p.useRef(!1),r=p.useRef(()=>{});return p.useEffect(()=>{const o=a=>{if(a.target&&!n.current){let u=function(){Pf(Hg,s,l,{discrete:!0})};const l={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=u,e.addEventListener("click",r.current,{once:!0})):u()}else e.removeEventListener("click",r.current);n.current=!1},i=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),e.removeEventListener("pointerdown",o),e.removeEventListener("click",r.current)}},[e,s]),{onPointerDownCapture:()=>n.current=!0}}function Qg(t,e=globalThis==null?void 0:globalThis.document){const s=ls(t),n=p.useRef(!1);return p.useEffect(()=>{const r=o=>{o.target&&!n.current&&Pf(Wg,s,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,s]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function mu(){const t=new CustomEvent(nc);document.dispatchEvent(t)}function Pf(t,e,s,{discrete:n}){const r=s.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:s});e&&r.addEventListener(t,e,{once:!0}),n?Cf(r,o):r.dispatchEvent(o)}var Yg=Tf,Xg=Rf,us=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},Jg="Portal",Af=p.forwardRef((t,e)=>{var a;const{container:s,...n}=t,[r,o]=p.useState(!1);us(()=>o(!0),[]);const i=s||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return i?uf.createPortal(x.jsx(me.div,{...n,ref:e}),i):null});Af.displayName=Jg;function Zg(t,e){return p.useReducer((s,n)=>e[s][n]??s,t)}var al=t=>{const{present:e,children:s}=t,n=eb(e),r=typeof s=="function"?s({present:n.isPresent}):p.Children.only(s),o=cs(n.ref,tb(r));return typeof s=="function"||n.isPresent?p.cloneElement(r,{ref:o}):null};al.displayName="Presence";function eb(t){const[e,s]=p.useState(),n=p.useRef(null),r=p.useRef(t),o=p.useRef("none"),i=t?"mounted":"unmounted",[a,u]=Zg(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const l=hi(n.current);o.current=a==="mounted"?l:"none"},[a]),us(()=>{const l=n.current,f=r.current;if(f!==t){const h=o.current,m=hi(l);t?u("MOUNT"):m==="none"||(l==null?void 0:l.display)==="none"?u("UNMOUNT"):u(f&&h!==m?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,u]),us(()=>{if(e){let l;const f=e.ownerDocument.defaultView??window,d=m=>{const g=hi(n.current).includes(m.animationName);if(m.target===e&&g&&(u("ANIMATION_END"),!r.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",l=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},h=m=>{m.target===e&&(o.current=hi(n.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{f.clearTimeout(l),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:p.useCallback(l=>{n.current=l?getComputedStyle(l):null,s(l)},[])}}function hi(t){return(t==null?void 0:t.animationName)||"none"}function tb(t){var n,r;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var sb=df[" useInsertionEffect ".trim().toString()]||us;function cl({prop:t,defaultProp:e,onChange:s=()=>{},caller:n}){const[r,o,i]=nb({defaultProp:e,onChange:s}),a=t!==void 0,u=a?t:r;{const f=p.useRef(t!==void 0);p.useEffect(()=>{const d=f.current;d!==a&&console.warn(`${n} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=a},[a,n])}const l=p.useCallback(f=>{var d;if(a){const h=rb(f)?f(t):f;h!==t&&((d=i.current)==null||d.call(i,h))}else o(f)},[a,t,o,i]);return[u,l]}function nb({defaultProp:t,onChange:e}){const[s,n]=p.useState(t),r=p.useRef(s),o=p.useRef(e);return sb(()=>{o.current=e},[e]),p.useEffect(()=>{var i;r.current!==s&&((i=o.current)==null||i.call(o,s),r.current=s)},[s,r]),[s,n,o]}function rb(t){return typeof t=="function"}var ob=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),ib="VisuallyHidden",ll=p.forwardRef((t,e)=>x.jsx(me.span,{...t,ref:e,style:{...ob,...t.style}}));ll.displayName=ib;var ul="ToastProvider",[dl,ab,cb]=Sf("Toast"),[_f,wP]=Zo("Toast",[cb]),[lb,ba]=_f(ul),If=t=>{const{__scopeToast:e,label:s="Notification",duration:n=5e3,swipeDirection:r="right",swipeThreshold:o=50,children:i}=t,[a,u]=p.useState(null),[l,f]=p.useState(0),d=p.useRef(!1),h=p.useRef(!1);return s.trim()||console.error(`Invalid prop \`label\` supplied to \`${ul}\`. Expected non-empty \`string\`.`),x.jsx(dl.Provider,{scope:e,children:x.jsx(lb,{scope:e,label:s,duration:n,swipeDirection:r,swipeThreshold:o,toastCount:l,viewport:a,onViewportChange:u,onToastAdd:p.useCallback(()=>f(m=>m+1),[]),onToastRemove:p.useCallback(()=>f(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:h,children:i})})};If.displayName=ul;var Of="ToastViewport",ub=["F8"],rc="toast.viewportPause",oc="toast.viewportResume",Mf=p.forwardRef((t,e)=>{const{__scopeToast:s,hotkey:n=ub,label:r="Notifications ({hotkey})",...o}=t,i=ba(Of,s),a=ab(s),u=p.useRef(null),l=p.useRef(null),f=p.useRef(null),d=p.useRef(null),h=cs(e,d,i.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=i.toastCount>0;p.useEffect(()=>{const y=C=>{var S;n.length!==0&&n.every(E=>C[E]||C.code===E)&&((S=d.current)==null||S.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[n]),p.useEffect(()=>{const y=u.current,C=d.current;if(b&&y&&C){const T=()=>{if(!i.isClosePausedRef.current){const O=new CustomEvent(rc);C.dispatchEvent(O),i.isClosePausedRef.current=!0}},S=()=>{if(i.isClosePausedRef.current){const O=new CustomEvent(oc);C.dispatchEvent(O),i.isClosePausedRef.current=!1}},E=O=>{!y.contains(O.relatedTarget)&&S()},P=()=>{y.contains(document.activeElement)||S()};return y.addEventListener("focusin",T),y.addEventListener("focusout",E),y.addEventListener("pointermove",T),y.addEventListener("pointerleave",P),window.addEventListener("blur",T),window.addEventListener("focus",S),()=>{y.removeEventListener("focusin",T),y.removeEventListener("focusout",E),y.removeEventListener("pointermove",T),y.removeEventListener("pointerleave",P),window.removeEventListener("blur",T),window.removeEventListener("focus",S)}}},[b,i.isClosePausedRef]);const g=p.useCallback(({tabbingDirection:y})=>{const T=a().map(S=>{const E=S.ref.current,P=[E,...Cb(E)];return y==="forwards"?P:P.reverse()});return(y==="forwards"?T.reverse():T).flat()},[a]);return p.useEffect(()=>{const y=d.current;if(y){const C=T=>{var P,O,I;const S=T.altKey||T.ctrlKey||T.metaKey;if(T.key==="Tab"&&!S){const _=document.activeElement,D=T.shiftKey;if(T.target===y&&D){(P=l.current)==null||P.focus();return}const k=g({tabbingDirection:D?"backwards":"forwards"}),G=k.findIndex(L=>L===_);Na(k.slice(G+1))?T.preventDefault():D?(O=l.current)==null||O.focus():(I=f.current)==null||I.focus()}};return y.addEventListener("keydown",C),()=>y.removeEventListener("keydown",C)}},[a,g]),x.jsxs(Xg,{ref:u,role:"region","aria-label":r.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&x.jsx(ic,{ref:l,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"forwards"});Na(y)}}),x.jsx(dl.Slot,{scope:s,children:x.jsx(me.ol,{tabIndex:-1,...o,ref:h})}),b&&x.jsx(ic,{ref:f,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"backwards"});Na(y)}})]})});Mf.displayName=Of;var Df="ToastFocusProxy",ic=p.forwardRef((t,e)=>{const{__scopeToast:s,onFocusFromOutsideViewport:n,...r}=t,o=ba(Df,s);return x.jsx(ll,{"aria-hidden":!0,tabIndex:0,...r,ref:e,style:{position:"fixed"},onFocus:i=>{var l;const a=i.relatedTarget;!((l=o.viewport)!=null&&l.contains(a))&&n()}})});ic.displayName=Df;var ei="Toast",db="toast.swipeStart",fb="toast.swipeMove",hb="toast.swipeCancel",pb="toast.swipeEnd",Lf=p.forwardRef((t,e)=>{const{forceMount:s,open:n,defaultOpen:r,onOpenChange:o,...i}=t,[a,u]=cl({prop:n,defaultProp:r??!0,onChange:o,caller:ei});return x.jsx(al,{present:s||a,children:x.jsx(gb,{open:a,...i,ref:e,onClose:()=>u(!1),onPause:ls(t.onPause),onResume:ls(t.onResume),onSwipeStart:ie(t.onSwipeStart,l=>{l.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ie(t.onSwipeMove,l=>{const{x:f,y:d}=l.detail.delta;l.currentTarget.setAttribute("data-swipe","move"),l.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),l.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:ie(t.onSwipeCancel,l=>{l.currentTarget.setAttribute("data-swipe","cancel"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),l.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ie(t.onSwipeEnd,l=>{const{x:f,y:d}=l.detail.delta;l.currentTarget.setAttribute("data-swipe","end"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),l.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),l.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),u(!1)})})})});Lf.displayName=ei;var[mb,yb]=_f(ei,{onClose(){}}),gb=p.forwardRef((t,e)=>{const{__scopeToast:s,type:n="foreground",duration:r,open:o,onClose:i,onEscapeKeyDown:a,onPause:u,onResume:l,onSwipeStart:f,onSwipeMove:d,onSwipeCancel:h,onSwipeEnd:m,...b}=t,g=ba(ei,s),[y,C]=p.useState(null),T=cs(e,L=>C(L)),S=p.useRef(null),E=p.useRef(null),P=r||g.duration,O=p.useRef(0),I=p.useRef(P),_=p.useRef(0),{onToastAdd:D,onToastRemove:j}=g,U=ls(()=>{var H;(y==null?void 0:y.contains(document.activeElement))&&((H=g.viewport)==null||H.focus()),i()}),k=p.useCallback(L=>{!L||L===1/0||(window.clearTimeout(_.current),O.current=new Date().getTime(),_.current=window.setTimeout(U,L))},[U]);p.useEffect(()=>{const L=g.viewport;if(L){const H=()=>{k(I.current),l==null||l()},M=()=>{const Q=new Date().getTime()-O.current;I.current=I.current-Q,window.clearTimeout(_.current),u==null||u()};return L.addEventListener(rc,M),L.addEventListener(oc,H),()=>{L.removeEventListener(rc,M),L.removeEventListener(oc,H)}}},[g.viewport,P,u,l,k]),p.useEffect(()=>{o&&!g.isClosePausedRef.current&&k(P)},[o,P,g.isClosePausedRef,k]),p.useEffect(()=>(D(),()=>j()),[D,j]);const G=p.useMemo(()=>y?Bf(y):null,[y]);return g.viewport?x.jsxs(x.Fragment,{children:[G&&x.jsx(bb,{__scopeToast:s,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:G}),x.jsx(mb,{scope:s,onClose:U,children:ol.createPortal(x.jsx(dl.ItemSlot,{scope:s,children:x.jsx(Yg,{asChild:!0,onEscapeKeyDown:ie(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||U(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:x.jsx(me.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":g.swipeDirection,...b,ref:T,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ie(t.onKeyDown,L=>{L.key==="Escape"&&(a==null||a(L.nativeEvent),L.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,U()))}),onPointerDown:ie(t.onPointerDown,L=>{L.button===0&&(S.current={x:L.clientX,y:L.clientY})}),onPointerMove:ie(t.onPointerMove,L=>{if(!S.current)return;const H=L.clientX-S.current.x,M=L.clientY-S.current.y,Q=!!E.current,Z=["left","right"].includes(g.swipeDirection),Y=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,ze=Z?Y(0,H):0,N=Z?0:Y(0,M),B=L.pointerType==="touch"?10:2,F={x:ze,y:N},ye={originalEvent:L,delta:F};Q?(E.current=F,pi(fb,d,ye,{discrete:!1})):yu(F,g.swipeDirection,B)?(E.current=F,pi(db,f,ye,{discrete:!1}),L.target.setPointerCapture(L.pointerId)):(Math.abs(H)>B||Math.abs(M)>B)&&(S.current=null)}),onPointerUp:ie(t.onPointerUp,L=>{const H=E.current,M=L.target;if(M.hasPointerCapture(L.pointerId)&&M.releasePointerCapture(L.pointerId),E.current=null,S.current=null,H){const Q=L.currentTarget,Z={originalEvent:L,delta:H};yu(H,g.swipeDirection,g.swipeThreshold)?pi(pb,m,Z,{discrete:!0}):pi(hb,h,Z,{discrete:!0}),Q.addEventListener("click",Y=>Y.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),bb=t=>{const{__scopeToast:e,children:s,...n}=t,r=ba(ei,e),[o,i]=p.useState(!1),[a,u]=p.useState(!1);return xb(()=>i(!0)),p.useEffect(()=>{const l=window.setTimeout(()=>u(!0),1e3);return()=>window.clearTimeout(l)},[]),a?null:x.jsx(Af,{asChild:!0,children:x.jsx(ll,{...n,children:o&&x.jsxs(x.Fragment,{children:[r.label," ",s]})})})},vb="ToastTitle",kf=p.forwardRef((t,e)=>{const{__scopeToast:s,...n}=t;return x.jsx(me.div,{...n,ref:e})});kf.displayName=vb;var wb="ToastDescription",Nf=p.forwardRef((t,e)=>{const{__scopeToast:s,...n}=t;return x.jsx(me.div,{...n,ref:e})});Nf.displayName=wb;var Vf="ToastAction",jf=p.forwardRef((t,e)=>{const{altText:s,...n}=t;return s.trim()?x.jsx(qf,{altText:s,asChild:!0,children:x.jsx(fl,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Vf}\`. Expected non-empty \`string\`.`),null)});jf.displayName=Vf;var Ff="ToastClose",fl=p.forwardRef((t,e)=>{const{__scopeToast:s,...n}=t,r=yb(Ff,s);return x.jsx(qf,{asChild:!0,children:x.jsx(me.button,{type:"button",...n,ref:e,onClick:ie(t.onClick,r.onClose)})})});fl.displayName=Ff;var qf=p.forwardRef((t,e)=>{const{__scopeToast:s,altText:n,...r}=t;return x.jsx(me.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...r,ref:e})});function Bf(t){const e=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),Sb(n)){const r=n.ariaHidden||n.hidden||n.style.display==="none",o=n.dataset.radixToastAnnounceExclude==="";if(!r)if(o){const i=n.dataset.radixToastAnnounceAlt;i&&e.push(i)}else e.push(...Bf(n))}}),e}function pi(t,e,s,{discrete:n}){const r=s.originalEvent.currentTarget,o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:s});e&&r.addEventListener(t,e,{once:!0}),n?Cf(r,o):r.dispatchEvent(o)}var yu=(t,e,s=0)=>{const n=Math.abs(t.x),r=Math.abs(t.y),o=n>r;return e==="left"||e==="right"?o&&n>s:!o&&r>s};function xb(t=()=>{}){const e=ls(t);us(()=>{let s=0,n=0;return s=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(s),window.cancelAnimationFrame(n)}},[e])}function Sb(t){return t.nodeType===t.ELEMENT_NODE}function Cb(t){const e=[],s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const r=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||r?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)e.push(s.currentNode);return e}function Na(t){const e=document.activeElement;return t.some(s=>s===e?!0:(s.focus(),document.activeElement!==e))}var Eb=If,Uf=Mf,$f=Lf,zf=kf,Hf=Nf,Wf=jf,Gf=fl;const gu=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,bu=mf,Kf=(t,e)=>s=>{var n;if((e==null?void 0:e.variants)==null)return bu(t,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:r,defaultVariants:o}=e,i=Object.keys(r).map(l=>{const f=s==null?void 0:s[l],d=o==null?void 0:o[l];if(f===null)return null;const h=gu(f)||gu(d);return r[l][h]}),a=s&&Object.entries(s).reduce((l,f)=>{let[d,h]=f;return h===void 0||(l[d]=h),l},{}),u=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((l,f)=>{let{class:d,className:h,...m}=f;return Object.entries(m).every(b=>{let[g,y]=b;return Array.isArray(y)?y.includes({...o,...a}[g]):{...o,...a}[g]===y})?[...l,d,h]:l},[]);return bu(t,i,u,s==null?void 0:s.class,s==null?void 0:s.className)};var Tb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Rb=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fs=(t,e)=>{const s=p.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:i,children:a,...u},l)=>p.createElement("svg",{ref:l,...Tb,width:r,height:r,stroke:n,strokeWidth:i?Number(o)*24/Number(r):o,className:`lucide lucide-${Rb(t)}`,...u},[...e.map(([f,d])=>p.createElement(f,d)),...(Array.isArray(a)?a:[a])||[]]));return s.displayName=`${t}`,s},Pb=fs("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),Ab=fs("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),_b=fs("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Ib=fs("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]),Ob=fs("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Qf=fs("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Mb=fs("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Db=fs("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Yf=fs("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Lb=Eb,Xf=A.forwardRef(({className:t,...e},s)=>x.jsx(Uf,{ref:s,className:le("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));Xf.displayName=Uf.displayName;const kb=Kf("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Jf=A.forwardRef(({className:t,variant:e,...s},n)=>x.jsx($f,{ref:n,className:le(kb({variant:e}),t),...s}));Jf.displayName=$f.displayName;const Nb=A.forwardRef(({className:t,...e},s)=>x.jsx(Wf,{ref:s,className:le("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));Nb.displayName=Wf.displayName;const Zf=A.forwardRef(({className:t,...e},s)=>x.jsx(Gf,{ref:s,className:le("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:x.jsx(Yf,{className:"h-4 w-4"})}));Zf.displayName=Gf.displayName;const eh=A.forwardRef(({className:t,...e},s)=>x.jsx(zf,{ref:s,className:le("text-sm font-semibold",t),...e}));eh.displayName=zf.displayName;const th=A.forwardRef(({className:t,...e},s)=>x.jsx(Hf,{ref:s,className:le("text-sm opacity-90",t),...e}));th.displayName=Hf.displayName;const Vb=1;let Va=0;function jb(){return Va=(Va+1)%Number.MAX_VALUE,Va.toString()}function sh(){const[t,e]=p.useState({toasts:[]});p.useEffect(()=>{const n=[];return t.toasts.forEach(r=>{if(r.duration===1/0)return;const o=setTimeout(()=>{r.dismiss()},r.duration||5e3);n.push(o)}),()=>{n.forEach(r=>clearTimeout(r))}},[t.toasts]);function s({...n}){const r=jb(),o=a=>e(u=>({...u,toasts:u.toasts.map(l=>l.id===r?{...l,...a}:l)})),i=()=>e(a=>({...a,toasts:a.toasts.filter(u=>u.id!==r)}));return e(a=>({...a,toasts:[{...n,id:r,dismiss:i},...a.toasts].slice(0,Vb)})),{id:r,dismiss:i,update:o}}return{toast:s,toasts:t.toasts}}function Fb(){const{toasts:t}=sh();return x.jsxs(Lb,{children:[t.map(({id:e,title:s,description:n,action:r,...o})=>x.jsxs(Jf,{...o,children:[x.jsxs("div",{className:"grid gap-1",children:[s&&x.jsx(eh,{children:s}),n&&x.jsx(th,{children:n})]}),r,x.jsx(Zf,{})]},e)),x.jsx(Xf,{})]})}function qb(t){if(!t||typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}const Bb=t=>{switch(t){case"success":return zb;case"info":return Wb;case"warning":return Hb;case"error":return Gb;default:return null}},Ub=Array(12).fill(0),$b=({visible:t,className:e})=>A.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},A.createElement("div",{className:"sonner-spinner"},Ub.map((s,n)=>A.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),zb=A.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},A.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Hb=A.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},A.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Wb=A.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},A.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Gb=A.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},A.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Kb=A.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},A.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),A.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Qb=()=>{const[t,e]=A.useState(document.hidden);return A.useEffect(()=>{const s=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",s),()=>window.removeEventListener("visibilitychange",s)},[]),t};let ac=1;class Yb{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const s=this.subscribers.indexOf(e);this.subscribers.splice(s,1)}),this.publish=e=>{this.subscribers.forEach(s=>s(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var s;const{message:n,...r}=e,o=typeof(e==null?void 0:e.id)=="number"||((s=e.id)==null?void 0:s.length)>0?e.id:ac++,i=this.toasts.find(u=>u.id===o),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),i?this.toasts=this.toasts.map(u=>u.id===o?(this.publish({...u,...e,id:o,title:n}),{...u,...e,id:o,dismissible:a,title:n}):u):this.addToast({title:n,...r,dismissible:a,id:o}),o},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(s=>s({id:e,dismiss:!0})))):this.toasts.forEach(s=>{this.subscribers.forEach(n=>n({id:s.id,dismiss:!0}))}),e),this.message=(e,s)=>this.create({...s,message:e}),this.error=(e,s)=>this.create({...s,message:e,type:"error"}),this.success=(e,s)=>this.create({...s,type:"success",message:e}),this.info=(e,s)=>this.create({...s,type:"info",message:e}),this.warning=(e,s)=>this.create({...s,type:"warning",message:e}),this.loading=(e,s)=>this.create({...s,type:"loading",message:e}),this.promise=(e,s)=>{if(!s)return;let n;s.loading!==void 0&&(n=this.create({...s,promise:e,type:"loading",message:s.loading,description:typeof s.description!="function"?s.description:void 0}));const r=Promise.resolve(e instanceof Function?e():e);let o=n!==void 0,i;const a=r.then(async l=>{if(i=["resolve",l],A.isValidElement(l))o=!1,this.create({id:n,type:"default",message:l});else if(Jb(l)&&!l.ok){o=!1;const d=typeof s.error=="function"?await s.error(`HTTP error! status: ${l.status}`):s.error,h=typeof s.description=="function"?await s.description(`HTTP error! status: ${l.status}`):s.description,b=typeof d=="object"&&!A.isValidElement(d)?d:{message:d};this.create({id:n,type:"error",description:h,...b})}else if(l instanceof Error){o=!1;const d=typeof s.error=="function"?await s.error(l):s.error,h=typeof s.description=="function"?await s.description(l):s.description,b=typeof d=="object"&&!A.isValidElement(d)?d:{message:d};this.create({id:n,type:"error",description:h,...b})}else if(s.success!==void 0){o=!1;const d=typeof s.success=="function"?await s.success(l):s.success,h=typeof s.description=="function"?await s.description(l):s.description,b=typeof d=="object"&&!A.isValidElement(d)?d:{message:d};this.create({id:n,type:"success",description:h,...b})}}).catch(async l=>{if(i=["reject",l],s.error!==void 0){o=!1;const f=typeof s.error=="function"?await s.error(l):s.error,d=typeof s.description=="function"?await s.description(l):s.description,m=typeof f=="object"&&!A.isValidElement(f)?f:{message:f};this.create({id:n,type:"error",description:d,...m})}}).finally(()=>{o&&(this.dismiss(n),n=void 0),s.finally==null||s.finally.call(s)}),u=()=>new Promise((l,f)=>a.then(()=>i[0]==="reject"?f(i[1]):l(i[1])).catch(f));return typeof n!="string"&&typeof n!="number"?{unwrap:u}:Object.assign(n,{unwrap:u})},this.custom=(e,s)=>{const n=(s==null?void 0:s.id)||ac++;return this.create({jsx:e(n),id:n,...s}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Be=new Yb,Xb=(t,e)=>{const s=(e==null?void 0:e.id)||ac++;return Be.addToast({title:t,...e,id:s}),s},Jb=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Zb=Xb,ev=()=>Be.toasts,tv=()=>Be.getActiveToasts(),xP=Object.assign(Zb,{success:Be.success,info:Be.info,warning:Be.warning,error:Be.error,custom:Be.custom,message:Be.message,promise:Be.promise,dismiss:Be.dismiss,loading:Be.loading},{getHistory:ev,getToasts:tv});qb("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function mi(t){return t.label!==void 0}const sv=3,nv="24px",rv="16px",vu=4e3,ov=356,iv=14,av=45,cv=200;function St(...t){return t.filter(Boolean).join(" ")}function lv(t){const[e,s]=t.split("-"),n=[];return e&&n.push(e),s&&n.push(s),n}const uv=t=>{var e,s,n,r,o,i,a,u,l;const{invert:f,toast:d,unstyled:h,interacting:m,setHeights:b,visibleToasts:g,heights:y,index:C,toasts:T,expanded:S,removeToast:E,defaultRichColors:P,closeButton:O,style:I,cancelButtonStyle:_,actionButtonStyle:D,className:j="",descriptionClassName:U="",duration:k,position:G,gap:L,expandByDefault:H,classNames:M,icons:Q,closeButtonAriaLabel:Z="Close toast"}=t,[Y,ze]=A.useState(null),[N,B]=A.useState(null),[F,ye]=A.useState(!1),[wt,X]=A.useState(!1),[hs,ps]=A.useState(!1),[jt,xt]=A.useState(!1),[Ft,Oa]=A.useState(!1),[Vy,Ma]=A.useState(0),[jy,eu]=A.useState(0),Wr=A.useRef(d.duration||k||vu),tu=A.useRef(null),qt=A.useRef(null),Fy=C===0,qy=C+1<=g,He=d.type,Bn=d.dismissible!==!1,By=d.className||"",Uy=d.descriptionClassName||"",ci=A.useMemo(()=>y.findIndex(q=>q.toastId===d.id)||0,[y,d.id]),$y=A.useMemo(()=>{var q;return(q=d.closeButton)!=null?q:O},[d.closeButton,O]),su=A.useMemo(()=>d.duration||k||vu,[d.duration,k]),Da=A.useRef(0),Un=A.useRef(0),nu=A.useRef(0),$n=A.useRef(null),[zy,Hy]=G.split("-"),ru=A.useMemo(()=>y.reduce((q,ge,Se)=>Se>=ci?q:q+ge.height,0),[y,ci]),ou=Qb(),Wy=d.invert||f,La=He==="loading";Un.current=A.useMemo(()=>ci*L+ru,[ci,ru]),A.useEffect(()=>{Wr.current=su},[su]),A.useEffect(()=>{ye(!0)},[]),A.useEffect(()=>{const q=qt.current;if(q){const ge=q.getBoundingClientRect().height;return eu(ge),b(Se=>[{toastId:d.id,height:ge,position:d.position},...Se]),()=>b(Se=>Se.filter(We=>We.toastId!==d.id))}},[b,d.id]),A.useLayoutEffect(()=>{if(!F)return;const q=qt.current,ge=q.style.height;q.style.height="auto";const Se=q.getBoundingClientRect().height;q.style.height=ge,eu(Se),b(We=>We.find(be=>be.toastId===d.id)?We.map(be=>be.toastId===d.id?{...be,height:Se}:be):[{toastId:d.id,height:Se,position:d.position},...We])},[F,d.title,d.description,b,d.id]);const ms=A.useCallback(()=>{X(!0),Ma(Un.current),b(q=>q.filter(ge=>ge.toastId!==d.id)),setTimeout(()=>{E(d)},cv)},[d,E,b,Un]);A.useEffect(()=>{if(d.promise&&He==="loading"||d.duration===1/0||d.type==="loading")return;let q;return S||m||ou?(()=>{if(nu.current<Da.current){const We=new Date().getTime()-Da.current;Wr.current=Wr.current-We}nu.current=new Date().getTime()})():(()=>{Wr.current!==1/0&&(Da.current=new Date().getTime(),q=setTimeout(()=>{d.onAutoClose==null||d.onAutoClose.call(d,d),ms()},Wr.current))})(),()=>clearTimeout(q)},[S,m,d,He,ou,ms]),A.useEffect(()=>{d.delete&&ms()},[ms,d.delete]);function Gy(){var q;if(Q!=null&&Q.loading){var ge;return A.createElement("div",{className:St(M==null?void 0:M.loader,d==null||(ge=d.classNames)==null?void 0:ge.loader,"sonner-loader"),"data-visible":He==="loading"},Q.loading)}return A.createElement($b,{className:St(M==null?void 0:M.loader,d==null||(q=d.classNames)==null?void 0:q.loader),visible:He==="loading"})}const Ky=d.icon||(Q==null?void 0:Q[He])||Bb(He);var iu,au;return A.createElement("li",{tabIndex:0,ref:qt,className:St(j,By,M==null?void 0:M.toast,d==null||(e=d.classNames)==null?void 0:e.toast,M==null?void 0:M.default,M==null?void 0:M[He],d==null||(s=d.classNames)==null?void 0:s[He]),"data-sonner-toast":"","data-rich-colors":(iu=d.richColors)!=null?iu:P,"data-styled":!(d.jsx||d.unstyled||h),"data-mounted":F,"data-promise":!!d.promise,"data-swiped":Ft,"data-removed":wt,"data-visible":qy,"data-y-position":zy,"data-x-position":Hy,"data-index":C,"data-front":Fy,"data-swiping":hs,"data-dismissible":Bn,"data-type":He,"data-invert":Wy,"data-swipe-out":jt,"data-swipe-direction":N,"data-expanded":!!(S||H&&F),style:{"--index":C,"--toasts-before":C,"--z-index":T.length-C,"--offset":`${wt?Vy:Un.current}px`,"--initial-height":H?"auto":`${jy}px`,...I,...d.style},onDragEnd:()=>{ps(!1),ze(null),$n.current=null},onPointerDown:q=>{La||!Bn||(tu.current=new Date,Ma(Un.current),q.target.setPointerCapture(q.pointerId),q.target.tagName!=="BUTTON"&&(ps(!0),$n.current={x:q.clientX,y:q.clientY}))},onPointerUp:()=>{var q,ge,Se;if(jt||!Bn)return;$n.current=null;const We=Number(((q=qt.current)==null?void 0:q.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),li=Number(((ge=qt.current)==null?void 0:ge.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),be=new Date().getTime()-((Se=tu.current)==null?void 0:Se.getTime()),Je=Y==="x"?We:li,ui=Math.abs(Je)/be;if(Math.abs(Je)>=av||ui>.11){Ma(Un.current),d.onDismiss==null||d.onDismiss.call(d,d),B(Y==="x"?We>0?"right":"left":li>0?"down":"up"),ms(),xt(!0);return}else{var ot,it;(ot=qt.current)==null||ot.style.setProperty("--swipe-amount-x","0px"),(it=qt.current)==null||it.style.setProperty("--swipe-amount-y","0px")}Oa(!1),ps(!1),ze(null)},onPointerMove:q=>{var ge,Se,We;if(!$n.current||!Bn||((ge=window.getSelection())==null?void 0:ge.toString().length)>0)return;const be=q.clientY-$n.current.y,Je=q.clientX-$n.current.x;var ui;const ot=(ui=t.swipeDirections)!=null?ui:lv(G);!Y&&(Math.abs(Je)>1||Math.abs(be)>1)&&ze(Math.abs(Je)>Math.abs(be)?"x":"y");let it={x:0,y:0};const cu=Xs=>1/(1.5+Math.abs(Xs)/20);if(Y==="y"){if(ot.includes("top")||ot.includes("bottom"))if(ot.includes("top")&&be<0||ot.includes("bottom")&&be>0)it.y=be;else{const Xs=be*cu(be);it.y=Math.abs(Xs)<Math.abs(be)?Xs:be}}else if(Y==="x"&&(ot.includes("left")||ot.includes("right")))if(ot.includes("left")&&Je<0||ot.includes("right")&&Je>0)it.x=Je;else{const Xs=Je*cu(Je);it.x=Math.abs(Xs)<Math.abs(Je)?Xs:Je}(Math.abs(it.x)>0||Math.abs(it.y)>0)&&Oa(!0),(Se=qt.current)==null||Se.style.setProperty("--swipe-amount-x",`${it.x}px`),(We=qt.current)==null||We.style.setProperty("--swipe-amount-y",`${it.y}px`)}},$y&&!d.jsx&&He!=="loading"?A.createElement("button",{"aria-label":Z,"data-disabled":La,"data-close-button":!0,onClick:La||!Bn?()=>{}:()=>{ms(),d.onDismiss==null||d.onDismiss.call(d,d)},className:St(M==null?void 0:M.closeButton,d==null||(n=d.classNames)==null?void 0:n.closeButton)},(au=Q==null?void 0:Q.close)!=null?au:Kb):null,(He||d.icon||d.promise)&&d.icon!==null&&((Q==null?void 0:Q[He])!==null||d.icon)?A.createElement("div",{"data-icon":"",className:St(M==null?void 0:M.icon,d==null||(r=d.classNames)==null?void 0:r.icon)},d.promise||d.type==="loading"&&!d.icon?d.icon||Gy():null,d.type!=="loading"?Ky:null):null,A.createElement("div",{"data-content":"",className:St(M==null?void 0:M.content,d==null||(o=d.classNames)==null?void 0:o.content)},A.createElement("div",{"data-title":"",className:St(M==null?void 0:M.title,d==null||(i=d.classNames)==null?void 0:i.title)},d.jsx?d.jsx:typeof d.title=="function"?d.title():d.title),d.description?A.createElement("div",{"data-description":"",className:St(U,Uy,M==null?void 0:M.description,d==null||(a=d.classNames)==null?void 0:a.description)},typeof d.description=="function"?d.description():d.description):null),A.isValidElement(d.cancel)?d.cancel:d.cancel&&mi(d.cancel)?A.createElement("button",{"data-button":!0,"data-cancel":!0,style:d.cancelButtonStyle||_,onClick:q=>{mi(d.cancel)&&Bn&&(d.cancel.onClick==null||d.cancel.onClick.call(d.cancel,q),ms())},className:St(M==null?void 0:M.cancelButton,d==null||(u=d.classNames)==null?void 0:u.cancelButton)},d.cancel.label):null,A.isValidElement(d.action)?d.action:d.action&&mi(d.action)?A.createElement("button",{"data-button":!0,"data-action":!0,style:d.actionButtonStyle||D,onClick:q=>{mi(d.action)&&(d.action.onClick==null||d.action.onClick.call(d.action,q),!q.defaultPrevented&&ms())},className:St(M==null?void 0:M.actionButton,d==null||(l=d.classNames)==null?void 0:l.actionButton)},d.action.label):null)};function wu(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function dv(t,e){const s={};return[t,e].forEach((n,r)=>{const o=r===1,i=o?"--mobile-offset":"--offset",a=o?rv:nv;function u(l){["top","right","bottom","left"].forEach(f=>{s[`${i}-${f}`]=typeof l=="number"?`${l}px`:l})}typeof n=="number"||typeof n=="string"?u(n):typeof n=="object"?["top","right","bottom","left"].forEach(l=>{n[l]===void 0?s[`${i}-${l}`]=a:s[`${i}-${l}`]=typeof n[l]=="number"?`${n[l]}px`:n[l]}):u(a)}),s}const fv=A.forwardRef(function(e,s){const{invert:n,position:r="bottom-right",hotkey:o=["altKey","KeyT"],expand:i,closeButton:a,className:u,offset:l,mobileOffset:f,theme:d="light",richColors:h,duration:m,style:b,visibleToasts:g=sv,toastOptions:y,dir:C=wu(),gap:T=iv,icons:S,containerAriaLabel:E="Notifications"}=e,[P,O]=A.useState([]),I=A.useMemo(()=>Array.from(new Set([r].concat(P.filter(N=>N.position).map(N=>N.position)))),[P,r]),[_,D]=A.useState([]),[j,U]=A.useState(!1),[k,G]=A.useState(!1),[L,H]=A.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),M=A.useRef(null),Q=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),Z=A.useRef(null),Y=A.useRef(!1),ze=A.useCallback(N=>{O(B=>{var F;return(F=B.find(ye=>ye.id===N.id))!=null&&F.delete||Be.dismiss(N.id),B.filter(({id:ye})=>ye!==N.id)})},[]);return A.useEffect(()=>Be.subscribe(N=>{if(N.dismiss){requestAnimationFrame(()=>{O(B=>B.map(F=>F.id===N.id?{...F,delete:!0}:F))});return}setTimeout(()=>{uf.flushSync(()=>{O(B=>{const F=B.findIndex(ye=>ye.id===N.id);return F!==-1?[...B.slice(0,F),{...B[F],...N},...B.slice(F+1)]:[N,...B]})})})}),[P]),A.useEffect(()=>{if(d!=="system"){H(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?H("dark"):H("light")),typeof window>"u")return;const N=window.matchMedia("(prefers-color-scheme: dark)");try{N.addEventListener("change",({matches:B})=>{H(B?"dark":"light")})}catch{N.addListener(({matches:F})=>{try{H(F?"dark":"light")}catch(ye){console.error(ye)}})}},[d]),A.useEffect(()=>{P.length<=1&&U(!1)},[P]),A.useEffect(()=>{const N=B=>{var F;if(o.every(X=>B[X]||B.code===X)){var wt;U(!0),(wt=M.current)==null||wt.focus()}B.code==="Escape"&&(document.activeElement===M.current||(F=M.current)!=null&&F.contains(document.activeElement))&&U(!1)};return document.addEventListener("keydown",N),()=>document.removeEventListener("keydown",N)},[o]),A.useEffect(()=>{if(M.current)return()=>{Z.current&&(Z.current.focus({preventScroll:!0}),Z.current=null,Y.current=!1)}},[M.current]),A.createElement("section",{ref:s,"aria-label":`${E} ${Q}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},I.map((N,B)=>{var F;const[ye,wt]=N.split("-");return P.length?A.createElement("ol",{key:N,dir:C==="auto"?wu():C,tabIndex:-1,ref:M,className:u,"data-sonner-toaster":!0,"data-sonner-theme":L,"data-y-position":ye,"data-lifted":j&&P.length>1&&!i,"data-x-position":wt,style:{"--front-toast-height":`${((F=_[0])==null?void 0:F.height)||0}px`,"--width":`${ov}px`,"--gap":`${T}px`,...b,...dv(l,f)},onBlur:X=>{Y.current&&!X.currentTarget.contains(X.relatedTarget)&&(Y.current=!1,Z.current&&(Z.current.focus({preventScroll:!0}),Z.current=null))},onFocus:X=>{X.target instanceof HTMLElement&&X.target.dataset.dismissible==="false"||Y.current||(Y.current=!0,Z.current=X.relatedTarget)},onMouseEnter:()=>U(!0),onMouseMove:()=>U(!0),onMouseLeave:()=>{k||U(!1)},onDragEnd:()=>U(!1),onPointerDown:X=>{X.target instanceof HTMLElement&&X.target.dataset.dismissible==="false"||G(!0)},onPointerUp:()=>G(!1)},P.filter(X=>!X.position&&B===0||X.position===N).map((X,hs)=>{var ps,jt;return A.createElement(uv,{key:X.id,icons:S,index:hs,toast:X,defaultRichColors:h,duration:(ps=y==null?void 0:y.duration)!=null?ps:m,className:y==null?void 0:y.className,descriptionClassName:y==null?void 0:y.descriptionClassName,invert:n,visibleToasts:g,closeButton:(jt=y==null?void 0:y.closeButton)!=null?jt:a,interacting:k,position:N,style:y==null?void 0:y.style,unstyled:y==null?void 0:y.unstyled,classNames:y==null?void 0:y.classNames,cancelButtonStyle:y==null?void 0:y.cancelButtonStyle,actionButtonStyle:y==null?void 0:y.actionButtonStyle,closeButtonAriaLabel:y==null?void 0:y.closeButtonAriaLabel,removeToast:ze,toasts:P.filter(xt=>xt.position==X.position),heights:_.filter(xt=>xt.position==X.position),setHeights:D,expandByDefault:i,gap:T,expanded:j,swipeDirections:e.swipeDirections})})):null}))});class J extends Error{constructor(s,n,r,o){n!==void 0&&(s=`${n}: ${s}`);super(s,{cause:o});K(this,"code");K(this,"rawCode");this.code=n,this.rawCode=r,this.name="LibsqlError"}}function hv(t){const e=pv.exec(t);if(e===null)throw new J(`The URL '${t}' is not in a valid format`,"URL_INVALID");const s=e.groups,n=s.scheme,r=s.authority!==void 0?mv(s.authority):void 0,o=In(s.path),i=s.query!==void 0?gv(s.query):void 0,a=s.fragment!==void 0?In(s.fragment):void 0;return{scheme:n,authority:r,path:o,query:i,fragment:a}}const pv=(()=>{const t="(?<scheme>[A-Za-z][A-Za-z.+-]*)",e="(?<authority>[^/?#]*)",s="(?<path>[^?#]*)",n="(?<query>[^#]*)",r="(?<fragment>.*)";return new RegExp(`^${t}:(//${e})?${s}(\\?${n})?(#${r})?$`,"su")})();function mv(t){const e=yv.exec(t);if(e===null)throw new J("The authority part of the URL is not in a valid format","URL_INVALID");const s=e.groups,n=In(s.host_br??s.host),r=s.port?parseInt(s.port,10):void 0,o=s.username!==void 0?{username:In(s.username),password:s.password!==void 0?In(s.password):void 0}:void 0;return{host:n,port:r,userinfo:o}}const yv=(()=>new RegExp("^((?<username>[^:]*)(:(?<password>.*))?@)?((?<host>[^:\\[\\]]*)|(\\[(?<host_br>[^\\[\\]]*)\\]))(:(?<port>[0-9]*))?$","su"))();function gv(t){const e=t.split("&"),s=[];for(const n of e){if(n==="")continue;let r,o;const i=n.indexOf("=");i<0?(r=n,o=""):(r=n.substring(0,i),o=n.substring(i+1)),s.push({key:In(r.replaceAll("+"," ")),value:In(o.replaceAll("+"," "))})}return{pairs:s}}function In(t){try{return decodeURIComponent(t)}catch(e){throw e instanceof URIError?new J(`URL component has invalid percent encoding: ${e}`,"URL_INVALID",void 0,e):e}}function cc(t,e,s){if(e===void 0)throw new J(`URL with scheme ${JSON.stringify(t+":")} requires authority (the "//" part)`,"URL_INVALID");const n=`${t}:`,r=bv(e.host),o=vv(e.port),a=`//${wv(e.userinfo)}${r}${o}`;let u=s.split("/").map(encodeURIComponent).join("/");return u!==""&&!u.startsWith("/")&&(u="/"+u),new URL(`${n}${a}${u}`)}function bv(t){return t.includes(":")?`[${encodeURI(t)}]`:encodeURI(t)}function vv(t){return t!==void 0?`:${t}`:""}function wv(t){if(t===void 0)return"";const e=encodeURIComponent(t.username),s=t.password!==void 0?`:${encodeURIComponent(t.password)}`:"";return`${e}${s}@`}const nh="3.7.7",xv=nh,Br=typeof Buffer=="function",xu=typeof TextDecoder=="function"?new TextDecoder:void 0,Su=typeof TextEncoder=="function"?new TextEncoder:void 0,Sv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Jr=Array.prototype.slice.call(Sv),yi=(t=>{let e={};return t.forEach((s,n)=>e[s]=n),e})(Jr),Cv=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,we=String.fromCharCode.bind(String),Cu=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),rh=t=>t.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),oh=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),ih=t=>{let e,s,n,r,o="";const i=t.length%3;for(let a=0;a<t.length;){if((s=t.charCodeAt(a++))>255||(n=t.charCodeAt(a++))>255||(r=t.charCodeAt(a++))>255)throw new TypeError("invalid character found");e=s<<16|n<<8|r,o+=Jr[e>>18&63]+Jr[e>>12&63]+Jr[e>>6&63]+Jr[e&63]}return i?o.slice(0,i-3)+"===".substring(i):o},hl=typeof btoa=="function"?t=>btoa(t):Br?t=>Buffer.from(t,"binary").toString("base64"):ih,lc=Br?t=>Buffer.from(t).toString("base64"):t=>{let s=[];for(let n=0,r=t.length;n<r;n+=4096)s.push(we.apply(null,t.subarray(n,n+4096)));return hl(s.join(""))},Ci=(t,e=!1)=>e?rh(lc(t)):lc(t),Ev=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?we(192|e>>>6)+we(128|e&63):we(224|e>>>12&15)+we(128|e>>>6&63)+we(128|e&63)}else{var e=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return we(240|e>>>18&7)+we(128|e>>>12&63)+we(128|e>>>6&63)+we(128|e&63)}},Tv=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,ah=t=>t.replace(Tv,Ev),Eu=Br?t=>Buffer.from(t,"utf8").toString("base64"):Su?t=>lc(Su.encode(t)):t=>hl(ah(t)),Jn=(t,e=!1)=>e?rh(Eu(t)):Eu(t),Tu=t=>Jn(t,!0),Rv=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Pv=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),s=e-65536;return we((s>>>10)+55296)+we((s&1023)+56320);case 3:return we((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return we((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},ch=t=>t.replace(Rv,Pv),lh=t=>{if(t=t.replace(/\s+/g,""),!Cv.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,s="",n,r;for(let o=0;o<t.length;)e=yi[t.charAt(o++)]<<18|yi[t.charAt(o++)]<<12|(n=yi[t.charAt(o++)])<<6|(r=yi[t.charAt(o++)]),s+=n===64?we(e>>16&255):r===64?we(e>>16&255,e>>8&255):we(e>>16&255,e>>8&255,e&255);return s},pl=typeof atob=="function"?t=>atob(oh(t)):Br?t=>Buffer.from(t,"base64").toString("binary"):lh,uh=Br?t=>Cu(Buffer.from(t,"base64")):t=>Cu(pl(t).split("").map(e=>e.charCodeAt(0))),dh=t=>uh(fh(t)),Av=Br?t=>Buffer.from(t,"base64").toString("utf8"):xu?t=>xu.decode(uh(t)):t=>ch(pl(t)),fh=t=>oh(t.replace(/[-_]/g,e=>e=="-"?"+":"/")),uc=t=>Av(fh(t)),_v=t=>{if(typeof t!="string")return!1;const e=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},hh=t=>({value:t,enumerable:!1,writable:!0,configurable:!0}),ph=function(){const t=(e,s)=>Object.defineProperty(String.prototype,e,hh(s));t("fromBase64",function(){return uc(this)}),t("toBase64",function(e){return Jn(this,e)}),t("toBase64URI",function(){return Jn(this,!0)}),t("toBase64URL",function(){return Jn(this,!0)}),t("toUint8Array",function(){return dh(this)})},mh=function(){const t=(e,s)=>Object.defineProperty(Uint8Array.prototype,e,hh(s));t("toBase64",function(e){return Ci(this,e)}),t("toBase64URI",function(){return Ci(this,!0)}),t("toBase64URL",function(){return Ci(this,!0)})},Iv=()=>{ph(),mh()},ml={version:nh,VERSION:xv,atob:pl,atobPolyfill:lh,btoa:hl,btoaPolyfill:ih,fromBase64:uc,toBase64:Jn,encode:Jn,encodeURI:Tu,encodeURL:Tu,utob:ah,btou:ch,decode:uc,isValid:_v,fromUint8Array:Ci,toUint8Array:dh,extendString:ph,extendUint8Array:mh,extendBuiltins:Iv},po="https://github.com/libsql/libsql-client-ts#supported-urls";function dc(t){if(t==="write")return"BEGIN IMMEDIATE";if(t==="read")return"BEGIN TRANSACTION READONLY";if(t==="deferred")return"BEGIN DEFERRED";throw RangeError('Unknown transaction mode, supported values are "write", "read" and "deferred"')}class Ov{constructor(e,s,n,r,o){K(this,"columns");K(this,"columnTypes");K(this,"rows");K(this,"rowsAffected");K(this,"lastInsertRowid");this.columns=e,this.columnTypes=s,this.rows=n,this.rowsAffected=r,this.lastInsertRowid=o}toJSON(){return{columns:this.columns,columnTypes:this.columnTypes,rows:this.rows.map(Mv),rowsAffected:this.rowsAffected,lastInsertRowid:this.lastInsertRowid!==void 0?""+this.lastInsertRowid:null}}}function Mv(t){return Array.prototype.map.call(t,Dv)}function Dv(t){return typeof t=="bigint"?""+t:t instanceof ArrayBuffer?ml.fromUint8Array(new Uint8Array(t)):t}const Ru=":memory:";function Lv(t,e){var g,y;if(typeof t!="object")throw new TypeError(`Expected client configuration as object, got ${typeof t}`);let{url:s,authToken:n,tls:r,intMode:o,concurrency:i}=t;i=Math.max(0,i||20),o??(o="number");let a=[];s===Ru&&(s="file::memory:");const u=hv(s),l=u.scheme.toLowerCase(),f=l==="file"&&u.path===Ru&&u.authority===void 0;let d;f?d={cache:{values:["shared","private"],update:(C,T)=>a.push(`${C}=${T}`)}}:d={tls:{values:["0","1"],update:(C,T)=>r=T==="1"},authToken:{update:(C,T)=>n=T}};for(const{key:C,value:T}of((g=u.query)==null?void 0:g.pairs)??[]){if(!Object.hasOwn(d,C))throw new J(`Unsupported URL query parameter ${JSON.stringify(C)}`,"URL_PARAM_NOT_SUPPORTED");const S=d[C];if(S.values!==void 0&&!S.values.includes(T))throw new J(`Unknown value for the "${C}" query argument: ${JSON.stringify(T)}. Supported values are: [${S.values.map(E=>'"'+E+'"').join(", ")}]`,"URL_INVALID");S.update!==void 0&&(S==null||S.update(C,T))}const h=a.length===0?"":`?${a.join("&")}`,m=u.path+h;let b;if(l==="libsql")if(r===!1){if(((y=u.authority)==null?void 0:y.port)===void 0)throw new J('A "libsql:" URL with ?tls=0 must specify an explicit port',"URL_INVALID");b=e?"http":"ws"}else b=e?"https":"wss";else b=l;if(b==="http"||b==="ws"?r??(r=!1):r??(r=!0),b!=="http"&&b!=="ws"&&b!=="https"&&b!=="wss"&&b!=="file")throw new J(`The client supports only "libsql:", "wss:", "ws:", "https:", "http:" and "file:" URLs, got ${JSON.stringify(u.scheme+":")}. For more information, please read ${po}`,"URL_SCHEME_NOT_SUPPORTED");if(o!=="number"&&o!=="bigint"&&o!=="string")throw new TypeError(`Invalid value for intMode, expected "number", "bigint" or "string", got ${JSON.stringify(o)}`);if(u.fragment!==void 0)throw new J(`URL fragments are not supported: ${JSON.stringify("#"+u.fragment)}`,"URL_INVALID");return f?{scheme:"file",tls:!1,path:m,intMode:o,concurrency:i,syncUrl:t.syncUrl,syncInterval:t.syncInterval,readYourWrites:t.readYourWrites,offline:t.offline,fetch:t.fetch,authToken:void 0,encryptionKey:void 0,authority:void 0}:{scheme:b,tls:r,authority:u.authority,path:m,authToken:n,intMode:o,concurrency:i,encryptionKey:t.encryptionKey,syncUrl:t.syncUrl,syncInterval:t.syncInterval,readYourWrites:t.readYourWrites,offline:t.offline,fetch:t.fetch}}let Wn;typeof WebSocket<"u"?Wn=WebSocket:typeof global<"u"?Wn=global.WebSocket:typeof window<"u"?Wn=window.WebSocket:typeof self<"u"&&(Wn=self.WebSocket);class yh{constructor(){K(this,"intMode");this.intMode="number"}}class ce extends Error{constructor(e){super(e),this.name="ClientError"}}class z extends ce{constructor(e){super(e),this.name="ProtoError"}}class gh extends ce{constructor(s,n){super(s);K(this,"code");K(this,"proto");this.name="ResponseError",this.code=n.code,this.proto=n,this.stack=void 0}}class rt extends ce{constructor(e,s){s!==void 0?(super(`${e}: ${s}`),this.cause=s):super(e),this.name="ClosedError"}}class bh extends ce{constructor(e){super(e),this.name="WebSocketUnsupportedError"}}class fc extends ce{constructor(e){super(e),this.name="WebSocketError"}}class Ei extends ce{constructor(s,n){super(s);K(this,"status");this.status=n,this.name="HttpServerError"}}class Dr extends ce{constructor(e){super(e),this.name="ProtocolVersionError"}}class Ws extends ce{constructor(e){super(e),this.name="InternalError"}}class Ur extends ce{constructor(e){super(e),this.name="MisuseError"}}function bt(t){if(typeof t=="string")return t;throw $r(t,"string")}function vt(t){if(t!=null){if(typeof t=="string")return t;throw $r(t,"string or null")}}function On(t){if(typeof t=="number")return t;throw $r(t,"number")}function mo(t){if(typeof t=="boolean")return t;throw $r(t,"boolean")}function ki(t){if(Array.isArray(t))return t;throw $r(t,"array")}function xe(t){if(t!==null&&typeof t=="object"&&!Array.isArray(t))return t;throw $r(t,"object")}function Gs(t,e){return ki(t).map(s=>e(xe(s)))}function $r(t,e){if(t===void 0)return new z(`Expected ${e}, but the property was missing`);let s=typeof t;return t===null?s="null":Array.isArray(t)&&(s="array"),new z(`Expected ${e}, received ${s}`)}function yl(t,e){return e(xe(t))}var he,xs,$t,Zs;class kv{constructor(e){w(this,$t);w(this,he,void 0);w(this,xs,void 0);v(this,he,e),v(this,xs,!1)}begin(){c(this,he).push("{"),v(this,xs,!0)}end(){c(this,he).push("}"),v(this,xs,!1)}string(e,s){R(this,$t,Zs).call(this,e),c(this,he).push(JSON.stringify(s))}stringRaw(e,s){R(this,$t,Zs).call(this,e),c(this,he).push('"'),c(this,he).push(s),c(this,he).push('"')}number(e,s){R(this,$t,Zs).call(this,e),c(this,he).push(""+s)}boolean(e,s){R(this,$t,Zs).call(this,e),c(this,he).push(s?"true":"false")}object(e,s,n){R(this,$t,Zs).call(this,e),this.begin(),n(this,s),this.end()}arrayObjects(e,s,n){R(this,$t,Zs).call(this,e),c(this,he).push("[");for(let r=0;r<s.length;++r)r!==0&&c(this,he).push(","),this.begin(),n(this,s[r]),this.end();c(this,he).push("]")}}he=new WeakMap,xs=new WeakMap,$t=new WeakSet,Zs=function(e){c(this,xs)?(c(this,he).push('"'),v(this,xs,!1)):c(this,he).push(',"'),c(this,he).push(e),c(this,he).push('":')};function vh(t,e){const s=[],n=new kv(s);return n.begin(),e(n,t),n.end(),s.join("")}const ao=0,hc=1,pc=2,Nv=5;var Et,wo,Ge;class Vv{constructor(e){w(this,Et,void 0);w(this,wo,void 0);w(this,Ge,void 0);v(this,Et,e),v(this,wo,new DataView(e.buffer,e.byteOffset,e.byteLength)),v(this,Ge,0)}varint(){let e=0;for(let s=0;;s+=7){const n=c(this,Et)[Bt(this,Ge)._++];if(e|=(n&127)<<s,!(n&128))break}return e}varintBig(){let e=0n;for(let s=0n;;s+=7n){const n=c(this,Et)[Bt(this,Ge)._++];if(e|=BigInt(n&127)<<s,!(n&128))break}return e}bytes(e){const s=new Uint8Array(c(this,Et).buffer,c(this,Et).byteOffset+c(this,Ge),e);return v(this,Ge,c(this,Ge)+e),s}double(){const e=c(this,wo).getFloat64(c(this,Ge),!0);return v(this,Ge,c(this,Ge)+8),e}skipVarint(){for(;c(this,Et)[Bt(this,Ge)._++]&128;);}skip(e){v(this,Ge,c(this,Ge)+e)}eof(){return c(this,Ge)>=c(this,Et).byteLength}}Et=new WeakMap,wo=new WeakMap,Ge=new WeakMap;var Le,Re,cn,Zr;class jv{constructor(e){w(this,cn);w(this,Le,void 0);w(this,Re,void 0);v(this,Le,e),v(this,Re,-1)}setup(e){v(this,Re,e)}bytes(){R(this,cn,Zr).call(this,pc);const e=c(this,Le).varint();return c(this,Le).bytes(e)}string(){return new TextDecoder().decode(this.bytes())}message(e){return va(this.bytes(),e)}int32(){return R(this,cn,Zr).call(this,ao),c(this,Le).varint()}uint32(){return this.int32()}bool(){return this.int32()!==0}uint64(){return R(this,cn,Zr).call(this,ao),c(this,Le).varintBig()}sint64(){const e=this.uint64();return e>>1n^-(e&1n)}double(){return R(this,cn,Zr).call(this,hc),c(this,Le).double()}maybeSkip(){if(!(c(this,Re)<0)){if(c(this,Re)===ao)c(this,Le).skipVarint();else if(c(this,Re)===hc)c(this,Le).skip(8);else if(c(this,Re)===pc){const e=c(this,Le).varint();c(this,Le).skip(e)}else if(c(this,Re)===Nv)c(this,Le).skip(4);else throw new z(`Unexpected wire type ${c(this,Re)}`);v(this,Re,-1)}}}Le=new WeakMap,Re=new WeakMap,cn=new WeakSet,Zr=function(e){if(c(this,Re)!==e)throw new z(`Expected wire type ${e}, got ${c(this,Re)}`);v(this,Re,-1)};function va(t,e){const s=new Vv(t),n=new jv(s);let r=e.default();for(;!s.eof();){const o=s.varint(),i=o>>3,a=o&7;n.setup(a);const u=e[i];if(u!==void 0){const l=u(n,r);l!==void 0&&(r=l)}n.maybeSkip()}return r}var ct,Ss,er,ke,ln,eo,tr,Ti,ea,wh,un,to;const Jl=class Jl{constructor(){w(this,ln);w(this,tr);w(this,ea);w(this,un);w(this,ct,void 0);w(this,Ss,void 0);w(this,er,void 0);w(this,ke,void 0);v(this,ct,new ArrayBuffer(256)),v(this,Ss,new Uint8Array(c(this,ct))),v(this,er,new DataView(c(this,ct))),v(this,ke,0)}bytes(e,s){R(this,un,to).call(this,e,pc),R(this,tr,Ti).call(this,s.byteLength),R(this,ln,eo).call(this,s.byteLength),c(this,Ss).set(s,c(this,ke)),v(this,ke,c(this,ke)+s.byteLength)}string(e,s){this.bytes(e,new TextEncoder().encode(s))}message(e,s,n){const r=new Jl;n(r,s),this.bytes(e,r.data())}int32(e,s){R(this,un,to).call(this,e,ao),R(this,tr,Ti).call(this,s)}uint32(e,s){this.int32(e,s)}bool(e,s){this.int32(e,s?1:0)}sint64(e,s){R(this,un,to).call(this,e,ao),R(this,ea,wh).call(this,s<<1n^s>>63n)}double(e,s){R(this,un,to).call(this,e,hc),R(this,ln,eo).call(this,8),c(this,er).setFloat64(c(this,ke),s,!0),v(this,ke,c(this,ke)+8)}data(){return new Uint8Array(c(this,ct),0,c(this,ke))}};ct=new WeakMap,Ss=new WeakMap,er=new WeakMap,ke=new WeakMap,ln=new WeakSet,eo=function(e){if(c(this,ke)+e<=c(this,ct).byteLength)return;let s=c(this,ct).byteLength;for(;s<c(this,ke)+e;)s*=2;const n=new ArrayBuffer(s),r=new Uint8Array(n),o=new DataView(n);r.set(new Uint8Array(c(this,ct),0,c(this,ke))),v(this,ct,n),v(this,Ss,r),v(this,er,o)},tr=new WeakSet,Ti=function(e){R(this,ln,eo).call(this,5),e=0|e;do{let s=e&127;e>>>=7,s|=e?128:0,c(this,Ss)[Bt(this,ke)._++]=s}while(e)},ea=new WeakSet,wh=function(e){R(this,ln,eo).call(this,10),e=e&0xffffffffffffffffn;do{let s=Number(e&0x7fn);e>>=7n,s|=e?128:0,c(this,Ss)[Bt(this,ke)._++]=s}while(e)},un=new WeakSet,to=function(e,s){R(this,tr,Ti).call(this,e<<3|s)};let mc=Jl;function xh(t,e){const s=new mc;return e(s,t),s.data()}var Ke,zt;class so{constructor(){w(this,Ke,void 0);w(this,zt,void 0);v(this,Ke,new Set),v(this,zt,new Set)}alloc(){for(const s of c(this,zt))return c(this,zt).delete(s),c(this,Ke).add(s),c(this,Ke).has(c(this,Ke).size-1)||c(this,zt).add(c(this,Ke).size-1),s;const e=c(this,Ke).size;return c(this,Ke).add(e),e}free(e){if(!c(this,Ke).delete(e))throw new Ws("Freeing an id that is not allocated");c(this,zt).delete(c(this,Ke).size),e<c(this,Ke).size&&c(this,zt).add(e)}}Ke=new WeakMap,zt=new WeakMap;function fe(t,e){throw new Ws(e)}function co(t){if(t===null)return null;if(typeof t=="string")return t;if(typeof t=="number"){if(!Number.isFinite(t))throw new RangeError("Only finite numbers (not Infinity or NaN) can be passed as arguments");return t}else if(typeof t=="bigint"){if(t<Fv||t>qv)throw new RangeError("This bigint value is too large to be represented as a 64-bit integer and passed as argument");return t}else{if(typeof t=="boolean")return t?1n:0n;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(t instanceof Uint8Array)return t;if(t instanceof Date)return+t.valueOf();if(typeof t=="object")return""+t.toString();throw new TypeError("Unsupported type of value")}}const Fv=-9223372036854775808n,qv=9223372036854775807n;function Sh(t,e){if(t===null)return null;if(typeof t=="number")return t;if(typeof t=="string")return t;if(typeof t=="bigint")if(e==="number"){const s=Number(t);if(!Number.isSafeInteger(s))throw new RangeError("Received integer which is too large to be safely represented as a JavaScript number");return s}else{if(e==="bigint")return t;if(e==="string")return""+t;throw new Ur("Invalid value for IntMode")}else{if(t instanceof Uint8Array)return t.slice().buffer;throw t===void 0?new z("Received unrecognized type of Value"):fe(t,"Impossible type of Value")}}function ti(t){return{affectedRowCount:t.affectedRowCount,lastInsertRowid:t.lastInsertRowid,columnNames:t.cols.map(e=>e.name),columnDecltypes:t.cols.map(e=>e.decltype)}}function Ch(t,e){const s=ti(t),n=t.rows.map(r=>Rh(s.columnNames,r,e));return{...s,rows:n}}function Eh(t,e){const s=ti(t);let n;return t.rows.length>0&&(n=Rh(s.columnNames,t.rows[0],e)),{...s,row:n}}function Th(t,e){const s=ti(t);let n;return t.rows.length>0&&s.columnNames.length>0&&(n=Sh(t.rows[0][0],e)),{...s,value:n}}function Rh(t,e,s){const n={};Object.defineProperty(n,"length",{value:e.length});for(let r=0;r<e.length;++r){const o=Sh(e[r],s);Object.defineProperty(n,r,{value:o});const i=t[r];i!==void 0&&!Object.hasOwn(n,i)&&Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0})}return n}function Lr(t){return new gh(t.message,t)}var sr,nr,Ht;class gl{constructor(e,s){w(this,sr,void 0);w(this,nr,void 0);w(this,Ht,void 0);v(this,sr,e),v(this,nr,s),v(this,Ht,void 0)}_getSqlId(e){if(c(this,sr)!==e)throw new Ur("Attempted to use SQL text opened with other object");if(c(this,Ht)!==void 0)throw new rt("SQL text is closed",c(this,Ht));return c(this,nr)}close(){this._setClosed(new ce("SQL text was manually closed"))}_setClosed(e){c(this,Ht)===void 0&&(v(this,Ht,e),c(this,sr)._closeSql(c(this,nr)))}get closed(){return c(this,Ht)!==void 0}}sr=new WeakMap,nr=new WeakMap,Ht=new WeakMap;function yc(t,e){return e instanceof gl?{sqlId:e._getSqlId(t)}:{sql:""+e}}var Tt,lt,Kd;let Ni=(Kd=class{constructor(){w(this,Tt,void 0);w(this,lt,void 0);v(this,Tt,[]),v(this,lt,[])}get length(){return c(this,Tt).length+c(this,lt).length}push(e){c(this,Tt).push(e)}shift(){return c(this,lt).length===0&&c(this,Tt).length>0&&(v(this,lt,c(this,Tt).reverse()),v(this,Tt,[])),c(this,lt).pop()}first(){return c(this,lt).length!==0?c(this,lt)[c(this,lt).length-1]:c(this,Tt)[0]}},Tt=new WeakMap,lt=new WeakMap,Kd),Ph=class{constructor(e){K(this,"sql");K(this,"_args");K(this,"_namedArgs");this.sql=e,this._args=[],this._namedArgs=new Map}bindIndexes(e){this._args.length=0;for(const s of e)this._args.push(co(s));return this}bindIndex(e,s){if(e!==(e|0)||e<=0)throw new RangeError("Index of a positional argument must be positive integer");for(;this._args.length<e;)this._args.push(null);return this._args[e-1]=co(s),this}bindName(e,s){return this._namedArgs.set(e,co(s)),this}unbindAll(){return this._args.length=0,this._namedArgs.clear(),this}};function Ah(t,e,s){let n,r=[],o=[];if(e instanceof Ph){n=e.sql,r=e._args;for(const[u,l]of e._namedArgs.entries())o.push({name:u,value:l})}else Array.isArray(e)?(n=e[0],Array.isArray(e[1])?r=e[1].map(u=>co(u)):o=Object.entries(e[1]).map(([u,l])=>({name:u,value:co(l)}))):n=e;const{sql:i,sqlId:a}=yc(t,n);return{sql:i,sqlId:a,args:r,namedArgs:o,wantRows:s}}var xo,rr,Qd;let Bv=(Qd=class{constructor(e,s){K(this,"_stream");w(this,xo,void 0);K(this,"_steps");w(this,rr,void 0);this._stream=e,v(this,xo,s),this._steps=[],v(this,rr,!1)}step(){return new zv(this)}execute(){if(c(this,rr))throw new Ur("This batch has already been executed");v(this,rr,!0);const e={steps:this._steps.map(s=>s.proto)};return c(this,xo)?$v(this._stream,this._steps,e):Uv(this._stream,this._steps,e)}},xo=new WeakMap,rr=new WeakMap,Qd);function Uv(t,e,s){return t._batch(s).then(n=>{for(let r=0;r<e.length;++r){const o=n.stepResults.get(r),i=n.stepErrors.get(r);e[r].callback(o,i)}})}async function $v(t,e,s){const n=await t._openCursor(s);try{let r=0,o,i=[];for(;;){const a=await n.next();if(a===void 0)break;if(a.type==="step_begin"){if(a.step<r||a.step>=e.length)throw new z("Server produced StepBeginEntry for unexpected step");if(o!==void 0)throw new z("Server produced StepBeginEntry before terminating previous step");for(let u=r;u<a.step;++u)e[u].callback(void 0,void 0);r=a.step+1,o=a,i=[]}else if(a.type==="step_end"){if(o===void 0)throw new z("Server produced StepEndEntry but no step is active");const u={cols:o.cols,rows:i,affectedRowCount:a.affectedRowCount,lastInsertRowid:a.lastInsertRowid};e[o.step].callback(u,void 0),o=void 0,i=[]}else if(a.type==="step_error"){if(o===void 0){if(a.step>=e.length)throw new z("Server produced StepErrorEntry for unexpected step");for(let u=r;u<a.step;++u)e[u].callback(void 0,void 0)}else{if(a.step!==o.step)throw new z("Server produced StepErrorEntry for unexpected step");o=void 0,i=[]}e[a.step].callback(void 0,a.error),r=a.step+1}else if(a.type==="row"){if(o===void 0)throw new z("Server produced RowEntry but no step is active");i.push(a.row)}else throw a.type==="error"?Lr(a.error):a.type==="none"?new z("Server produced unrecognized CursorEntry"):fe(a,"Impossible CursorEntry")}if(o!==void 0)throw new z("Server closed Cursor before terminating active step");for(let a=r;a<e.length;++a)e[a].callback(void 0,void 0)}finally{n.close()}}var Wt,dn,no,Yd;let zv=(Yd=class{constructor(e){w(this,dn);K(this,"_batch");w(this,Wt,void 0);K(this,"_index");this._batch=e,v(this,Wt,[]),this._index=void 0}condition(e){return c(this,Wt).push(e._proto),this}query(e){return R(this,dn,no).call(this,e,!0,Ch)}queryRow(e){return R(this,dn,no).call(this,e,!0,Eh)}queryValue(e){return R(this,dn,no).call(this,e,!0,Th)}run(e){return R(this,dn,no).call(this,e,!1,ti)}},Wt=new WeakMap,dn=new WeakSet,no=function(e,s,n){if(this._index!==void 0)throw new Ur("This BatchStep has already been added to the batch");const r=Ah(this._batch._stream._sqlOwner(),e,s);let o;c(this,Wt).length===0?o=void 0:c(this,Wt).length===1?o=c(this,Wt)[0]:o={type:"and",conds:c(this,Wt).slice()};const i={stmt:r,condition:o};return new Promise((a,u)=>{const l=(f,d)=>{f!==void 0&&d!==void 0?u(new z("Server returned both result and error")):d!==void 0?u(Lr(d)):a(f!==void 0?n(f,this._batch._stream.intMode):void 0)};this._index=this._batch._steps.length,this._batch._steps.push({proto:i,callback:l})})},Yd),Ue=class en{constructor(e,s){K(this,"_batch");K(this,"_proto");this._batch=e,this._proto=s}static ok(e){return new en(e._batch,{type:"ok",step:Pu(e)})}static error(e){return new en(e._batch,{type:"error",step:Pu(e)})}static not(e){return new en(e._batch,{type:"not",cond:e._proto})}static and(e,s){for(const n of s)Au(e,n);return new en(e,{type:"and",conds:s.map(n=>n._proto)})}static or(e,s){for(const n of s)Au(e,n);return new en(e,{type:"or",conds:s.map(n=>n._proto)})}static isAutocommit(e){return e._stream.client()._ensureVersion(3,"BatchCond.isAutocommit()"),new en(e,{type:"is_autocommit"})}};function Pu(t){if(t._index===void 0)throw new Ur("Cannot add a condition referencing a step that has not been added to the batch");return t._index}function Au(t,e){if(e._batch!==t)throw new Ur("Cannot mix BatchCond objects for different Batch objects")}function Hv(t){return{paramNames:t.params.map(e=>e.name),columns:t.cols,isExplain:t.isExplain,isReadonly:t.isReadonly}}var fn,ro;class _h{constructor(e){w(this,fn);K(this,"intMode");this.intMode=e}query(e){return R(this,fn,ro).call(this,e,!0,Ch)}queryRow(e){return R(this,fn,ro).call(this,e,!0,Eh)}queryValue(e){return R(this,fn,ro).call(this,e,!0,Th)}run(e){return R(this,fn,ro).call(this,e,!1,ti)}batch(e=!1){return new Bv(this,e)}describe(e){const s=yc(this._sqlOwner(),e);return this._describe(s).then(Hv)}sequence(e){const s=yc(this._sqlOwner(),e);return this._sequence(s)}}fn=new WeakSet,ro=function(e,s,n){const r=Ah(this._sqlOwner(),e,s);return this._execute(r).then(o=>n(o,this.intMode))};class Ih{}const Wv=1e3,Gv=10;var ta,hn,or,ir,pn,Gt,mn,sa,Oh;class Kv extends Ih{constructor(s,n,r){super();w(this,sa);w(this,ta,void 0);w(this,hn,void 0);w(this,or,void 0);w(this,ir,void 0);w(this,pn,void 0);w(this,Gt,void 0);w(this,mn,void 0);v(this,ta,s),v(this,hn,n),v(this,or,r),v(this,ir,new Ni),v(this,pn,new Ni),v(this,Gt,void 0),v(this,mn,!1)}async next(){for(;;){if(c(this,Gt)!==void 0)throw new rt("Cursor is closed",c(this,Gt));for(;!c(this,mn)&&c(this,pn).length<Gv;)c(this,pn).push(R(this,sa,Oh).call(this));const s=c(this,ir).shift();if(c(this,mn)||s!==void 0)return s;await c(this,pn).shift().then(n=>{if(n!==void 0){for(const r of n.entries)c(this,ir).push(r);c(this,mn)||v(this,mn,n.done)}})}}_setClosed(s){c(this,Gt)===void 0&&(v(this,Gt,s),c(this,hn)._sendCursorRequest(this,{type:"close_cursor",cursorId:c(this,or)}).catch(()=>{}),c(this,hn)._cursorClosed(this))}close(){this._setClosed(new ce("Cursor was manually closed"))}get closed(){return c(this,Gt)!==void 0}}ta=new WeakMap,hn=new WeakMap,or=new WeakMap,ir=new WeakMap,pn=new WeakMap,Gt=new WeakMap,mn=new WeakMap,sa=new WeakSet,Oh=function(){return c(this,hn)._sendCursorRequest(this,{type:"fetch_cursor",cursorId:c(this,or),maxCount:Wv}).then(s=>s,s=>{this._setClosed(s)})};var ve,tt,Kt,Qe,Cs,ut,Es,zn,So,bc,ar,Ri,cr,Pi;const Zl=class Zl extends _h{constructor(s,n){super(s.intMode);w(this,Es);w(this,So);w(this,ar);w(this,cr);w(this,ve,void 0);w(this,tt,void 0);w(this,Kt,void 0);w(this,Qe,void 0);w(this,Cs,void 0);w(this,ut,void 0);v(this,ve,s),v(this,tt,n),v(this,Kt,new Ni),v(this,Qe,void 0),v(this,Cs,!1),v(this,ut,void 0)}static open(s){const n=s._streamIdAlloc.alloc(),r=new Zl(s,n),o=()=>{},i=u=>{var l;return R(l=r,cr,Pi).call(l,u)},a={type:"open_stream",streamId:n};return s._sendRequest(a,{responseCallback:o,errorCallback:i}),r}client(){return c(this,ve)}_sqlOwner(){return c(this,ve)}_execute(s){return R(this,Es,zn).call(this,{type:"execute",streamId:c(this,tt),stmt:s}).then(n=>n.result)}_batch(s){return R(this,Es,zn).call(this,{type:"batch",streamId:c(this,tt),batch:s}).then(n=>n.result)}_describe(s){return c(this,ve)._ensureVersion(2,"describe()"),R(this,Es,zn).call(this,{type:"describe",streamId:c(this,tt),sql:s.sql,sqlId:s.sqlId}).then(n=>n.result)}_sequence(s){return c(this,ve)._ensureVersion(2,"sequence()"),R(this,Es,zn).call(this,{type:"sequence",streamId:c(this,tt),sql:s.sql,sqlId:s.sqlId}).then(n=>{})}getAutocommit(){return c(this,ve)._ensureVersion(3,"getAutocommit()"),R(this,Es,zn).call(this,{type:"get_autocommit",streamId:c(this,tt)}).then(s=>s.isAutocommit)}_openCursor(s){return c(this,ve)._ensureVersion(3,"cursor"),new Promise((n,r)=>{R(this,So,bc).call(this,{type:"cursor",batch:s,cursorCallback:n,errorCallback:r})})}_sendCursorRequest(s,n){if(s!==c(this,Qe))throw new Ws("Cursor not associated with the stream attempted to execute a request");return new Promise((r,o)=>{c(this,ut)!==void 0?o(new rt("Stream is closed",c(this,ut))):c(this,ve)._sendRequest(n,{responseCallback:r,errorCallback:o})})}_cursorClosed(s){if(s!==c(this,Qe))throw new Ws("Cursor was closed, but it was not associated with the stream");v(this,Qe,void 0),R(this,ar,Ri).call(this)}close(){R(this,cr,Pi).call(this,new ce("Stream was manually closed"))}closeGracefully(){v(this,Cs,!0),R(this,ar,Ri).call(this)}get closed(){return c(this,ut)!==void 0||c(this,Cs)}};ve=new WeakMap,tt=new WeakMap,Kt=new WeakMap,Qe=new WeakMap,Cs=new WeakMap,ut=new WeakMap,Es=new WeakSet,zn=function(s){return new Promise((n,r)=>{R(this,So,bc).call(this,{type:"request",request:s,responseCallback:n,errorCallback:r})})},So=new WeakSet,bc=function(s){c(this,ut)!==void 0?s.errorCallback(new rt("Stream is closed",c(this,ut))):c(this,Cs)?s.errorCallback(new rt("Stream is closing",void 0)):(c(this,Kt).push(s),R(this,ar,Ri).call(this))},ar=new WeakSet,Ri=function(){for(;;){const s=c(this,Kt).first();if(s===void 0&&c(this,Qe)===void 0&&c(this,Cs)){R(this,cr,Pi).call(this,new ce("Stream was gracefully closed"));break}else if((s==null?void 0:s.type)==="request"&&c(this,Qe)===void 0){const{request:n,responseCallback:r,errorCallback:o}=s;c(this,Kt).shift(),c(this,ve)._sendRequest(n,{responseCallback:r,errorCallback:o})}else if((s==null?void 0:s.type)==="cursor"&&c(this,Qe)===void 0){const{batch:n,cursorCallback:r}=s;c(this,Kt).shift();const o=c(this,ve)._cursorIdAlloc.alloc(),i=new Kv(c(this,ve),this,o),a={type:"open_cursor",streamId:c(this,tt),cursorId:o,batch:n},u=()=>{},l=f=>i._setClosed(f);c(this,ve)._sendRequest(a,{responseCallback:u,errorCallback:l}),v(this,Qe,i),r(i)}else break}},cr=new WeakSet,Pi=function(s){if(c(this,ut)!==void 0)return;for(v(this,ut,s),c(this,Qe)!==void 0&&c(this,Qe)._setClosed(s);;){const i=c(this,Kt).shift();if(i!==void 0)i.errorCallback(s);else break}const n={type:"close_stream",streamId:c(this,tt)},r=()=>c(this,ve)._streamIdAlloc.free(c(this,tt)),o=()=>{};c(this,ve)._sendRequest(n,{responseCallback:r,errorCallback:o})};let gc=Zl;function bl(t,e){e.sql!==void 0&&t.string("sql",e.sql),e.sqlId!==void 0&&t.number("sql_id",e.sqlId),t.arrayObjects("args",e.args,Mh),t.arrayObjects("named_args",e.namedArgs,Qv),t.boolean("want_rows",e.wantRows)}function Qv(t,e){t.string("name",e.name),t.object("value",e.value,Mh)}function Vi(t,e){t.arrayObjects("steps",e.steps,Yv)}function Yv(t,e){e.condition!==void 0&&t.object("condition",e.condition,vc),t.object("stmt",e.stmt,bl)}function vc(t,e){if(t.stringRaw("type",e.type),e.type==="ok"||e.type==="error")t.number("step",e.step);else if(e.type==="not")t.object("cond",e.cond,vc);else if(e.type==="and"||e.type==="or")t.arrayObjects("conds",e.conds,vc);else if(e.type!=="is_autocommit")throw fe(e,"Impossible type of BatchCond")}function Mh(t,e){if(e===null)t.stringRaw("type","null");else if(typeof e=="bigint")t.stringRaw("type","integer"),t.stringRaw("value",""+e);else if(typeof e=="number")t.stringRaw("type","float"),t.number("value",e);else if(typeof e=="string")t.stringRaw("type","text"),t.string("value",e);else if(e instanceof Uint8Array)t.stringRaw("type","blob"),t.stringRaw("base64",ml.fromUint8Array(e));else if(e!==void 0)throw fe(e,"Impossible type of Value")}function Xv(t,e){if(t.stringRaw("type",e.type),e.type==="hello")e.jwt!==void 0&&t.string("jwt",e.jwt);else if(e.type==="request")t.number("request_id",e.requestId),t.object("request",e.request,Jv);else throw fe(e,"Impossible type of ClientMsg")}function Jv(t,e){if(t.stringRaw("type",e.type),e.type==="open_stream")t.number("stream_id",e.streamId);else if(e.type==="close_stream")t.number("stream_id",e.streamId);else if(e.type==="execute")t.number("stream_id",e.streamId),t.object("stmt",e.stmt,bl);else if(e.type==="batch")t.number("stream_id",e.streamId),t.object("batch",e.batch,Vi);else if(e.type==="open_cursor")t.number("stream_id",e.streamId),t.number("cursor_id",e.cursorId),t.object("batch",e.batch,Vi);else if(e.type==="close_cursor")t.number("cursor_id",e.cursorId);else if(e.type==="fetch_cursor")t.number("cursor_id",e.cursorId),t.number("max_count",e.maxCount);else if(e.type==="sequence")t.number("stream_id",e.streamId),e.sql!==void 0&&t.string("sql",e.sql),e.sqlId!==void 0&&t.number("sql_id",e.sqlId);else if(e.type==="describe")t.number("stream_id",e.streamId),e.sql!==void 0&&t.string("sql",e.sql),e.sqlId!==void 0&&t.number("sql_id",e.sqlId);else if(e.type==="store_sql")t.number("sql_id",e.sqlId),t.string("sql",e.sql);else if(e.type==="close_sql")t.number("sql_id",e.sqlId);else if(e.type==="get_autocommit")t.number("stream_id",e.streamId);else throw fe(e,"Impossible type of Request")}function vl(t,e){e.sql!==void 0&&t.string(1,e.sql),e.sqlId!==void 0&&t.int32(2,e.sqlId);for(const s of e.args)t.message(3,s,Dh);for(const s of e.namedArgs)t.message(4,s,Zv);t.bool(5,e.wantRows)}function Zv(t,e){t.string(1,e.name),t.message(2,e.value,Dh)}function wa(t,e){for(const s of e.steps)t.message(1,s,ew)}function ew(t,e){e.condition!==void 0&&t.message(1,e.condition,wl),t.message(2,e.stmt,vl)}function wl(t,e){if(e.type==="ok")t.uint32(1,e.step);else if(e.type==="error")t.uint32(2,e.step);else if(e.type==="not")t.message(3,e.cond,wl);else if(e.type==="and")t.message(4,e.conds,_u);else if(e.type==="or")t.message(5,e.conds,_u);else if(e.type==="is_autocommit")t.message(6,void 0,Lh);else throw fe(e,"Impossible type of BatchCond")}function _u(t,e){for(const s of e)t.message(1,s,wl)}function Dh(t,e){if(e===null)t.message(1,void 0,Lh);else if(typeof e=="bigint")t.sint64(2,e);else if(typeof e=="number")t.double(3,e);else if(typeof e=="string")t.string(4,e);else if(e instanceof Uint8Array)t.bytes(5,e);else if(e!==void 0)throw fe(e,"Impossible type of Value")}function Lh(t,e){}function tw(t,e){if(e.type==="hello")t.message(1,e,sw);else if(e.type==="request")t.message(2,e,nw);else throw fe(e,"Impossible type of ClientMsg")}function sw(t,e){e.jwt!==void 0&&t.string(1,e.jwt)}function nw(t,e){t.int32(1,e.requestId);const s=e.request;if(s.type==="open_stream")t.message(2,s,rw);else if(s.type==="close_stream")t.message(3,s,ow);else if(s.type==="execute")t.message(4,s,iw);else if(s.type==="batch")t.message(5,s,aw);else if(s.type==="open_cursor")t.message(6,s,cw);else if(s.type==="close_cursor")t.message(7,s,lw);else if(s.type==="fetch_cursor")t.message(8,s,uw);else if(s.type==="sequence")t.message(9,s,dw);else if(s.type==="describe")t.message(10,s,fw);else if(s.type==="store_sql")t.message(11,s,hw);else if(s.type==="close_sql")t.message(12,s,pw);else if(s.type==="get_autocommit")t.message(13,s,mw);else throw fe(s,"Impossible type of Request")}function rw(t,e){t.int32(1,e.streamId)}function ow(t,e){t.int32(1,e.streamId)}function iw(t,e){t.int32(1,e.streamId),t.message(2,e.stmt,vl)}function aw(t,e){t.int32(1,e.streamId),t.message(2,e.batch,wa)}function cw(t,e){t.int32(1,e.streamId),t.int32(2,e.cursorId),t.message(3,e.batch,wa)}function lw(t,e){t.int32(1,e.cursorId)}function uw(t,e){t.int32(1,e.cursorId),t.uint32(2,e.maxCount)}function dw(t,e){t.int32(1,e.streamId),e.sql!==void 0&&t.string(2,e.sql),e.sqlId!==void 0&&t.int32(3,e.sqlId)}function fw(t,e){t.int32(1,e.streamId),e.sql!==void 0&&t.string(2,e.sql),e.sqlId!==void 0&&t.int32(3,e.sqlId)}function hw(t,e){t.int32(1,e.sqlId),t.string(2,e.sql)}function pw(t,e){t.int32(1,e.sqlId)}function mw(t,e){t.int32(1,e.streamId)}function kr(t){const e=bt(t.message),s=vt(t.code);return{message:e,code:s}}function xl(t){const e=Gs(t.cols,kh),s=ki(t.rows).map(i=>Gs(i,Fh)),n=On(t.affected_row_count),r=vt(t.last_insert_rowid),o=r!==void 0?BigInt(r):void 0;return{cols:e,rows:s,affectedRowCount:n,lastInsertRowid:o}}function kh(t){const e=vt(t.name),s=vt(t.decltype);return{name:e,decltype:s}}function Nh(t){const e=new Map;ki(t.step_results).forEach((n,r)=>{n!==null&&e.set(r,xl(xe(n)))});const s=new Map;return ki(t.step_errors).forEach((n,r)=>{n!==null&&s.set(r,kr(xe(n)))}),{stepResults:e,stepErrors:s}}function Vh(t){const e=bt(t.type);if(e==="step_begin"){const s=On(t.step),n=Gs(t.cols,kh);return{type:"step_begin",step:s,cols:n}}else if(e==="step_end"){const s=On(t.affected_row_count),n=vt(t.last_insert_rowid),r=n!==void 0?BigInt(n):void 0;return{type:"step_end",affectedRowCount:s,lastInsertRowid:r}}else if(e==="step_error"){const s=On(t.step),n=kr(xe(t.error));return{type:"step_error",step:s,error:n}}else{if(e==="row")return{type:"row",row:Gs(t.row,Fh)};if(e==="error")return{type:"error",error:kr(xe(t.error))};throw new z("Unexpected type of CursorEntry")}}function jh(t){const e=Gs(t.params,yw),s=Gs(t.cols,gw),n=mo(t.is_explain),r=mo(t.is_readonly);return{params:e,cols:s,isExplain:n,isReadonly:r}}function yw(t){return{name:vt(t.name)}}function gw(t){const e=bt(t.name),s=vt(t.decltype);return{name:e,decltype:s}}function Fh(t){const e=bt(t.type);if(e==="null")return null;if(e==="integer"){const s=bt(t.value);return BigInt(s)}else{if(e==="float")return On(t.value);if(e==="text")return bt(t.value);if(e==="blob")return ml.toUint8Array(bt(t.base64));throw new z("Unexpected type of Value")}}function bw(t){const e=bt(t.type);if(e==="hello_ok")return{type:"hello_ok"};if(e==="hello_error")return{type:"hello_error",error:kr(xe(t.error))};if(e==="response_ok"){const s=On(t.request_id),n=vw(xe(t.response));return{type:"response_ok",requestId:s,response:n}}else if(e==="response_error"){const s=On(t.request_id),n=kr(xe(t.error));return{type:"response_error",requestId:s,error:n}}else throw new z("Unexpected type of ServerMsg")}function vw(t){const e=bt(t.type);if(e==="open_stream")return{type:"open_stream"};if(e==="close_stream")return{type:"close_stream"};if(e==="execute")return{type:"execute",result:xl(xe(t.result))};if(e==="batch")return{type:"batch",result:Nh(xe(t.result))};if(e==="open_cursor")return{type:"open_cursor"};if(e==="close_cursor")return{type:"close_cursor"};if(e==="fetch_cursor"){const s=Gs(t.entries,Vh),n=mo(t.done);return{type:"fetch_cursor",entries:s,done:n}}else{if(e==="sequence")return{type:"sequence"};if(e==="describe")return{type:"describe",result:jh(xe(t.result))};if(e==="store_sql")return{type:"store_sql"};if(e==="close_sql")return{type:"close_sql"};if(e==="get_autocommit")return{type:"get_autocommit",isAutocommit:mo(t.is_autocommit)};throw new z("Unexpected type of Response")}}const Vt={default(){return{message:"",code:void 0}},1(t,e){e.message=t.string()},2(t,e){e.code=t.string()}},Nr={default(){return{cols:[],rows:[],affectedRowCount:0,lastInsertRowid:void 0}},1(t,e){e.cols.push(t.message(qh))},2(t,e){e.rows.push(t.message(Bh))},3(t,e){e.affectedRowCount=Number(t.uint64())},4(t,e){e.lastInsertRowid=t.sint64()}},qh={default(){return{name:void 0,decltype:void 0}},1(t,e){e.name=t.string()},2(t,e){e.decltype=t.string()}},Bh={default(){return[]},1(t,e){e.push(t.message(Pw))}},ji={default(){return{stepResults:new Map,stepErrors:new Map}},1(t,e){const[s,n]=t.message(ww);e.stepResults.set(s,n)},2(t,e){const[s,n]=t.message(xw);e.stepErrors.set(s,n)}},ww={default(){return[0,Nr.default()]},1(t,e){e[0]=t.uint32()},2(t,e){e[1]=t.message(Nr)}},xw={default(){return[0,Vt.default()]},1(t,e){e[0]=t.uint32()},2(t,e){e[1]=t.message(Vt)}},Uh={default(){return{type:"none"}},1(t){return t.message(Sw)},2(t){return t.message(Cw)},3(t){return t.message(Ew)},4(t){return{type:"row",row:t.message(Bh)}},5(t){return{type:"error",error:t.message(Vt)}}},Sw={default(){return{type:"step_begin",step:0,cols:[]}},1(t,e){e.step=t.uint32()},2(t,e){e.cols.push(t.message(qh))}},Cw={default(){return{type:"step_end",affectedRowCount:0,lastInsertRowid:void 0}},1(t,e){e.affectedRowCount=t.uint32()},2(t,e){e.lastInsertRowid=t.uint64()}},Ew={default(){return{type:"step_error",step:0,error:Vt.default()}},1(t,e){e.step=t.uint32()},2(t,e){e.error=t.message(Vt)}},Fi={default(){return{params:[],cols:[],isExplain:!1,isReadonly:!1}},1(t,e){e.params.push(t.message(Tw))},2(t,e){e.cols.push(t.message(Rw))},3(t,e){e.isExplain=t.bool()},4(t,e){e.isReadonly=t.bool()}},Tw={default(){return{name:void 0}},1(t,e){e.name=t.string()}},Rw={default(){return{name:"",decltype:void 0}},1(t,e){e.name=t.string()},2(t,e){e.decltype=t.string()}},Pw={default(){},1(t){return null},2(t){return t.sint64()},3(t){return t.double()},4(t){return t.string()},5(t){return t.bytes()}},Aw={default(){return{type:"none"}},1(t){return{type:"hello_ok"}},2(t){return t.message(_w)},3(t){return t.message(Ow)},4(t){return t.message(Iw)}},_w={default(){return{type:"hello_error",error:Vt.default()}},1(t,e){e.error=t.message(Vt)}},Iw={default(){return{type:"response_error",requestId:0,error:Vt.default()}},1(t,e){e.requestId=t.int32()},2(t,e){e.error=t.message(Vt)}},Ow={default(){return{type:"response_ok",requestId:0,response:{type:"none"}}},1(t,e){e.requestId=t.int32()},2(t,e){e.response={type:"open_stream"}},3(t,e){e.response={type:"close_stream"}},4(t,e){e.response=t.message(Mw)},5(t,e){e.response=t.message(Dw)},6(t,e){e.response={type:"open_cursor"}},7(t,e){e.response={type:"close_cursor"}},8(t,e){e.response=t.message(Lw)},9(t,e){e.response={type:"sequence"}},10(t,e){e.response=t.message(kw)},11(t,e){e.response={type:"store_sql"}},12(t,e){e.response={type:"close_sql"}},13(t,e){e.response=t.message(Nw)}},Mw={default(){return{type:"execute",result:Nr.default()}},1(t,e){e.result=t.message(Nr)}},Dw={default(){return{type:"batch",result:ji.default()}},1(t,e){e.result=t.message(ji)}},Lw={default(){return{type:"fetch_cursor",entries:[],done:!1}},1(t,e){e.entries.push(t.message(Uh))},2(t,e){e.done=t.bool()}},kw={default(){return{type:"describe",result:Fi.default()}},1(t,e){e.result=t.message(Fi)}},Nw={default(){return{type:"get_autocommit",isAutocommit:!1}},1(t,e){e.isAutocommit=t.bool()}},Vw=new Map([["hrana2",{version:2,encoding:"json"}],["hrana1",{version:1,encoding:"json"}]]),$h=new Map([["hrana3-protobuf",{version:3,encoding:"protobuf"}],["hrana3",{version:3,encoding:"json"}],["hrana2",{version:2,encoding:"json"}],["hrana1",{version:1,encoding:"json"}]]);var Ce,Rt,yn,Ne,gn,Ve,lr,dt,Ts,ur,Co,wc,na,zh,Eo,xc,ra,Hh,oa,Wh,st,Ct,ia,Gh,aa,Kh,Xd;let jw=(Xd=class extends yh{constructor(s,n){super();w(this,Co);w(this,na);w(this,Eo);w(this,ra);w(this,oa);w(this,st);w(this,ia);w(this,aa);w(this,Ce,void 0);w(this,Rt,void 0);w(this,yn,void 0);w(this,Ne,void 0);w(this,gn,void 0);w(this,Ve,void 0);w(this,lr,void 0);w(this,dt,void 0);w(this,Ts,void 0);K(this,"_streamIdAlloc");K(this,"_cursorIdAlloc");w(this,ur,void 0);v(this,Ce,s),v(this,Rt,[]),v(this,yn,!1),v(this,Ne,void 0),v(this,gn,!1),v(this,Ve,void 0),v(this,lr,!1),v(this,dt,new Map),v(this,Ts,new so),this._streamIdAlloc=new so,this._cursorIdAlloc=new so,v(this,ur,new so),c(this,Ce).binaryType="arraybuffer",c(this,Ce).addEventListener("open",()=>R(this,na,zh).call(this)),c(this,Ce).addEventListener("close",r=>R(this,oa,Wh).call(this,r)),c(this,Ce).addEventListener("error",r=>R(this,ra,Hh).call(this,r)),c(this,Ce).addEventListener("message",r=>R(this,ia,Gh).call(this,r)),R(this,Co,wc).call(this,{type:"hello",jwt:n})}getVersion(){return new Promise((s,n)=>{if(v(this,lr,!0),c(this,Ne)!==void 0)n(c(this,Ne));else if(c(this,yn))s(c(this,Ve).version);else{const r=()=>s(c(this,Ve).version);c(this,Rt).push({openCallback:r,errorCallback:n})}})}_ensureVersion(s,n){if(c(this,Ve)===void 0||!c(this,lr))throw new Dr(`${n} is supported only on protocol version ${s} and higher, but the version supported by the WebSocket server is not yet known. Use Client.getVersion() to wait until the version is available.`);if(c(this,Ve).version<s)throw new Dr(`${n} is supported on protocol version ${s} and higher, but the WebSocket server only supports version ${c(this,Ve).version}`)}_sendRequest(s,n){if(c(this,Ne)!==void 0){n.errorCallback(new rt("Client is closed",c(this,Ne)));return}const r=c(this,Ts).alloc();c(this,dt).set(r,{...n,type:s.type}),R(this,Co,wc).call(this,{type:"request",requestId:r,request:s})}openStream(){return gc.open(this)}storeSql(s){this._ensureVersion(2,"storeSql()");const n=c(this,ur).alloc(),r=new gl(this,n),o=()=>{},i=u=>r._setClosed(u),a={type:"store_sql",sqlId:n,sql:s};return this._sendRequest(a,{responseCallback:o,errorCallback:i}),r}_closeSql(s){if(c(this,Ne)!==void 0)return;const n=()=>c(this,ur).free(s),r=i=>R(this,st,Ct).call(this,i),o={type:"close_sql",sqlId:s};this._sendRequest(o,{responseCallback:n,errorCallback:r})}close(){R(this,st,Ct).call(this,new ce("Client was manually closed"))}get closed(){return c(this,Ne)!==void 0}},Ce=new WeakMap,Rt=new WeakMap,yn=new WeakMap,Ne=new WeakMap,gn=new WeakMap,Ve=new WeakMap,lr=new WeakMap,dt=new WeakMap,Ts=new WeakMap,ur=new WeakMap,Co=new WeakSet,wc=function(s){if(c(this,Ne)!==void 0)throw new Ws("Trying to send a message on a closed client");if(c(this,yn))R(this,Eo,xc).call(this,s);else{const n=()=>R(this,Eo,xc).call(this,s),r=()=>{};c(this,Rt).push({openCallback:n,errorCallback:r})}},na=new WeakSet,zh=function(){const s=c(this,Ce).protocol;if(s===void 0){R(this,st,Ct).call(this,new ce("The `WebSocket.protocol` property is undefined. This most likely means that the WebSocket implementation provided by the environment is broken. If you are using Miniflare 2, please update to Miniflare 3, which fixes this problem."));return}else if(s==="")v(this,Ve,{version:1,encoding:"json"});else if(v(this,Ve,$h.get(s)),c(this,Ve)===void 0){R(this,st,Ct).call(this,new z(`Unrecognized WebSocket subprotocol: ${JSON.stringify(s)}`));return}for(const n of c(this,Rt))n.openCallback();c(this,Rt).length=0,v(this,yn,!0)},Eo=new WeakSet,xc=function(s){const n=c(this,Ve).encoding;if(n==="json"){const r=vh(s,Xv);c(this,Ce).send(r)}else if(n==="protobuf"){const r=xh(s,tw);c(this,Ce).send(r)}else throw fe(n,"Impossible encoding")},ra=new WeakSet,Hh=function(s){const r=s.message??"WebSocket was closed due to an error";R(this,st,Ct).call(this,new fc(r))},oa=new WeakSet,Wh=function(s){let n=`WebSocket was closed with code ${s.code}`;s.reason&&(n+=`: ${s.reason}`),R(this,st,Ct).call(this,new fc(n))},st=new WeakSet,Ct=function(s){if(c(this,Ne)===void 0){v(this,Ne,s);for(const n of c(this,Rt))n.errorCallback(s);c(this,Rt).length=0;for(const[n,r]of c(this,dt).entries())r.errorCallback(s),c(this,Ts).free(n);c(this,dt).clear(),c(this,Ce).close()}},ia=new WeakSet,Gh=function(s){if(c(this,Ne)===void 0)try{let n;const r=c(this,Ve).encoding;if(r==="json"){if(typeof s.data!="string"){c(this,Ce).close(3003,"Only text messages are accepted with JSON encoding"),R(this,st,Ct).call(this,new z("Received non-text message from server with JSON encoding"));return}n=yl(JSON.parse(s.data),bw)}else if(r==="protobuf"){if(!(s.data instanceof ArrayBuffer)){c(this,Ce).close(3003,"Only binary messages are accepted with Protobuf encoding"),R(this,st,Ct).call(this,new z("Received non-binary message from server with Protobuf encoding"));return}n=va(new Uint8Array(s.data),Aw)}else throw fe(r,"Impossible encoding");R(this,aa,Kh).call(this,n)}catch(n){c(this,Ce).close(3007,"Could not handle message"),R(this,st,Ct).call(this,n)}},aa=new WeakSet,Kh=function(s){if(s.type==="none")throw new z("Received an unrecognized ServerMsg");if(s.type==="hello_ok"||s.type==="hello_error"){if(c(this,gn))throw new z("Received a duplicated hello response");if(v(this,gn,!0),s.type==="hello_error")throw Lr(s.error);return}else if(!c(this,gn))throw new z("Received a non-hello message before a hello response");if(s.type==="response_ok"){const n=s.requestId,r=c(this,dt).get(n);if(c(this,dt).delete(n),r===void 0)throw new z("Received unexpected OK response");c(this,Ts).free(n);try{if(r.type!==s.response.type)throw console.dir({responseState:r,msg:s}),new z("Received unexpected type of response");r.responseCallback(s.response)}catch(o){throw r.errorCallback(o),o}}else if(s.type==="response_error"){const n=s.requestId,r=c(this,dt).get(n);if(c(this,dt).delete(n),r===void 0)throw new z("Received unexpected error response");c(this,Ts).free(n),r.errorCallback(Lr(s.error))}else throw fe(s,"Impossible ServerMsg type")},Xd);const Fw=fetch,Qh=Request,qw=Headers;let Gn;if(typeof queueMicrotask<"u")Gn=queueMicrotask;else{const t=Promise.resolve();Gn=e=>{t.then(e)}}var Ye,ft,je,ca,Yh;class Bw{constructor(e){w(this,ca);w(this,Ye,void 0);w(this,ft,void 0);w(this,je,void 0);v(this,Ye,new Uint8Array(new ArrayBuffer(e))),v(this,ft,0),v(this,je,0)}get length(){return c(this,je)-c(this,ft)}data(){return c(this,Ye).slice(c(this,ft),c(this,je))}push(e){R(this,ca,Yh).call(this,e.byteLength),c(this,Ye).set(e,c(this,je)),v(this,je,c(this,je)+e.byteLength)}shift(e){v(this,ft,c(this,ft)+e)}}Ye=new WeakMap,ft=new WeakMap,je=new WeakMap,ca=new WeakSet,Yh=function(e){if(c(this,je)+e<=c(this,Ye).byteLength)return;const s=c(this,je)-c(this,ft);if(s+e<=c(this,Ye).byteLength&&2*c(this,je)>=c(this,Ye).byteLength)c(this,Ye).copyWithin(0,c(this,ft),c(this,je));else{let n=c(this,Ye).byteLength;do n*=2;while(s+e>n);const r=new Uint8Array(new ArrayBuffer(n));r.set(c(this,Ye).slice(c(this,ft),c(this,je)),0),v(this,Ye,r)}v(this,je,s),v(this,ft,0)};function Uw(t){const e=vt(t.baton),s=vt(t.base_url),n=Gs(t.results,$w);return{baton:e,baseUrl:s,results:n}}function $w(t){const e=bt(t.type);if(e==="ok")return{type:"ok",response:zw(xe(t.response))};if(e==="error")return{type:"error",error:kr(xe(t.error))};throw new z("Unexpected type of StreamResult")}function zw(t){const e=bt(t.type);if(e==="close")return{type:"close"};if(e==="execute")return{type:"execute",result:xl(xe(t.result))};if(e==="batch")return{type:"batch",result:Nh(xe(t.result))};if(e==="sequence")return{type:"sequence"};if(e==="describe")return{type:"describe",result:jh(xe(t.result))};if(e==="store_sql")return{type:"store_sql"};if(e==="close_sql")return{type:"close_sql"};if(e==="get_autocommit")return{type:"get_autocommit",isAutocommit:mo(t.is_autocommit)};throw new z("Unexpected type of StreamResponse")}function Hw(t){const e=vt(t.baton),s=vt(t.base_url);return{baton:e,baseUrl:s}}const Ww={default(){return{baton:void 0,baseUrl:void 0,results:[]}},1(t,e){e.baton=t.string()},2(t,e){e.baseUrl=t.string()},3(t,e){e.results.push(t.message(Gw))}},Gw={default(){return{type:"none"}},1(t){return{type:"ok",response:t.message(Kw)}},2(t){return{type:"error",error:t.message(Vt)}}},Kw={default(){return{type:"none"}},1(t){return{type:"close"}},2(t){return t.message(Qw)},3(t){return t.message(Yw)},4(t){return{type:"sequence"}},5(t){return t.message(Xw)},6(t){return{type:"store_sql"}},7(t){return{type:"close_sql"}},8(t){return t.message(Jw)}},Qw={default(){return{type:"execute",result:Nr.default()}},1(t,e){e.result=t.message(Nr)}},Yw={default(){return{type:"batch",result:ji.default()}},1(t,e){e.result=t.message(ji)}},Xw={default(){return{type:"describe",result:Fi.default()}},1(t,e){e.result=t.message(Fi)}},Jw={default(){return{type:"get_autocommit",isAutocommit:!1}},1(t,e){e.isAutocommit=t.bool()}},Zw={default(){return{baton:void 0,baseUrl:void 0}},1(t,e){e.baton=t.string()},2(t,e){e.baseUrl=t.string()}};var To,bn,Qt,Pt,Yt,dr,Ro,Sc,la,Xh,ua,Jh;class e0 extends Ih{constructor(s,n){super();w(this,Ro);w(this,la);w(this,ua);w(this,To,void 0);w(this,bn,void 0);w(this,Qt,void 0);w(this,Pt,void 0);w(this,Yt,void 0);w(this,dr,void 0);v(this,To,s),v(this,bn,n),v(this,Qt,void 0),v(this,Pt,new Bw(16*1024)),v(this,Yt,void 0),v(this,dr,!1)}async open(s){if(s.body===null)throw new z("No response body for cursor request");v(this,Qt,s.body.getReader());const n=await R(this,Ro,Sc).call(this,Hw,Zw);if(n===void 0)throw new z("Empty response to cursor request");return n}next(){return R(this,Ro,Sc).call(this,Vh,Uh)}close(){this._setClosed(new ce("Cursor was manually closed"))}_setClosed(s){c(this,Yt)===void 0&&(v(this,Yt,s),c(this,To)._cursorClosed(this),c(this,Qt)!==void 0&&c(this,Qt).cancel())}get closed(){return c(this,Yt)!==void 0}}To=new WeakMap,bn=new WeakMap,Qt=new WeakMap,Pt=new WeakMap,Yt=new WeakMap,dr=new WeakMap,Ro=new WeakSet,Sc=async function(s,n){for(;;){if(c(this,dr))return;if(c(this,Yt)!==void 0)throw new rt("Cursor is closed",c(this,Yt));if(c(this,bn)==="json"){const i=R(this,la,Xh).call(this);if(i!==void 0){const a=new TextDecoder().decode(i),u=JSON.parse(a);return yl(u,s)}}else if(c(this,bn)==="protobuf"){const i=R(this,ua,Jh).call(this);if(i!==void 0)return va(i,n)}else throw fe(c(this,bn),"Impossible encoding");if(c(this,Qt)===void 0)throw new Ws("Attempted to read from HTTP cursor before it was opened");const{value:r,done:o}=await c(this,Qt).read();if(o&&c(this,Pt).length===0)v(this,dr,!0);else{if(o)throw new z("Unexpected end of cursor stream");c(this,Pt).push(r)}}},la=new WeakSet,Xh=function(){const s=c(this,Pt).data(),n=10,r=s.indexOf(n);if(r<0)return;const o=s.slice(0,r);return c(this,Pt).shift(r+1),o},ua=new WeakSet,Jh=function(){const s=c(this,Pt).data();let n=0,r=0;for(;;){if(r>=s.byteLength)return;const i=s[r];if(n|=(i&127)<<7*r,r+=1,!(i&128))break}if(s.byteLength<r+n)return;const o=s.slice(r,r+n);return c(this,Pt).shift(r+n),o};function t0(t,e){e.baton!==void 0&&t.string("baton",e.baton),t.arrayObjects("requests",e.requests,s0)}function s0(t,e){if(t.stringRaw("type",e.type),e.type!=="close"){if(e.type==="execute")t.object("stmt",e.stmt,bl);else if(e.type==="batch")t.object("batch",e.batch,Vi);else if(e.type==="sequence")e.sql!==void 0&&t.string("sql",e.sql),e.sqlId!==void 0&&t.number("sql_id",e.sqlId);else if(e.type==="describe")e.sql!==void 0&&t.string("sql",e.sql),e.sqlId!==void 0&&t.number("sql_id",e.sqlId);else if(e.type==="store_sql")t.number("sql_id",e.sqlId),t.string("sql",e.sql);else if(e.type==="close_sql")t.number("sql_id",e.sqlId);else if(e.type!=="get_autocommit")throw fe(e,"Impossible type of StreamRequest")}}function n0(t,e){e.baton!==void 0&&t.string("baton",e.baton),t.object("batch",e.batch,Vi)}function r0(t,e){e.baton!==void 0&&t.string(1,e.baton);for(const s of e.requests)t.message(2,s,o0)}function o0(t,e){if(e.type==="close")t.message(1,e,i0);else if(e.type==="execute")t.message(2,e,a0);else if(e.type==="batch")t.message(3,e,c0);else if(e.type==="sequence")t.message(4,e,l0);else if(e.type==="describe")t.message(5,e,u0);else if(e.type==="store_sql")t.message(6,e,d0);else if(e.type==="close_sql")t.message(7,e,f0);else if(e.type==="get_autocommit")t.message(8,e,h0);else throw fe(e,"Impossible type of StreamRequest")}function i0(t,e){}function a0(t,e){t.message(1,e.stmt,vl)}function c0(t,e){t.message(1,e.batch,wa)}function l0(t,e){e.sql!==void 0&&t.string(1,e.sql),e.sqlId!==void 0&&t.int32(2,e.sqlId)}function u0(t,e){e.sql!==void 0&&t.string(1,e.sql),e.sqlId!==void 0&&t.int32(2,e.sqlId)}function d0(t,e){t.int32(1,e.sqlId),t.string(2,e.sql)}function f0(t,e){t.int32(1,e.sqlId)}function h0(t,e){}function p0(t,e){e.baton!==void 0&&t.string(1,e.baton),t.message(2,e.batch,wa)}var Xt,Rs,fr,Po,Ps,ht,As,Jt,Zt,_s,At,hr,_t,gs,Ao,Cc,es,tn,da,Zh,fa,ep,_o,Ec,ha,tp,pa,sp,Io,Tc;class m0 extends _h{constructor(s,n,r,o){super(s.intMode);w(this,_t);w(this,Ao);w(this,es);w(this,da);w(this,fa);w(this,_o);w(this,ha);w(this,pa);w(this,Io);w(this,Xt,void 0);w(this,Rs,void 0);w(this,fr,void 0);w(this,Po,void 0);w(this,Ps,void 0);w(this,ht,void 0);w(this,As,void 0);w(this,Jt,void 0);w(this,Zt,void 0);w(this,_s,void 0);w(this,At,void 0);w(this,hr,void 0);v(this,Xt,s),v(this,Rs,n.toString()),v(this,fr,r),v(this,Po,o),v(this,Ps,void 0),v(this,ht,new Ni),v(this,As,!1),v(this,Zt,!1),v(this,_s,!1),v(this,At,void 0),v(this,hr,new so)}client(){return c(this,Xt)}_sqlOwner(){return this}storeSql(s){const n=c(this,hr).alloc();return R(this,_t,gs).call(this,{type:"store_sql",sqlId:n,sql:s}).then(()=>{},r=>this._setClosed(r)),new gl(this,n)}_closeSql(s){c(this,At)===void 0&&R(this,_t,gs).call(this,{type:"close_sql",sqlId:s}).then(()=>c(this,hr).free(s),n=>this._setClosed(n))}_execute(s){return R(this,_t,gs).call(this,{type:"execute",stmt:s}).then(n=>n.result)}_batch(s){return R(this,_t,gs).call(this,{type:"batch",batch:s}).then(n=>n.result)}_describe(s){return R(this,_t,gs).call(this,{type:"describe",sql:s.sql,sqlId:s.sqlId}).then(n=>n.result)}_sequence(s){return R(this,_t,gs).call(this,{type:"sequence",sql:s.sql,sqlId:s.sqlId}).then(n=>{})}getAutocommit(){return c(this,Xt)._ensureVersion(3,"getAutocommit()"),R(this,_t,gs).call(this,{type:"get_autocommit"}).then(s=>s.isAutocommit)}_openCursor(s){return new Promise((n,r)=>{R(this,Ao,Cc).call(this,{type:"cursor",batch:s,cursorCallback:n,errorCallback:r})})}_cursorClosed(s){if(s!==c(this,Jt))throw new Ws("Cursor was closed, but it was not associated with the stream");v(this,Jt,void 0),Gn(()=>R(this,es,tn).call(this))}close(){this._setClosed(new ce("Stream was manually closed"))}closeGracefully(){v(this,Zt,!0),Gn(()=>R(this,es,tn).call(this))}get closed(){return c(this,At)!==void 0||c(this,Zt)}_setClosed(s){if(c(this,At)===void 0){for(v(this,At,s),c(this,Jt)!==void 0&&c(this,Jt)._setClosed(s),c(this,Xt)._streamClosed(this);;){const n=c(this,ht).shift();if(n!==void 0)n.errorCallback(s);else break}(c(this,Ps)!==void 0||c(this,As))&&!c(this,_s)&&(c(this,ht).push({type:"pipeline",request:{type:"close"},responseCallback:()=>{},errorCallback:()=>{}}),v(this,_s,!0),Gn(()=>R(this,es,tn).call(this)))}}}Xt=new WeakMap,Rs=new WeakMap,fr=new WeakMap,Po=new WeakMap,Ps=new WeakMap,ht=new WeakMap,As=new WeakMap,Jt=new WeakMap,Zt=new WeakMap,_s=new WeakMap,At=new WeakMap,hr=new WeakMap,_t=new WeakSet,gs=function(s){return new Promise((n,r)=>{R(this,Ao,Cc).call(this,{type:"pipeline",request:s,responseCallback:n,errorCallback:r})})},Ao=new WeakSet,Cc=function(s){if(c(this,At)!==void 0)throw new rt("Stream is closed",c(this,At));if(c(this,Zt))throw new rt("Stream is closing",void 0);c(this,ht).push(s),Gn(()=>R(this,es,tn).call(this))},es=new WeakSet,tn=function(){if(c(this,As)||c(this,Jt)!==void 0)return;if(c(this,Zt)&&c(this,ht).length===0){this._setClosed(new ce("Stream was gracefully closed"));return}const s=c(this,Xt)._endpoint;if(s===void 0){c(this,Xt)._endpointPromise.then(()=>R(this,es,tn).call(this),r=>this._setClosed(r));return}const n=c(this,ht).shift();if(n!==void 0)if(n.type==="pipeline"){const r=[n];for(;;){const o=c(this,ht).first();if(o!==void 0&&o.type==="pipeline")r.push(o),c(this,ht).shift();else if(o===void 0&&c(this,Zt)&&!c(this,_s)){r.push({type:"pipeline",request:{type:"close"},responseCallback:()=>{},errorCallback:()=>{}}),v(this,_s,!0);break}else break}R(this,da,Zh).call(this,s,r)}else if(n.type==="cursor")R(this,fa,ep).call(this,s,n);else throw fe(n,"Impossible type of QueueEntry")},da=new WeakSet,Zh=function(s,n){R(this,_o,Ec).call(this,()=>R(this,ha,tp).call(this,n,s),r=>g0(r,s.encoding),r=>r.baton,r=>r.baseUrl,r=>y0(n,r),r=>n.forEach(o=>o.errorCallback(r)))},fa=new WeakSet,ep=function(s,n){const r=new e0(this,s.encoding);v(this,Jt,r),R(this,_o,Ec).call(this,()=>R(this,pa,sp).call(this,n,s),o=>r.open(o),o=>o.baton,o=>o.baseUrl,o=>n.cursorCallback(r),o=>n.errorCallback(o))},_o=new WeakSet,Ec=function(s,n,r,o,i,a){let u;try{const l=s();u=c(this,Po)(l)}catch(l){u=Promise.reject(l)}v(this,As,!0),u.then(l=>l.ok?n(l):b0(l).then(f=>{throw f})).then(l=>{v(this,Ps,r(l)),v(this,Rs,o(l)??c(this,Rs)),i(l)}).catch(l=>{this._setClosed(l),a(l)}).finally(()=>{v(this,As,!1),R(this,es,tn).call(this)})},ha=new WeakSet,tp=function(s,n){return R(this,Io,Tc).call(this,new URL(n.pipelinePath,c(this,Rs)),{baton:c(this,Ps),requests:s.map(r=>r.request)},n.encoding,t0,r0)},pa=new WeakSet,sp=function(s,n){if(n.cursorPath===void 0)throw new Dr(`Cursors are supported only on protocol version 3 and higher, but the HTTP server only supports version ${n.version}.`);return R(this,Io,Tc).call(this,new URL(n.cursorPath,c(this,Rs)),{baton:c(this,Ps),batch:s.batch},n.encoding,n0,p0)},Io=new WeakSet,Tc=function(s,n,r,o,i){let a,u;if(r==="json")a=vh(n,o),u="application/json";else if(r==="protobuf")a=xh(n,i),u="application/x-protobuf";else throw fe(r,"Impossible encoding");const l=new qw;return l.set("content-type",u),c(this,fr)!==void 0&&l.set("authorization",`Bearer ${c(this,fr)}`),new Qh(s.toString(),{method:"POST",headers:l,body:a})};function y0(t,e){if(e.results.length!==t.length)throw new z("Server returned unexpected number of pipeline results");for(let s=0;s<t.length;++s){const n=e.results[s],r=t[s];if(n.type==="ok"){if(n.response.type!==r.request.type)throw new z("Received unexpected type of response");r.responseCallback(n.response)}else if(n.type==="error")r.errorCallback(Lr(n.error));else throw n.type==="none"?new z("Received unrecognized type of StreamResult"):fe(n,"Received impossible type of StreamResult")}}async function g0(t,e){var s;if(e==="json"){const n=await t.json();return yl(n,Uw)}if(e==="protobuf"){const n=await t.arrayBuffer();return va(new Uint8Array(n),Ww)}throw await((s=t.body)==null?void 0:s.cancel()),fe(e,"Impossible encoding")}async function b0(t){var n;const e=t.headers.get("content-type")??"text/plain";let s=`Server returned HTTP status ${t.status}`;if(e==="application/json"){const r=await t.json();return"message"in r?Lr(r):new Ei(s,t.status)}if(e==="text/plain"){const r=(await t.text()).trim();return r!==""&&(s+=`: ${r}`),new Ei(s,t.status)}return await((n=t.body)==null?void 0:n.cancel()),new Ei(s,t.status)}const v0=[{versionPath:"v3-protobuf",pipelinePath:"v3-protobuf/pipeline",cursorPath:"v3-protobuf/cursor",version:3,encoding:"protobuf"}],Rc={versionPath:"v2",pipelinePath:"v2/pipeline",cursorPath:void 0,version:2,encoding:"json"};var pr,Oo,mr,ts,vn,yr,Ai,Jd;let w0=(Jd=class extends yh{constructor(s,n,r,o=2){super();w(this,yr);w(this,pr,void 0);w(this,Oo,void 0);w(this,mr,void 0);w(this,ts,void 0);w(this,vn,void 0);K(this,"_endpointPromise");K(this,"_endpoint");v(this,pr,s),v(this,Oo,n),v(this,mr,r??Fw),v(this,ts,void 0),v(this,vn,new Set),o==3?(this._endpointPromise=x0(c(this,mr),c(this,pr)),this._endpointPromise.then(i=>this._endpoint=i,i=>R(this,yr,Ai).call(this,i))):(this._endpointPromise=Promise.resolve(Rc),this._endpointPromise.then(i=>this._endpoint=i,i=>R(this,yr,Ai).call(this,i)))}async getVersion(){return this._endpoint!==void 0?this._endpoint.version:(await this._endpointPromise).version}_ensureVersion(s,n){if(!(s<=Rc.version)){if(this._endpoint===void 0)throw new Dr(`${n} is supported only on protocol version ${s} and higher, but the version supported by the HTTP server is not yet known. Use Client.getVersion() to wait until the version is available.`);if(this._endpoint.version<s)throw new Dr(`${n} is supported only on protocol version ${s} and higher, but the HTTP server only supports version ${this._endpoint.version}.`)}}openStream(){if(c(this,ts)!==void 0)throw new rt("Client is closed",c(this,ts));const s=new m0(this,c(this,pr),c(this,Oo),c(this,mr));return c(this,vn).add(s),s}_streamClosed(s){c(this,vn).delete(s)}close(){R(this,yr,Ai).call(this,new ce("Client was manually closed"))}get closed(){return c(this,ts)!==void 0}},pr=new WeakMap,Oo=new WeakMap,mr=new WeakMap,ts=new WeakMap,vn=new WeakMap,yr=new WeakSet,Ai=function(s){if(c(this,ts)===void 0){v(this,ts,s);for(const n of Array.from(c(this,vn)))n._setClosed(new rt("Client was closed",s))}},Jd);async function x0(t,e){const s=t;for(const n of v0){const r=new URL(n.versionPath,e),o=new Qh(r.toString(),{method:"GET"}),i=await s(o);if(await i.arrayBuffer(),i.ok)return n}return Rc}function np(t,e,s=2){if(typeof Wn>"u")throw new bh("WebSockets are not supported in this environment");var n=void 0;s==3?n=Array.from($h.keys()):n=Array.from(Vw.keys());const r=new Wn(t,n);return new jw(r,e)}function S0(t,e,s,n=2){return new w0(t instanceof URL?t:new URL(t),e,s,n)}var gr,ss,Pe;class rp{constructor(e,s){w(this,gr,void 0);w(this,ss,void 0);w(this,Pe,void 0);v(this,gr,e),v(this,ss,s),v(this,Pe,void 0)}execute(e){return this.batch([e]).then(s=>s[0])}async batch(e){const s=this._getStream();if(s.closed)throw new J("Cannot execute statements because the transaction is closed","TRANSACTION_CLOSED");try{const n=e.map(Mn);let r;if(c(this,Pe)===void 0){this._getSqlCache().apply(n);const i=s.batch(c(this,ss)>=3),a=i.step(),u=a.run(dc(c(this,gr)));let l=a;r=n.map(f=>{const d=i.step().condition(Ue.ok(l));c(this,ss)>=3&&d.condition(Ue.not(Ue.isAutocommit(i)));const h=d.query(f);return h.catch(()=>{}),l=d,h}),v(this,Pe,i.execute().then(()=>u).then(()=>{}));try{await c(this,Pe)}catch(f){throw this.close(),f}}else{c(this,ss)<3&&await c(this,Pe),this._getSqlCache().apply(n);const i=s.batch(c(this,ss)>=3);let a;r=n.map(u=>{const l=i.step();a!==void 0&&l.condition(Ue.ok(a)),c(this,ss)>=3&&l.condition(Ue.not(Ue.isAutocommit(i)));const f=l.query(u);return f.catch(()=>{}),a=l,f}),await i.execute()}const o=[];for(const i of r){const a=await i;if(a===void 0)throw new J("Statement in a transaction was not executed, probably because the transaction has been rolled back","TRANSACTION_CLOSED");o.push(xa(a))}return o}catch(n){throw de(n)}}async executeMultiple(e){const s=this._getStream();if(s.closed)throw new J("Cannot execute statements because the transaction is closed","TRANSACTION_CLOSED");try{if(c(this,Pe)===void 0){v(this,Pe,s.run(dc(c(this,gr))).then(()=>{}));try{await c(this,Pe)}catch(n){throw this.close(),n}}else await c(this,Pe);await s.sequence(e)}catch(n){throw de(n)}}async rollback(){try{const e=this._getStream();if(e.closed||c(this,Pe)===void 0)return;const s=e.run("ROLLBACK").catch(n=>{throw de(n)});e.closeGracefully(),await s}catch(e){throw de(e)}finally{this.close()}}async commit(){try{const e=this._getStream();if(e.closed)throw new J("Cannot commit the transaction because it is already closed","TRANSACTION_CLOSED");if(c(this,Pe)!==void 0)await c(this,Pe);else return;const s=e.run("COMMIT").catch(n=>{throw de(n)});e.closeGracefully(),await s}catch(e){throw de(e)}finally{this.close()}}}gr=new WeakMap,ss=new WeakMap,Pe=new WeakMap;async function qi(t,e,s,n,r=!1){r&&s.step().run("PRAGMA foreign_keys=off");const o=s.step(),i=o.run(dc(t));let a=o;const u=n.map(m=>{const b=s.step().condition(Ue.ok(a));e>=3&&b.condition(Ue.not(Ue.isAutocommit(s)));const g=b.query(m);return a=b,g}),l=s.step().condition(Ue.ok(a));e>=3&&l.condition(Ue.not(Ue.isAutocommit(s)));const f=l.run("COMMIT");s.step().condition(Ue.not(Ue.ok(l))).run("ROLLBACK").catch(m=>{}),r&&s.step().run("PRAGMA foreign_keys=on"),await s.execute();const h=[];await i;for(const m of u){const b=await m;if(b===void 0)throw new J("Statement in a batch was not executed, probably because the transaction has been rolled back","TRANSACTION_CLOSED");h.push(xa(b))}return await f,h}function Mn(t){let e,s;Array.isArray(t)?[e,s]=t:typeof t=="string"?e=t:(e=t.sql,s=t.args);const n=new Ph(e);if(s)if(Array.isArray(s))n.bindIndexes(s);else for(const[r,o]of Object.entries(s))n.bindName(r,o);return n}function xa(t){const e=t.columnNames.map(i=>i??""),s=t.columnDecltypes.map(i=>i??""),n=t.rows,r=t.affectedRowCount,o=t.lastInsertRowid!==void 0?t.lastInsertRowid:void 0;return new Ov(e,s,n,r,o)}function de(t){if(t instanceof ce){const e=op(t);return new J(t.message,e,void 0,t)}return t}function op(t){return t instanceof gh&&t.code!==void 0?t.code:t instanceof z?"HRANA_PROTO_ERROR":t instanceof rt?t.cause instanceof ce?op(t.cause):"HRANA_CLOSED_ERROR":t instanceof fc?"HRANA_WEBSOCKET_ERROR":t instanceof Ei?"SERVER_ERROR":t instanceof Dr?"PROTOCOL_VERSION_ERROR":t instanceof Ws?"INTERNAL_ERROR":"UNKNOWN"}var Mo,It;class Sl{constructor(e,s){w(this,Mo,void 0);w(this,It,void 0);K(this,"capacity");v(this,Mo,e),v(this,It,new C0),this.capacity=s}apply(e){if(this.capacity<=0)return;const s=new Set;for(const n of e){if(typeof n.sql!="string")continue;const r=n.sql;if(r.length>=5e3)continue;let o=c(this,It).get(r);if(o===void 0){for(;c(this,It).size+1>this.capacity;){const[i,a]=c(this,It).peekLru();if(s.has(a))break;a.close(),c(this,It).delete(i)}c(this,It).size+1<=this.capacity&&(o=c(this,Mo).storeSql(r),c(this,It).set(r,o))}o!==void 0&&(n.sql=o,s.add(o))}}}Mo=new WeakMap,It=new WeakMap;var pt;class C0{constructor(){w(this,pt,void 0);v(this,pt,new Map)}get(e){const s=c(this,pt).get(e);return s!==void 0&&(c(this,pt).delete(e),c(this,pt).set(e,s)),s}set(e,s){c(this,pt).set(e,s)}peekLru(){for(const e of c(this,pt).entries())return e}delete(e){c(this,pt).delete(e)}get size(){return c(this,pt).size}}pt=new WeakMap;function E0(t){var e=0,s=[];function n(){e--,e<t&&r()}function r(){var u=s.shift();a.queue=s.length,u&&i(u.fn).then(u.resolve).catch(u.reject)}function o(u){return new Promise(function(l,f){s.push({fn:u,resolve:l,reject:f}),a.queue=s.length})}function i(u){e++;try{return Promise.resolve(u()).then(function(l){return n(),l},function(l){throw n(),l})}catch(l){return n(),Promise.reject(l)}}var a=function(u){return e>=t?o(u):i(u)};return a}function T0(t,e){var s=!1,n=this;return Promise.all(t.map(function(){var r=arguments;return n(function(){if(!s)return e.apply(void 0,r).catch(function(o){throw s=!0,o})})}))}function Iu(t){return t.queue=0,t.map=T0,t}var R0=function(t){return Iu(t?E0(t):function(e){return e()})};const ip=Xy(R0);function P0(t){if(t.scheme!=="wss"&&t.scheme!=="ws")throw new J(`The WebSocket client supports only "libsql:", "wss:" and "ws:" URLs, got ${JSON.stringify(t.scheme+":")}. For more information, please read ${po}`,"URL_SCHEME_NOT_SUPPORTED");if(t.encryptionKey!==void 0)throw new J("Encryption key is not supported by the remote client.","ENCRYPTION_KEY_NOT_SUPPORTED");if(t.scheme==="ws"&&t.tls)throw new J('A "ws:" URL cannot opt into TLS by using ?tls=1',"URL_INVALID");if(t.scheme==="wss"&&!t.tls)throw new J('A "wss:" URL cannot opt out of TLS by using ?tls=0',"URL_INVALID");const e=cc(t.scheme,t.authority,t.path);let s;try{s=np(e,t.authToken)}catch(n){if(n instanceof bh){const r=t.scheme==="wss"?"https":"http",o=cc(r,t.authority,t.path);throw new J(`This environment does not support WebSockets, please switch to the HTTP client by using a "${r}:" URL (${JSON.stringify(o)}). For more information, please read ${po}`,"WEBSOCKETS_NOT_SUPPORTED")}throw de(n)}return new I0(s,e,t.authToken,t.intMode,t.concurrency)}const A0=60*1e3,_0=100;var Do,Lo,ko,Ae,Ot,rl,No,Is,Hn,br,_i;class I0{constructor(e,s,n,r,o){w(this,Is);w(this,br);w(this,Do,void 0);w(this,Lo,void 0);w(this,ko,void 0);w(this,Ae,void 0);w(this,Ot,void 0);K(this,"closed");K(this,"protocol");w(this,rl,void 0);w(this,No,void 0);v(this,Do,s),v(this,Lo,n),v(this,ko,r),v(this,Ae,R(this,br,_i).call(this,e)),v(this,Ot,void 0),this.closed=!1,this.protocol="ws",v(this,No,ip(o))}async limit(e){return c(this,No).call(this,e)}async execute(e,s){let n;return typeof e=="string"?n={sql:e,args:s||[]}:n=e,this.limit(async()=>{const r=await R(this,Is,Hn).call(this);try{const o=Mn(n);r.conn.sqlCache.apply([o]);const i=r.stream.query(o);r.stream.closeGracefully();const a=await i;return xa(a)}catch(o){throw de(o)}finally{this._closeStream(r)}})}async batch(e,s="deferred"){return this.limit(async()=>{const n=await R(this,Is,Hn).call(this);try{const o=e.map(f=>Array.isArray(f)?{sql:f[0],args:f[1]||[]}:f).map(Mn),i=await n.conn.client.getVersion();n.conn.sqlCache.apply(o);const a=n.stream.batch(i>=3);return await qi(s,i,a,o)}catch(r){throw de(r)}finally{this._closeStream(n)}})}async migrate(e){return this.limit(async()=>{const s=await R(this,Is,Hn).call(this);try{const n=e.map(Mn),r=await s.conn.client.getVersion(),o=s.stream.batch(r>=3);return await qi("deferred",r,o,n,!0)}catch(n){throw de(n)}finally{this._closeStream(s)}})}async transaction(e="write"){return this.limit(async()=>{const s=await R(this,Is,Hn).call(this);try{const n=await s.conn.client.getVersion();return new O0(this,s,e,n)}catch(n){throw this._closeStream(s),de(n)}})}async executeMultiple(e){return this.limit(async()=>{const s=await R(this,Is,Hn).call(this);try{const n=s.stream.sequence(e);s.stream.closeGracefully(),await n}catch(n){throw de(n)}finally{this._closeStream(s)}})}sync(){throw new J("sync not supported in ws mode","SYNC_NOT_SUPPORTED")}_closeStream(e){e.stream.close();const s=e.conn;s.streamStates.delete(e),s.streamStates.size===0&&s!==c(this,Ae)&&s.client.close()}close(){c(this,Ae).client.close(),this.closed=!0}}Do=new WeakMap,Lo=new WeakMap,ko=new WeakMap,Ae=new WeakMap,Ot=new WeakMap,rl=new WeakMap,No=new WeakMap,Is=new WeakSet,Hn=async function(){if(this.closed)throw new J("The client is closed","CLIENT_CLOSED");if(new Date().valueOf()-c(this,Ae).openTime.valueOf()>A0&&c(this,Ot)===void 0){const r=R(this,br,_i).call(this);v(this,Ot,r),r.client.getVersion().then(o=>{c(this,Ae)!==r&&c(this,Ae).streamStates.size===0&&c(this,Ae).client.close(),v(this,Ae,r),v(this,Ot,void 0)},o=>{v(this,Ot,void 0)})}if(c(this,Ae).client.closed)try{c(this,Ot)!==void 0?v(this,Ae,c(this,Ot)):v(this,Ae,R(this,br,_i).call(this))}catch(r){throw de(r)}const n=c(this,Ae);try{n.useSqlCache===void 0&&(n.useSqlCache=await n.client.getVersion()>=2,n.useSqlCache&&(n.sqlCache.capacity=_0));const r=n.client.openStream();r.intMode=c(this,ko);const o={conn:n,stream:r};return n.streamStates.add(o),o}catch(r){throw de(r)}},br=new WeakSet,_i=function(e){try{return e??(e=np(c(this,Do),c(this,Lo))),{client:e,useSqlCache:void 0,sqlCache:new Sl(e,0),openTime:new Date,streamStates:new Set}}catch(s){throw de(s)}};var Vo,Os;class O0 extends rp{constructor(s,n,r,o){super(r,o);w(this,Vo,void 0);w(this,Os,void 0);v(this,Vo,s),v(this,Os,n)}_getStream(){return c(this,Os).stream}_getSqlCache(){return c(this,Os).conn.sqlCache}close(){c(this,Vo)._closeStream(c(this,Os))}get closed(){return c(this,Os).stream.closed}}Vo=new WeakMap,Os=new WeakMap;function M0(t){if(t.scheme!=="https"&&t.scheme!=="http")throw new J(`The HTTP client supports only "libsql:", "https:" and "http:" URLs, got ${JSON.stringify(t.scheme+":")}. For more information, please read ${po}`,"URL_SCHEME_NOT_SUPPORTED");if(t.encryptionKey!==void 0)throw new J("Encryption key is not supported by the remote client.","ENCRYPTION_KEY_NOT_SUPPORTED");if(t.scheme==="http"&&t.tls)throw new J('A "http:" URL cannot opt into TLS by using ?tls=1',"URL_INVALID");if(t.scheme==="https"&&!t.tls)throw new J('A "https:" URL cannot opt out of TLS by using ?tls=0',"URL_INVALID");const e=cc(t.scheme,t.authority,t.path);return new D0(e,t.authToken,t.intMode,t.fetch,t.concurrency)}const ap=30;var _e,ma,jo;class D0{constructor(e,s,n,r,o){w(this,_e,void 0);K(this,"protocol");w(this,ma,void 0);w(this,jo,void 0);v(this,_e,S0(e,s,r)),c(this,_e).intMode=n,this.protocol="http",v(this,ma,s),v(this,jo,ip(o))}async limit(e){return c(this,jo).call(this,e)}async execute(e,s){let n;return typeof e=="string"?n={sql:e,args:s||[]}:n=e,this.limit(async()=>{try{const r=Mn(n);let o;const i=c(this,_e).openStream();try{o=i.query(r)}finally{i.closeGracefully()}const a=await o;return xa(a)}catch(r){throw de(r)}})}async batch(e,s="deferred"){return this.limit(async()=>{try{const r=e.map(l=>Array.isArray(l)?{sql:l[0],args:l[1]||[]}:l).map(Mn),o=await c(this,_e).getVersion();let i;const a=c(this,_e).openStream();try{new Sl(a,ap).apply(r);const f=a.batch(!1);i=qi(s,o,f,r)}finally{a.closeGracefully()}return await i}catch(n){throw de(n)}})}async migrate(e){return this.limit(async()=>{try{const s=e.map(Mn),n=await c(this,_e).getVersion();let r;const o=c(this,_e).openStream();try{const a=o.batch(!1);r=qi("deferred",n,a,s,!0)}finally{o.closeGracefully()}return await r}catch(s){throw de(s)}})}async transaction(e="write"){return this.limit(async()=>{try{const s=await c(this,_e).getVersion();return new L0(c(this,_e).openStream(),e,s)}catch(s){throw de(s)}})}async executeMultiple(e){return this.limit(async()=>{try{let s;const n=c(this,_e).openStream();try{s=n.sequence(e)}finally{n.closeGracefully()}await s}catch(s){throw de(s)}})}sync(){throw new J("sync not supported in http mode","SYNC_NOT_SUPPORTED")}close(){c(this,_e).close()}get closed(){return c(this,_e).closed}}_e=new WeakMap,ma=new WeakMap,jo=new WeakMap;var wn,Fo;class L0 extends rp{constructor(s,n,r){super(n,r);w(this,wn,void 0);w(this,Fo,void 0);v(this,wn,s),v(this,Fo,new Sl(s,ap))}_getStream(){return c(this,wn)}_getSqlCache(){return c(this,Fo)}close(){c(this,wn).close()}get closed(){return c(this,wn).closed}}wn=new WeakMap,Fo=new WeakMap;function k0(t){return N0(Lv(t,!0))}function N0(t){if(t.scheme==="ws"||t.scheme==="wss")return P0(t);if(t.scheme==="http"||t.scheme==="https")return M0(t);throw new J(`The client that uses Web standard APIs supports only "libsql:", "wss:", "ws:", "https:" and "http:" URLs, got ${JSON.stringify(t.scheme+":")}. For more information, please read ${po}`,"URL_SCHEME_NOT_SUPPORTED")}const Vr={},cp=5*60*1e3;function Sa(t){const e=Vr[t];return e?Date.now()>e.expiration?(delete Vr[t],null):(console.log(`[Cache] Obteniendo datos de cach para: ${t}`),e.data):null}function $s(t,e,s=cp){console.log(`[Cache] Almacenando datos en cach para: ${t}`),Vr[t]={data:e,expiration:Date.now()+s}}function Dn(t){console.log(`[Cache] Eliminando datos de cach para: ${t}`),delete Vr[t]}function lp(){console.log("[Cache] Limpiando toda la cach"),Object.keys(Vr).forEach(t=>{delete Vr[t]})}async function Cl(t,e,s=cp){const n=Sa(t);if(n!==null)return n;console.log(`[Cache] Datos no encontrados en cach para: ${t}, obteniendo datos frescos`);try{const r=await e();return $s(t,r,s),r}catch(r){throw console.error(`[Cache] Error al obtener datos frescos para: ${t}`,r),r}}const Pc=Object.freeze(Object.defineProperty({__proto__:null,clear:lp,get:Sa,getOrSet:Cl,remove:Dn,set:$s},Symbol.toStringTag,{value:"Module"})),up=(t,e="")=>typeof import.meta<"u"&&{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}[t]?{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}[t]:typeof window<"u"&&window.env&&window.env[t]?window.env[t]:e,Ac=up("VITE_TURSO_DATABASE_URL","libsql://iso-muestra-104-sergiocharata1977.aws-us-east-1.turso.io"),V0=up("VITE_TURSO_AUTH_TOKEN","");console.log("URL de Turso:",Ac);let Us;try{Us=k0({url:Ac,authToken:V0,onConnect:()=>console.log("Conectado a la base de datos Turso:",Ac)})}catch(t){console.error("Error al crear el cliente de Turso:",t),Us={execute:async()=>{throw new Error("No se pudo conectar a la base de datos Turso")}}}async function se(t,e=[]){console.log("Ejecutando consulta:",t);const s=t.trim().toLowerCase().startsWith("select"),n=s?`turso_${t}_${JSON.stringify(e)}`:null;if(!Us||typeof Us.execute!="function")return console.error("Cliente Turso no inicializado correctamente"),{data:null,error:new Error("Error de conexin a la base de datos")};try{if(s&&n)return await Cl(n,async()=>({data:await Us.execute({sql:t,args:e}),error:null}));{const r=await Us.execute({sql:t,args:e});if(!s){const o=t.match(/\b(from|into|update|table)\s+([a-zA-Z_][a-zA-Z0-9_]*)/i);if(o&&o[2]){const i=o[2].toLowerCase();console.log(`Invalidando cach para tabla: ${i}`),Object.keys(Pc).forEach(a=>{a.includes(i)&&Dn(a)})}}return{data:r,error:null}}}catch(r){return console.error("Error ejecutando consulta:",r),{data:null,error:r}}}const j0=Us,AP=Object.freeze(Object.defineProperty({__proto__:null,default:j0,executeQuery:se,get tursoClient(){return Us}},Symbol.toStringTag,{value:"Module"}));class F0 extends Error{}F0.prototype.name="InvalidTokenError";const Ii={async login(t,e){const s=`
      SELECT id, nombre, email, role, password_hash 
      FROM usuarios 
      WHERE email = ?
    `,{data:n,error:r}=await se(s,[t]);if(r)throw new Error("Error al iniciar sesin");if(!n||n.rows.length===0)throw new Error("Usuario no encontrado");const o=n.rows[0];if(o.password_hash!==e)throw new Error("Contrasea incorrecta");const i={id:o.id,name:o.nombre,email:o.email,role:o.role||"user"};return localStorage.setItem("user",JSON.stringify(i)),this.logUserActivity(o.id,"login","Inicio de sesin"),i},async register(t,e,s){const r=await se("SELECT id FROM usuarios WHERE email = ?",[t]);if(r.data&&r.data.rows.length>0)throw new Error("El usuario ya existe");const o=`
      INSERT INTO usuarios (nombre, email, password_hash, role, created_at) 
      VALUES (?, ?, ?, ?, datetime('now'))
      RETURNING id, nombre, email, role
    `,{data:i,error:a}=await se(o,[s.nombre||t.split("@")[0],t,e,s.role||"user"]);if(a)throw new Error("Error al registrar el usuario");const u=i.rows[0];return{id:u.id,name:u.nombre,email:u.email,role:u.role}},async logout(){const t=this.getCurrentUser();t&&await this.logUserActivity(t.id,"logout","Cierre de sesin"),localStorage.removeItem("user")},getCurrentUser(){try{const t=localStorage.getItem("user");return t?JSON.parse(t):null}catch(t){return console.error("Error al obtener usuario actual:",t),null}},async updateProfile(t){const e=this.getCurrentUser();if(!e)throw new Error("No hay una sesin activa");const s=`
      UPDATE usuarios 
      SET nombre = ?, role = ?
      WHERE id = ?
      RETURNING id, nombre, email, role
    `,{data:n,error:r}=await se(s,[t.nombre||e.name,t.role||e.role,e.id]);if(r)throw new Error("Error al actualizar el perfil");const o=n.rows[0],i={id:o.id,name:o.nombre,email:o.email,role:o.role};return localStorage.setItem("user",JSON.stringify(i)),i},async logUserActivity(t,e,s){await se(`
      INSERT INTO actividad_usuarios (usuario_id, tipo, descripcion, fecha)
      VALUES (?, ?, ?, datetime('now'))
    `,[t,e,s])}},_P=Object.freeze(Object.defineProperty({__proto__:null,authService:Ii},Symbol.toStringTag,{value:"Module"})),dp=p.createContext(),fp=()=>p.useContext(dp);function q0({children:t}){const[e,s]=p.useState(null),[n,r]=p.useState(!0);p.useEffect(()=>{(async()=>{console.log("Verificando autenticacin...");try{const f=Ii.getCurrentUser();console.log("Usuario recuperado:",f),s(f)}catch(f){console.error("Error al verificar la autenticacin:",f)}finally{console.log("Finalizando verificacin, loading:",n),r(!1)}})()},[]);const u={currentUser:e,login:async l=>{console.log("Login iniciado con usuario:",l),s(l),console.log("Usuario establecido en el contexto")},logout:async()=>{try{await Ii.logout(),s(null)}catch(l){console.error("Error al cerrar sesin:",l)}},updateProfile:async l=>{try{const f=await Ii.updateProfile(l);return s(f),f}catch(f){throw console.error("Error al actualizar perfil:",f),f}},isAdmin:(e==null?void 0:e.role)==="admin",isAuthenticated:!!e};return x.jsx(dp.Provider,{value:u,children:!n&&t})}const hp=p.createContext(),IP=()=>p.useContext(hp);function B0({children:t}){const e=()=>{const i=localStorage.getItem("theme");return i||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},[s,n]=p.useState("light");p.useEffect(()=>{n(e())},[]),p.useEffect(()=>{const i=window.document.documentElement;i.classList.remove("light","dark"),i.classList.add(s),localStorage.setItem("theme",s)},[s]);const o={theme:s,toggleTheme:()=>{n(i=>i==="light"?"dark":"light")},isDark:s==="dark"};return x.jsx(hp.Provider,{value:o,children:t})}async function U0(t){try{const e=`SELECT * FROM ${t}`,s=await se(e);return s.data?s.data.rows:[]}catch(e){throw console.error(`Error al obtener registros de ${t}:`,e),e}}async function $0(t,e){try{const s=`SELECT * FROM ${t} WHERE id = ?`,n=await se(s,[e]);return n.data&&n.data.rows.length>0?n.data.rows[0]:null}catch(s){throw console.error(`Error al obtener registro de ${t} con ID ${e}:`,s),s}}async function z0(t,e){try{const s=Object.keys(e).join(", "),n=Object.keys(e).map(()=>"?").join(", "),r=Object.values(e),o=`INSERT INTO ${t} (${s}) VALUES (${n})`,i=await se(o,r);return i.data?i.data:null}catch(s){throw console.error(`Error al crear registro en ${t}:`,s),s}}async function H0(t,e,s){try{const n=Object.keys(s).map(a=>`${a} = ?`).join(", "),r=[...Object.values(s),e],o=`UPDATE ${t} SET ${n} WHERE id = ?`,i=await se(o,r);return i.data?i.data:null}catch(n){throw console.error(`Error al actualizar registro en ${t} con ID ${e}:`,n),n}}async function W0(t,e){try{const s=`DELETE FROM ${t} WHERE id = ?`,n=await se(s,[e]);return n.data?n.data:null}catch(s){throw console.error(`Error al eliminar registro de ${t} con ID ${e}:`,s),s}}async function G0(t,e={}){try{let s=`SELECT * FROM ${t}`;const n=[];if(Object.keys(e).length>0){const o=Object.keys(e).map(i=>e[i]===null?null:(n.push(e[i]),`${i} = ?`)).filter(Boolean).join(" AND ");o&&(s+=` WHERE ${o}`)}const r=await se(s,n);return r.data?r.data.rows:[]}catch(s){throw console.error(`Error al buscar registros en ${t}:`,s),s}}const re={getAll:U0,getById:$0,create:z0,update:H0,remove:W0,search:G0},Vn="personal",zr="puestos";async function K0(){return re.getAll(Vn)}async function Q0(t){return re.getById(Vn,t)}async function Y0(){try{const t=`
      SELECT p.*, pt.nombre as puesto_nombre, pt.departamento
      FROM ${Vn} p
      LEFT JOIN ${zr} pt ON p.puesto_id = pt.id
    `,e=await se(t);return e.data?e.data.rows:[]}catch(t){throw console.error("Error al obtener personal con informacin de puesto:",t),t}}async function X0(t){const e={...t,created_at:t.created_at||new Date().toISOString()};return re.create(Vn,e)}async function J0(t,e){const s={...e,updated_at:new Date().toISOString()};return re.update(Vn,t,s)}async function Z0(t){return re.remove(Vn,t)}async function ex(t){return re.search(Vn,t)}async function tx(){return re.getAll(zr)}async function sx(t){return re.getById(zr,t)}async function nx(t){const e={...t,created_at:t.created_at||new Date().toISOString()};return re.create(zr,e)}async function rx(t,e){return re.update(zr,t,e)}async function ox(t){return re.remove(zr,t)}const Bi={getAllPersonal:K0,getPersonalById:Q0,getPersonalConPuesto:Y0,createPersonal:X0,updatePersonal:J0,deletePersonal:Z0,searchPersonal:ex,getAllPuestos:tx,getPuestoById:sx,createPuesto:nx,updatePuesto:rx,deletePuesto:ox},jn="auditorias",si="hallazgos_auditoria";async function ix(){return re.getAll(jn)}async function ax(t){return re.getById(jn,t)}async function cx(t){const e={...t,created_at:t.created_at||new Date().toISOString(),updated_at:t.updated_at||new Date().toISOString()};return re.create(jn,e)}async function lx(t,e){const s={...e,updated_at:new Date().toISOString()};return re.update(jn,t,s)}async function ux(t){return re.remove(jn,t)}async function dx(t){return re.search(jn,t)}async function fx(t){try{const e=`
      SELECT h.*, p.nombre as proceso_nombre
      FROM ${si} h
      LEFT JOIN procesos p ON h.proceso_id = p.id
      WHERE h.auditoria_id = ?
    `,s=await se(e,[t]);return s.data?s.data.rows:[]}catch(e){throw console.error(`Error al obtener hallazgos de la auditora ${t}:`,e),e}}async function hx(t){return re.getById(si,t)}async function px(t){const e={...t,created_at:t.created_at||new Date().toISOString(),updated_at:t.updated_at||new Date().toISOString()};return re.create(si,e)}async function mx(t,e){const s={...e,updated_at:new Date().toISOString()};return re.update(si,t,s)}async function yx(t){return re.remove(si,t)}async function gx(){try{const t=`
      SELECT estado, COUNT(*) as cantidad
      FROM ${jn}
      GROUP BY estado
    `,e=await se(t);return e.data?e.data.rows:[]}catch(t){throw console.error("Error al obtener resumen de auditoras por estado:",t),t}}const Ui={getAllAuditorias:ix,getAuditoriaById:ax,createAuditoria:cx,updateAuditoria:lx,deleteAuditoria:ux,searchAuditorias:dx,getHallazgosByAuditoriaId:fx,getHallazgoById:hx,createHallazgo:px,updateHallazgo:mx,deleteHallazgo:yx,getResumenAuditoriasPorEstado:gx},bx={turso:re,personal:Bi,auditorias:Ui},vx=Object.freeze(Object.defineProperty({__proto__:null,auditoriasService:Ui,default:bx,personalService:Bi,tursoService:re},Symbol.toStringTag,{value:"Module"}));var Hr=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ln=typeof window>"u"||"Deno"in globalThis;function De(){}function wx(t,e){return typeof t=="function"?t(e):t}function _c(t){return typeof t=="number"&&t>=0&&t!==1/0}function pp(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Zn(t,e){return typeof t=="function"?t(e):t}function gt(t,e){return typeof t=="function"?t(e):t}function Ou(t,e){const{type:s="all",exact:n,fetchStatus:r,predicate:o,queryKey:i,stale:a}=t;if(i){if(n){if(e.queryHash!==El(i,e.options))return!1}else if(!yo(e.queryKey,i))return!1}if(s!=="all"){const u=e.isActive();if(s==="active"&&!u||s==="inactive"&&u)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||r&&r!==e.state.fetchStatus||o&&!o(e))}function Mu(t,e){const{exact:s,status:n,predicate:r,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(s){if(kn(e.options.mutationKey)!==kn(o))return!1}else if(!yo(e.options.mutationKey,o))return!1}return!(n&&e.state.status!==n||r&&!r(e))}function El(t,e){return((e==null?void 0:e.queryKeyHashFn)||kn)(t)}function kn(t){return JSON.stringify(t,(e,s)=>Ic(s)?Object.keys(s).sort().reduce((n,r)=>(n[r]=s[r],n),{}):s)}function yo(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(s=>yo(t[s],e[s])):!1}function mp(t,e){if(t===e)return t;const s=Du(t)&&Du(e);if(s||Ic(t)&&Ic(e)){const n=s?t:Object.keys(t),r=n.length,o=s?e:Object.keys(e),i=o.length,a=s?[]:{};let u=0;for(let l=0;l<i;l++){const f=s?l:o[l];(!s&&n.includes(f)||s)&&t[f]===void 0&&e[f]===void 0?(a[f]=void 0,u++):(a[f]=mp(t[f],e[f]),a[f]===t[f]&&t[f]!==void 0&&u++)}return r===i&&u===r?t:a}return e}function $i(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(t[s]!==e[s])return!1;return!0}function Du(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Ic(t){if(!Lu(t))return!1;const e=t.constructor;if(e===void 0)return!0;const s=e.prototype;return!(!Lu(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Lu(t){return Object.prototype.toString.call(t)==="[object Object]"}function xx(t){return new Promise(e=>{setTimeout(e,t)})}function Oc(t,e,s){return typeof s.structuralSharing=="function"?s.structuralSharing(t,e):s.structuralSharing!==!1?mp(t,e):e}function Sx(t,e,s=0){const n=[...t,e];return s&&n.length>s?n.slice(1):n}function Cx(t,e,s=0){const n=[e,...t];return s&&n.length>s?n.slice(0,-1):n}var Tl=Symbol();function yp(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Tl?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function gp(t,e){return typeof t=="function"?t(...e):!!t}var xn,Ms,vr,Zd,Ex=(Zd=class extends Hr{constructor(){super();w(this,xn,void 0);w(this,Ms,void 0);w(this,vr,void 0);v(this,vr,e=>{if(!Ln&&window.addEventListener){const s=()=>e();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){c(this,Ms)||this.setEventListener(c(this,vr))}onUnsubscribe(){var e;this.hasListeners()||((e=c(this,Ms))==null||e.call(this),v(this,Ms,void 0))}setEventListener(e){var s;v(this,vr,e),(s=c(this,Ms))==null||s.call(this),v(this,Ms,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){c(this,xn)!==e&&(v(this,xn,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(s=>{s(e)})}isFocused(){var e;return typeof c(this,xn)=="boolean"?c(this,xn):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},xn=new WeakMap,Ms=new WeakMap,vr=new WeakMap,Zd),Rl=new Ex,wr,Ds,xr,ef,Tx=(ef=class extends Hr{constructor(){super();w(this,wr,!0);w(this,Ds,void 0);w(this,xr,void 0);v(this,xr,e=>{if(!Ln&&window.addEventListener){const s=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",n)}}})}onSubscribe(){c(this,Ds)||this.setEventListener(c(this,xr))}onUnsubscribe(){var e;this.hasListeners()||((e=c(this,Ds))==null||e.call(this),v(this,Ds,void 0))}setEventListener(e){var s;v(this,xr,e),(s=c(this,Ds))==null||s.call(this),v(this,Ds,e(this.setOnline.bind(this)))}setOnline(e){c(this,wr)!==e&&(v(this,wr,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return c(this,wr)}},wr=new WeakMap,Ds=new WeakMap,xr=new WeakMap,ef),zi=new Tx;function Mc(){let t,e;const s=new Promise((r,o)=>{t=r,e=o});s.status="pending",s.catch(()=>{});function n(r){Object.assign(s,r),delete s.resolve,delete s.reject}return s.resolve=r=>{n({status:"fulfilled",value:r}),t(r)},s.reject=r=>{n({status:"rejected",reason:r}),e(r)},s}function Rx(t){return Math.min(1e3*2**t,3e4)}function bp(t){return(t??"online")==="online"?zi.isOnline():!0}var vp=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function ja(t){return t instanceof vp}function wp(t){let e=!1,s=0,n=!1,r;const o=Mc(),i=g=>{var y;n||(h(new vp(g)),(y=t.abort)==null||y.call(t))},a=()=>{e=!0},u=()=>{e=!1},l=()=>Rl.isFocused()&&(t.networkMode==="always"||zi.isOnline())&&t.canRun(),f=()=>bp(t.networkMode)&&t.canRun(),d=g=>{var y;n||(n=!0,(y=t.onSuccess)==null||y.call(t,g),r==null||r(),o.resolve(g))},h=g=>{var y;n||(n=!0,(y=t.onError)==null||y.call(t,g),r==null||r(),o.reject(g))},m=()=>new Promise(g=>{var y;r=C=>{(n||l())&&g(C)},(y=t.onPause)==null||y.call(t)}).then(()=>{var g;r=void 0,n||(g=t.onContinue)==null||g.call(t)}),b=()=>{if(n)return;let g;const y=s===0?t.initialPromise:void 0;try{g=y??t.fn()}catch(C){g=Promise.reject(C)}Promise.resolve(g).then(d).catch(C=>{var O;if(n)return;const T=t.retry??(Ln?0:3),S=t.retryDelay??Rx,E=typeof S=="function"?S(s,C):S,P=T===!0||typeof T=="number"&&s<T||typeof T=="function"&&T(s,C);if(e||!P){h(C);return}s++,(O=t.onFail)==null||O.call(t,s,C),xx(E).then(()=>l()?void 0:m()).then(()=>{e?h(C):b()})})};return{promise:o,cancel:i,continue:()=>(r==null||r(),o),cancelRetry:a,continueRetry:u,canStart:f,start:()=>(f()?b():m().then(b),o)}}var Px=t=>setTimeout(t,0);function Ax(){let t=[],e=0,s=a=>{a()},n=a=>{a()},r=Px;const o=a=>{e?t.push(a):r(()=>{s(a)})},i=()=>{const a=t;t=[],a.length&&r(()=>{n(()=>{a.forEach(u=>{s(u)})})})};return{batch:a=>{let u;e++;try{u=a()}finally{e--,e||i()}return u},batchCalls:a=>(...u)=>{o(()=>{a(...u)})},schedule:o,setNotifyFunction:a=>{s=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{r=a}}}var pe=Ax(),Sn,tf,xp=(tf=class{constructor(){w(this,Sn,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),_c(this.gcTime)&&v(this,Sn,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ln?1/0:5*60*1e3))}clearGcTimeout(){c(this,Sn)&&(clearTimeout(c(this,Sn)),v(this,Sn,void 0))}},Sn=new WeakMap,tf),Sr,Cr,nt,Cn,Ee,qo,En,mt,Ut,sf,_x=(sf=class extends xp{constructor(e){super();w(this,mt);w(this,Sr,void 0);w(this,Cr,void 0);w(this,nt,void 0);w(this,Cn,void 0);w(this,Ee,void 0);w(this,qo,void 0);w(this,En,void 0);v(this,En,!1),v(this,qo,e.defaultOptions),this.setOptions(e.options),this.observers=[],v(this,Cn,e.client),v(this,nt,c(this,Cn).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,v(this,Sr,Ix(this.options)),this.state=e.state??c(this,Sr),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=c(this,Ee))==null?void 0:e.promise}setOptions(e){this.options={...c(this,qo),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&c(this,nt).remove(this)}setData(e,s){const n=Oc(this.state.data,e,this.options);return R(this,mt,Ut).call(this,{data:n,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),n}setState(e,s){R(this,mt,Ut).call(this,{type:"setState",state:e,setStateOptions:s})}cancel(e){var n,r;const s=(n=c(this,Ee))==null?void 0:n.promise;return(r=c(this,Ee))==null||r.cancel(e),s?s.then(De).catch(De):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(c(this,Sr))}isActive(){return this.observers.some(e=>gt(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Tl||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!pp(this.state.dataUpdatedAt,e)}onFocus(){var s;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(s=c(this,Ee))==null||s.continue()}onOnline(){var s;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(s=c(this,Ee))==null||s.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),c(this,nt).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(s=>s!==e),this.observers.length||(c(this,Ee)&&(c(this,En)?c(this,Ee).cancel({revert:!0}):c(this,Ee).cancelRetry()),this.scheduleGc()),c(this,nt).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||R(this,mt,Ut).call(this,{type:"invalidate"})}fetch(e,s){var u,l,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(c(this,Ee))return c(this,Ee).continueRetry(),c(this,Ee).promise}if(e&&this.setOptions(e),!this.options.queryFn){const d=this.observers.find(h=>h.options.queryFn);d&&this.setOptions(d.options)}const n=new AbortController,r=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(v(this,En,!0),n.signal)})},o=()=>{const d=yp(this.options,s),h={client:c(this,Cn),queryKey:this.queryKey,meta:this.meta};return r(h),v(this,En,!1),this.options.persister?this.options.persister(d,h,this):d(h)},i={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:c(this,Cn),state:this.state,fetchFn:o};r(i),(u=this.options.behavior)==null||u.onFetch(i,this),v(this,Cr,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((l=i.fetchOptions)==null?void 0:l.meta))&&R(this,mt,Ut).call(this,{type:"fetch",meta:(f=i.fetchOptions)==null?void 0:f.meta});const a=d=>{var h,m,b,g;ja(d)&&d.silent||R(this,mt,Ut).call(this,{type:"error",error:d}),ja(d)||((m=(h=c(this,nt).config).onError)==null||m.call(h,d,this),(g=(b=c(this,nt).config).onSettled)==null||g.call(b,this.state.data,d,this)),this.scheduleGc()};return v(this,Ee,wp({initialPromise:s==null?void 0:s.initialPromise,fn:i.fetchFn,abort:n.abort.bind(n),onSuccess:d=>{var h,m,b,g;if(d===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(d)}catch(y){a(y);return}(m=(h=c(this,nt).config).onSuccess)==null||m.call(h,d,this),(g=(b=c(this,nt).config).onSettled)==null||g.call(b,d,this.state.error,this),this.scheduleGc()},onError:a,onFail:(d,h)=>{R(this,mt,Ut).call(this,{type:"failed",failureCount:d,error:h})},onPause:()=>{R(this,mt,Ut).call(this,{type:"pause"})},onContinue:()=>{R(this,mt,Ut).call(this,{type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0})),c(this,Ee).start()}},Sr=new WeakMap,Cr=new WeakMap,nt=new WeakMap,Cn=new WeakMap,Ee=new WeakMap,qo=new WeakMap,En=new WeakMap,mt=new WeakSet,Ut=function(e){const s=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Sp(n.data,this.options),fetchMeta:e.meta??null};case"success":return{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=e.error;return ja(r)&&r.revert&&c(this,Cr)?{...c(this,Cr),fetchStatus:"idle"}:{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=s(this.state),pe.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),c(this,nt).notify({query:this,type:"updated",action:e})})},sf);function Sp(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:bp(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Ix(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,s=e!==void 0,n=s?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:s?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var Mt,nf,Ox=(nf=class extends Hr{constructor(e={}){super();w(this,Mt,void 0);this.config=e,v(this,Mt,new Map)}build(e,s,n){const r=s.queryKey,o=s.queryHash??El(r,s);let i=this.get(o);return i||(i=new _x({client:e,queryKey:r,queryHash:o,options:e.defaultQueryOptions(s),state:n,defaultOptions:e.getQueryDefaults(r)}),this.add(i)),i}add(e){c(this,Mt).has(e.queryHash)||(c(this,Mt).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=c(this,Mt).get(e.queryHash);s&&(e.destroy(),s===e&&c(this,Mt).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){pe.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return c(this,Mt).get(e)}getAll(){return[...c(this,Mt).values()]}find(e){const s={exact:!0,...e};return this.getAll().find(n=>Ou(s,n))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(n=>Ou(e,n)):s}notify(e){pe.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){pe.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){pe.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Mt=new WeakMap,nf),Dt,Ie,Tn,Lt,bs,rf,Mx=(rf=class extends xp{constructor(e){super();w(this,Lt);w(this,Dt,void 0);w(this,Ie,void 0);w(this,Tn,void 0);this.mutationId=e.mutationId,v(this,Ie,e.mutationCache),v(this,Dt,[]),this.state=e.state||Cp(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){c(this,Dt).includes(e)||(c(this,Dt).push(e),this.clearGcTimeout(),c(this,Ie).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){v(this,Dt,c(this,Dt).filter(s=>s!==e)),this.scheduleGc(),c(this,Ie).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){c(this,Dt).length||(this.state.status==="pending"?this.scheduleGc():c(this,Ie).remove(this))}continue(){var e;return((e=c(this,Tn))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,i,a,u,l,f,d,h,m,b,g,y,C,T,S,E,P,O,I,_;const s=()=>{R(this,Lt,bs).call(this,{type:"continue"})};v(this,Tn,wp({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(D,j)=>{R(this,Lt,bs).call(this,{type:"failed",failureCount:D,error:j})},onPause:()=>{R(this,Lt,bs).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>c(this,Ie).canRun(this)}));const n=this.state.status==="pending",r=!c(this,Tn).canStart();try{if(n)s();else{R(this,Lt,bs).call(this,{type:"pending",variables:e,isPaused:r}),await((i=(o=c(this,Ie).config).onMutate)==null?void 0:i.call(o,e,this));const j=await((u=(a=this.options).onMutate)==null?void 0:u.call(a,e));j!==this.state.context&&R(this,Lt,bs).call(this,{type:"pending",context:j,variables:e,isPaused:r})}const D=await c(this,Tn).start();return await((f=(l=c(this,Ie).config).onSuccess)==null?void 0:f.call(l,D,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,D,e,this.state.context)),await((b=(m=c(this,Ie).config).onSettled)==null?void 0:b.call(m,D,null,this.state.variables,this.state.context,this)),await((y=(g=this.options).onSettled)==null?void 0:y.call(g,D,null,e,this.state.context)),R(this,Lt,bs).call(this,{type:"success",data:D}),D}catch(D){try{throw await((T=(C=c(this,Ie).config).onError)==null?void 0:T.call(C,D,e,this.state.context,this)),await((E=(S=this.options).onError)==null?void 0:E.call(S,D,e,this.state.context)),await((O=(P=c(this,Ie).config).onSettled)==null?void 0:O.call(P,void 0,D,this.state.variables,this.state.context,this)),await((_=(I=this.options).onSettled)==null?void 0:_.call(I,void 0,D,e,this.state.context)),D}finally{R(this,Lt,bs).call(this,{type:"error",error:D})}}finally{c(this,Ie).runNext(this)}}},Dt=new WeakMap,Ie=new WeakMap,Tn=new WeakMap,Lt=new WeakSet,bs=function(e){const s=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=s(this.state),pe.batch(()=>{c(this,Dt).forEach(n=>{n.onMutationUpdate(e)}),c(this,Ie).notify({mutation:this,type:"updated",action:e})})},rf);function Cp(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ns,yt,Bo,of,Dx=(of=class extends Hr{constructor(e={}){super();w(this,ns,void 0);w(this,yt,void 0);w(this,Bo,void 0);this.config=e,v(this,ns,new Set),v(this,yt,new Map),v(this,Bo,0)}build(e,s,n){const r=new Mx({mutationCache:this,mutationId:++Bt(this,Bo)._,options:e.defaultMutationOptions(s),state:n});return this.add(r),r}add(e){c(this,ns).add(e);const s=gi(e);if(typeof s=="string"){const n=c(this,yt).get(s);n?n.push(e):c(this,yt).set(s,[e])}this.notify({type:"added",mutation:e})}remove(e){if(c(this,ns).delete(e)){const s=gi(e);if(typeof s=="string"){const n=c(this,yt).get(s);if(n)if(n.length>1){const r=n.indexOf(e);r!==-1&&n.splice(r,1)}else n[0]===e&&c(this,yt).delete(s)}}this.notify({type:"removed",mutation:e})}canRun(e){const s=gi(e);if(typeof s=="string"){const n=c(this,yt).get(s),r=n==null?void 0:n.find(o=>o.state.status==="pending");return!r||r===e}else return!0}runNext(e){var n;const s=gi(e);if(typeof s=="string"){const r=(n=c(this,yt).get(s))==null?void 0:n.find(o=>o!==e&&o.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}else return Promise.resolve()}clear(){pe.batch(()=>{c(this,ns).forEach(e=>{this.notify({type:"removed",mutation:e})}),c(this,ns).clear(),c(this,yt).clear()})}getAll(){return Array.from(c(this,ns))}find(e){const s={exact:!0,...e};return this.getAll().find(n=>Mu(s,n))}findAll(e={}){return this.getAll().filter(s=>Mu(e,s))}notify(e){pe.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return pe.batch(()=>Promise.all(e.map(s=>s.continue().catch(De))))}},ns=new WeakMap,yt=new WeakMap,Bo=new WeakMap,of);function gi(t){var e;return(e=t.options.scope)==null?void 0:e.id}function ku(t){return{onFetch:(e,s)=>{var f,d,h,m,b;const n=e.options,r=(h=(d=(f=e.fetchOptions)==null?void 0:f.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,o=((m=e.state.data)==null?void 0:m.pages)||[],i=((b=e.state.data)==null?void 0:b.pageParams)||[];let a={pages:[],pageParams:[]},u=0;const l=async()=>{let g=!1;const y=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},C=yp(e.options,e.fetchOptions),T=async(S,E,P)=>{if(g)return Promise.reject();if(E==null&&S.pages.length)return Promise.resolve(S);const O={client:e.client,queryKey:e.queryKey,pageParam:E,direction:P?"backward":"forward",meta:e.options.meta};y(O);const I=await C(O),{maxPages:_}=e.options,D=P?Cx:Sx;return{pages:D(S.pages,I,_),pageParams:D(S.pageParams,E,_)}};if(r&&o.length){const S=r==="backward",E=S?Lx:Nu,P={pages:o,pageParams:i},O=E(n,P);a=await T(P,O,S)}else{const S=t??o.length;do{const E=u===0?i[0]??n.initialPageParam:Nu(n,a);if(u>0&&E==null)break;a=await T(a,E),u++}while(u<S)}return a};e.options.persister?e.fetchFn=()=>{var g,y;return(y=(g=e.options).persister)==null?void 0:y.call(g,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s)}:e.fetchFn=l}}}function Nu(t,{pages:e,pageParams:s}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,s[n],s):void 0}function Lx(t,{pages:e,pageParams:s}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,s[0],s):void 0}var oe,Ls,ks,Er,Tr,Ns,Rr,Pr,af,kx=(af=class{constructor(t={}){w(this,oe,void 0);w(this,Ls,void 0);w(this,ks,void 0);w(this,Er,void 0);w(this,Tr,void 0);w(this,Ns,void 0);w(this,Rr,void 0);w(this,Pr,void 0);v(this,oe,t.queryCache||new Ox),v(this,Ls,t.mutationCache||new Dx),v(this,ks,t.defaultOptions||{}),v(this,Er,new Map),v(this,Tr,new Map),v(this,Ns,0)}mount(){Bt(this,Ns)._++,c(this,Ns)===1&&(v(this,Rr,Rl.subscribe(async t=>{t&&(await this.resumePausedMutations(),c(this,oe).onFocus())})),v(this,Pr,zi.subscribe(async t=>{t&&(await this.resumePausedMutations(),c(this,oe).onOnline())})))}unmount(){var t,e;Bt(this,Ns)._--,c(this,Ns)===0&&((t=c(this,Rr))==null||t.call(this),v(this,Rr,void 0),(e=c(this,Pr))==null||e.call(this),v(this,Pr,void 0))}isFetching(t){return c(this,oe).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return c(this,Ls).findAll({...t,status:"pending"}).length}getQueryData(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=c(this,oe).get(e.queryHash))==null?void 0:s.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),s=c(this,oe).build(this,e),n=s.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(Zn(e.staleTime,s))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return c(this,oe).findAll(t).map(({queryKey:e,state:s})=>{const n=s.data;return[e,n]})}setQueryData(t,e,s){const n=this.defaultQueryOptions({queryKey:t}),r=c(this,oe).get(n.queryHash),o=r==null?void 0:r.state.data,i=wx(e,o);if(i!==void 0)return c(this,oe).build(this,n).setData(i,{...s,manual:!0})}setQueriesData(t,e,s){return pe.batch(()=>c(this,oe).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,s)]))}getQueryState(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=c(this,oe).get(e.queryHash))==null?void 0:s.state}removeQueries(t){const e=c(this,oe);pe.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=c(this,oe);return pe.batch(()=>(s.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const s={revert:!0,...e},n=pe.batch(()=>c(this,oe).findAll(t).map(r=>r.cancel(s)));return Promise.all(n).then(De).catch(De)}invalidateQueries(t,e={}){return pe.batch(()=>(c(this,oe).findAll(t).forEach(s=>{s.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const s={...e,cancelRefetch:e.cancelRefetch??!0},n=pe.batch(()=>c(this,oe).findAll(t).filter(r=>!r.isDisabled()).map(r=>{let o=r.fetch(void 0,s);return s.throwOnError||(o=o.catch(De)),r.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(De)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const s=c(this,oe).build(this,e);return s.isStaleByTime(Zn(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(De).catch(De)}fetchInfiniteQuery(t){return t.behavior=ku(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(De).catch(De)}ensureInfiniteQueryData(t){return t.behavior=ku(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return zi.isOnline()?c(this,Ls).resumePausedMutations():Promise.resolve()}getQueryCache(){return c(this,oe)}getMutationCache(){return c(this,Ls)}getDefaultOptions(){return c(this,ks)}setDefaultOptions(t){v(this,ks,t)}setQueryDefaults(t,e){c(this,Er).set(kn(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...c(this,Er).values()],s={};return e.forEach(n=>{yo(t,n.queryKey)&&Object.assign(s,n.defaultOptions)}),s}setMutationDefaults(t,e){c(this,Tr).set(kn(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...c(this,Tr).values()],s={};return e.forEach(n=>{yo(t,n.mutationKey)&&Object.assign(s,n.defaultOptions)}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e={...c(this,ks).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=El(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Tl&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...c(this,ks).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){c(this,oe).clear(),c(this,Ls).clear()}},oe=new WeakMap,Ls=new WeakMap,ks=new WeakMap,Er=new WeakMap,Tr=new WeakMap,Ns=new WeakMap,Rr=new WeakMap,Pr=new WeakMap,af),Fe,W,Uo,Oe,Rn,Ar,Vs,js,$o,_r,Ir,Pn,An,Fs,Or,_n,oo,zo,Dc,Ho,Lc,Wo,kc,Go,Nc,Ko,Vc,Qo,jc,Yo,Fc,ya,Ep,cf,Nx=(cf=class extends Hr{constructor(e,s){super();w(this,_n);w(this,zo);w(this,Ho);w(this,Wo);w(this,Go);w(this,Ko);w(this,Qo);w(this,Yo);w(this,ya);w(this,Fe,void 0);w(this,W,void 0);w(this,Uo,void 0);w(this,Oe,void 0);w(this,Rn,void 0);w(this,Ar,void 0);w(this,Vs,void 0);w(this,js,void 0);w(this,$o,void 0);w(this,_r,void 0);w(this,Ir,void 0);w(this,Pn,void 0);w(this,An,void 0);w(this,Fs,void 0);w(this,Or,new Set);this.options=s,v(this,Fe,e),v(this,js,null),v(this,Vs,Mc()),this.options.experimental_prefetchInRender||c(this,Vs).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(c(this,W).addObserver(this),Vu(c(this,W),this.options)?R(this,_n,oo).call(this):this.updateResult(),R(this,Go,Nc).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return qc(c(this,W),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return qc(c(this,W),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,R(this,Ko,Vc).call(this),R(this,Qo,jc).call(this),c(this,W).removeObserver(this)}setOptions(e){const s=this.options,n=c(this,W);if(this.options=c(this,Fe).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof gt(this.options.enabled,c(this,W))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");R(this,Yo,Fc).call(this),c(this,W).setOptions(this.options),s._defaulted&&!$i(this.options,s)&&c(this,Fe).getQueryCache().notify({type:"observerOptionsUpdated",query:c(this,W),observer:this});const r=this.hasListeners();r&&ju(c(this,W),n,this.options,s)&&R(this,_n,oo).call(this),this.updateResult(),r&&(c(this,W)!==n||gt(this.options.enabled,c(this,W))!==gt(s.enabled,c(this,W))||Zn(this.options.staleTime,c(this,W))!==Zn(s.staleTime,c(this,W)))&&R(this,zo,Dc).call(this);const o=R(this,Ho,Lc).call(this);r&&(c(this,W)!==n||gt(this.options.enabled,c(this,W))!==gt(s.enabled,c(this,W))||o!==c(this,Fs))&&R(this,Wo,kc).call(this,o)}getOptimisticResult(e){const s=c(this,Fe).getQueryCache().build(c(this,Fe),e),n=this.createResult(s,e);return jx(this,n)&&(v(this,Oe,n),v(this,Ar,this.options),v(this,Rn,c(this,W).state)),n}getCurrentResult(){return c(this,Oe)}trackResult(e,s){return new Proxy(e,{get:(n,r)=>(this.trackProp(r),s==null||s(r),Reflect.get(n,r))})}trackProp(e){c(this,Or).add(e)}getCurrentQuery(){return c(this,W)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=c(this,Fe).defaultQueryOptions(e),n=c(this,Fe).getQueryCache().build(c(this,Fe),s);return n.fetch().then(()=>this.createResult(n,s))}fetch(e){return R(this,_n,oo).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),c(this,Oe)))}createResult(e,s){var D;const n=c(this,W),r=this.options,o=c(this,Oe),i=c(this,Rn),a=c(this,Ar),l=e!==n?e.state:c(this,Uo),{state:f}=e;let d={...f},h=!1,m;if(s._optimisticResults){const j=this.hasListeners(),U=!j&&Vu(e,s),k=j&&ju(e,n,s,r);(U||k)&&(d={...d,...Sp(f.data,e.options)}),s._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:b,errorUpdatedAt:g,status:y}=d;m=d.data;let C=!1;if(s.placeholderData!==void 0&&m===void 0&&y==="pending"){let j;o!=null&&o.isPlaceholderData&&s.placeholderData===(a==null?void 0:a.placeholderData)?(j=o.data,C=!0):j=typeof s.placeholderData=="function"?s.placeholderData((D=c(this,Ir))==null?void 0:D.state.data,c(this,Ir)):s.placeholderData,j!==void 0&&(y="success",m=Oc(o==null?void 0:o.data,j,s),h=!0)}if(s.select&&m!==void 0&&!C)if(o&&m===(i==null?void 0:i.data)&&s.select===c(this,$o))m=c(this,_r);else try{v(this,$o,s.select),m=s.select(m),m=Oc(o==null?void 0:o.data,m,s),v(this,_r,m),v(this,js,null)}catch(j){v(this,js,j)}c(this,js)&&(b=c(this,js),m=c(this,_r),g=Date.now(),y="error");const T=d.fetchStatus==="fetching",S=y==="pending",E=y==="error",P=S&&T,O=m!==void 0,_={status:y,fetchStatus:d.fetchStatus,isPending:S,isSuccess:y==="success",isError:E,isInitialLoading:P,isLoading:P,data:m,dataUpdatedAt:d.dataUpdatedAt,error:b,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:T,isRefetching:T&&!S,isLoadingError:E&&!O,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:E&&O,isStale:Pl(e,s),refetch:this.refetch,promise:c(this,Vs)};if(this.options.experimental_prefetchInRender){const j=G=>{_.status==="error"?G.reject(_.error):_.data!==void 0&&G.resolve(_.data)},U=()=>{const G=v(this,Vs,_.promise=Mc());j(G)},k=c(this,Vs);switch(k.status){case"pending":e.queryHash===n.queryHash&&j(k);break;case"fulfilled":(_.status==="error"||_.data!==k.value)&&U();break;case"rejected":(_.status!=="error"||_.error!==k.reason)&&U();break}}return _}updateResult(){const e=c(this,Oe),s=this.createResult(c(this,W),this.options);if(v(this,Rn,c(this,W).state),v(this,Ar,this.options),c(this,Rn).data!==void 0&&v(this,Ir,c(this,W)),$i(s,e))return;v(this,Oe,s);const n=()=>{if(!e)return!0;const{notifyOnChangeProps:r}=this.options,o=typeof r=="function"?r():r;if(o==="all"||!o&&!c(this,Or).size)return!0;const i=new Set(o??c(this,Or));return this.options.throwOnError&&i.add("error"),Object.keys(c(this,Oe)).some(a=>{const u=a;return c(this,Oe)[u]!==e[u]&&i.has(u)})};R(this,ya,Ep).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&R(this,Go,Nc).call(this)}},Fe=new WeakMap,W=new WeakMap,Uo=new WeakMap,Oe=new WeakMap,Rn=new WeakMap,Ar=new WeakMap,Vs=new WeakMap,js=new WeakMap,$o=new WeakMap,_r=new WeakMap,Ir=new WeakMap,Pn=new WeakMap,An=new WeakMap,Fs=new WeakMap,Or=new WeakMap,_n=new WeakSet,oo=function(e){R(this,Yo,Fc).call(this);let s=c(this,W).fetch(this.options,e);return e!=null&&e.throwOnError||(s=s.catch(De)),s},zo=new WeakSet,Dc=function(){R(this,Ko,Vc).call(this);const e=Zn(this.options.staleTime,c(this,W));if(Ln||c(this,Oe).isStale||!_c(e))return;const n=pp(c(this,Oe).dataUpdatedAt,e)+1;v(this,Pn,setTimeout(()=>{c(this,Oe).isStale||this.updateResult()},n))},Ho=new WeakSet,Lc=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(c(this,W)):this.options.refetchInterval)??!1},Wo=new WeakSet,kc=function(e){R(this,Qo,jc).call(this),v(this,Fs,e),!(Ln||gt(this.options.enabled,c(this,W))===!1||!_c(c(this,Fs))||c(this,Fs)===0)&&v(this,An,setInterval(()=>{(this.options.refetchIntervalInBackground||Rl.isFocused())&&R(this,_n,oo).call(this)},c(this,Fs)))},Go=new WeakSet,Nc=function(){R(this,zo,Dc).call(this),R(this,Wo,kc).call(this,R(this,Ho,Lc).call(this))},Ko=new WeakSet,Vc=function(){c(this,Pn)&&(clearTimeout(c(this,Pn)),v(this,Pn,void 0))},Qo=new WeakSet,jc=function(){c(this,An)&&(clearInterval(c(this,An)),v(this,An,void 0))},Yo=new WeakSet,Fc=function(){const e=c(this,Fe).getQueryCache().build(c(this,Fe),this.options);if(e===c(this,W))return;const s=c(this,W);v(this,W,e),v(this,Uo,e.state),this.hasListeners()&&(s==null||s.removeObserver(this),e.addObserver(this))},ya=new WeakSet,Ep=function(e){pe.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(c(this,Oe))}),c(this,Fe).getQueryCache().notify({query:c(this,W),type:"observerResultsUpdated"})})},cf);function Vx(t,e){return gt(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Vu(t,e){return Vx(t,e)||t.state.data!==void 0&&qc(t,e,e.refetchOnMount)}function qc(t,e,s){if(gt(e.enabled,t)!==!1){const n=typeof s=="function"?s(t):s;return n==="always"||n!==!1&&Pl(t,e)}return!1}function ju(t,e,s,n){return(t!==e||gt(n.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&Pl(t,s)}function Pl(t,e){return gt(e.enabled,t)!==!1&&t.isStaleByTime(Zn(e.staleTime,t))}function jx(t,e){return!$i(t.getCurrentResult(),e)}var qs,Bs,qe,rs,Mr,Oi,Xo,Bc,lf,Fx=(lf=class extends Hr{constructor(s,n){super();w(this,Mr);w(this,Xo);w(this,qs,void 0);w(this,Bs,void 0);w(this,qe,void 0);w(this,rs,void 0);v(this,qs,s),this.setOptions(n),this.bindMethods(),R(this,Mr,Oi).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){var r;const n=this.options;this.options=c(this,qs).defaultMutationOptions(s),$i(this.options,n)||c(this,qs).getMutationCache().notify({type:"observerOptionsUpdated",mutation:c(this,qe),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&kn(n.mutationKey)!==kn(this.options.mutationKey)?this.reset():((r=c(this,qe))==null?void 0:r.state.status)==="pending"&&c(this,qe).setOptions(this.options)}onUnsubscribe(){var s;this.hasListeners()||(s=c(this,qe))==null||s.removeObserver(this)}onMutationUpdate(s){R(this,Mr,Oi).call(this),R(this,Xo,Bc).call(this,s)}getCurrentResult(){return c(this,Bs)}reset(){var s;(s=c(this,qe))==null||s.removeObserver(this),v(this,qe,void 0),R(this,Mr,Oi).call(this),R(this,Xo,Bc).call(this)}mutate(s,n){var r;return v(this,rs,n),(r=c(this,qe))==null||r.removeObserver(this),v(this,qe,c(this,qs).getMutationCache().build(c(this,qs),this.options)),c(this,qe).addObserver(this),c(this,qe).execute(s)}},qs=new WeakMap,Bs=new WeakMap,qe=new WeakMap,rs=new WeakMap,Mr=new WeakSet,Oi=function(){var n;const s=((n=c(this,qe))==null?void 0:n.state)??Cp();v(this,Bs,{...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset})},Xo=new WeakSet,Bc=function(s){pe.batch(()=>{var n,r,o,i,a,u,l,f;if(c(this,rs)&&this.hasListeners()){const d=c(this,Bs).variables,h=c(this,Bs).context;(s==null?void 0:s.type)==="success"?((r=(n=c(this,rs)).onSuccess)==null||r.call(n,s.data,d,h),(i=(o=c(this,rs)).onSettled)==null||i.call(o,s.data,null,d,h)):(s==null?void 0:s.type)==="error"&&((u=(a=c(this,rs)).onError)==null||u.call(a,s.error,d,h),(f=(l=c(this,rs)).onSettled)==null||f.call(l,void 0,s.error,d,h))}this.listeners.forEach(d=>{d(c(this,Bs))})})},lf),Tp=p.createContext(void 0),Al=t=>{const e=p.useContext(Tp);if(t)return t;if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},qx=({client:t,children:e})=>(p.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),x.jsx(Tp.Provider,{value:t,children:e})),Rp=p.createContext(!1),Bx=()=>p.useContext(Rp);Rp.Provider;function Ux(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var $x=p.createContext(Ux()),zx=()=>p.useContext($x),Hx=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},Wx=t=>{p.useEffect(()=>{t.clearReset()},[t])},Gx=({result:t,errorResetBoundary:e,throwOnError:s,query:n,suspense:r})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&(r&&t.data===void 0||gp(s,[t.error,n])),Kx=t=>{const e=t.staleTime;t.suspense&&(t.staleTime=typeof e=="function"?(...s)=>Math.max(e(...s),1e3):Math.max(e??1e3,1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},Qx=(t,e)=>t.isLoading&&t.isFetching&&!e,Yx=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Fu=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function Xx(t,e,s){var d,h,m,b,g;const n=Al(s),r=Bx(),o=zx(),i=n.defaultQueryOptions(t);(h=(d=n.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,i),i._optimisticResults=r?"isRestoring":"optimistic",Kx(i),Hx(i,o),Wx(o);const a=!n.getQueryCache().get(i.queryHash),[u]=p.useState(()=>new e(n,i)),l=u.getOptimisticResult(i),f=!r&&t.subscribed!==!1;if(p.useSyncExternalStore(p.useCallback(y=>{const C=f?u.subscribe(pe.batchCalls(y)):De;return u.updateResult(),C},[u,f]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),p.useEffect(()=>{u.setOptions(i)},[i,u]),Yx(i,l))throw Fu(i,u,o);if(Gx({result:l,errorResetBoundary:o,throwOnError:i.throwOnError,query:n.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw l.error;if((b=(m=n.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||b.call(m,i,l),i.experimental_prefetchInRender&&!Ln&&Qx(l,r)){const y=a?Fu(i,u,o):(g=n.getQueryCache().get(i.queryHash))==null?void 0:g.promise;y==null||y.catch(De).finally(()=>{u.updateResult()})}return i.notifyOnChangeProps?l:u.trackResult(l)}function qu(t,e){return Xx(t,Nx,e)}function Jx(t,e){const s=Al(e),[n]=p.useState(()=>new Fx(s,t));p.useEffect(()=>{n.setOptions(t)},[n,t]);const r=p.useSyncExternalStore(p.useCallback(i=>n.subscribe(pe.batchCalls(i)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),o=p.useCallback((i,a)=>{n.mutate(i,a).catch(De)},[n]);if(r.error&&gp(n.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:o,mutateAsync:r.mutate}}const on="documentos",bi="categorias_documentos",kt=[{id:1,codigo:"SGC-P-001",titulo:"Procedimiento de Control de Documentos",descripcion:"Establece los lineamientos para la creacin, revisin, aprobacin y control de documentos del SGC.",categoria_id:1,categoria_nombre:"Procedimientos",proceso_id:1,proceso_nombre:"Gestin de Calidad",version:"1.0",fecha_publicacion:"2025-01-15",autor:"Juan Prez",estado:"Vigente",url_documento:"https://example.com/docs/sgc-p-001.pdf",tags:"documentos,control,calidad",created_at:"2025-01-10",updated_at:"2025-01-15"},{id:2,codigo:"SGC-P-002",titulo:"Procedimiento de Auditoras Internas",descripcion:"Define la metodologa para planificar y ejecutar auditoras internas del sistema de gestin de calidad.",categoria_id:1,categoria_nombre:"Procedimientos",proceso_id:2,proceso_nombre:"Mejora Continua",version:"1.1",fecha_publicacion:"2025-02-20",autor:"Mara Lpez",estado:"Vigente",url_documento:"https://example.com/docs/sgc-p-002.pdf",tags:"auditora,mejora,calidad",created_at:"2025-01-20",updated_at:"2025-02-20"},{id:3,codigo:"SGC-M-001",titulo:"Manual de Calidad",descripcion:"Documento principal que describe el sistema de gestin de calidad de la organizacin.",categoria_id:2,categoria_nombre:"Manuales",proceso_id:1,proceso_nombre:"Gestin de Calidad",version:"2.0",fecha_publicacion:"2025-03-10",autor:"Carlos Rodrguez",estado:"Vigente",url_documento:"https://example.com/docs/sgc-m-001.pdf",tags:"manual,calidad,sistema",created_at:"2024-12-15",updated_at:"2025-03-10"},{id:4,codigo:"SGC-F-001",titulo:"Formato de Registro de No Conformidades",descripcion:"Formato para documentar las no conformidades detectadas en el sistema de gestin.",categoria_id:3,categoria_nombre:"Formatos",proceso_id:2,proceso_nombre:"Mejora Continua",version:"1.0",fecha_publicacion:"2025-01-30",autor:"Ana Martnez",estado:"Vigente",url_documento:"https://example.com/docs/sgc-f-001.pdf",tags:"formato,no conformidad,registro",created_at:"2025-01-25",updated_at:"2025-01-30"},{id:5,codigo:"SGC-I-001",titulo:"Instructivo de Calibracin de Equipos",descripcion:"Detalla el proceso para la calibracin de equipos de medicin utilizados en los procesos productivos.",categoria_id:4,categoria_nombre:"Instructivos",proceso_id:3,proceso_nombre:"Produccin",version:"1.2",fecha_publicacion:"2025-04-05",autor:"Roberto Snchez",estado:"En revisin",url_documento:"https://example.com/docs/sgc-i-001.pdf",tags:"calibracin,equipos,medicin",created_at:"2025-02-10",updated_at:"2025-04-01"}],Qr=[{id:1,nombre:"Procedimientos",descripcion:"Documentos que describen procesos del SGC"},{id:2,nombre:"Manuales",descripcion:"Documentos principales del SGC"},{id:3,nombre:"Formatos",descripcion:"Plantillas para registros del SGC"},{id:4,nombre:"Instructivos",descripcion:"Guas detalladas para actividades especficas"},{id:5,nombre:"Registros",descripcion:"Evidencias documentadas del SGC"}];async function Zx(){const t=Sa(on);if(t)return console.log("Obteniendo documentos desde cach"),t;try{console.log("Obteniendo documentos desde la base de datos");const s=await se(`
      SELECT d.*, c.nombre as categoria_nombre, p.nombre as proceso_nombre
      FROM documentos d
      LEFT JOIN categorias_documentos c ON d.categoria_id = c.id
      LEFT JOIN procesos p ON d.proceso_id = p.id
      ORDER BY d.titulo
    `);return s.error?(console.error("Error al obtener documentos:",s.error),console.log("Usando datos de muestra para documentos"),$s(on,kt,300),kt):!s.data.rows||s.data.rows.length===0?(console.log("No hay documentos en la base de datos, usando datos de muestra"),$s(on,kt,300),kt):($s(on,s.data.rows,300),s.data.rows)}catch(e){return console.error("Error en getAllDocumentos:",e),console.log("Usando datos de muestra para documentos debido a error"),kt}}async function eS(t){try{const s=await se(`
      SELECT d.*, c.nombre as categoria_nombre, p.nombre as proceso_nombre
      FROM documentos d
      LEFT JOIN categorias_documentos c ON d.categoria_id = c.id
      LEFT JOIN procesos p ON d.proceso_id = p.id
      WHERE d.id = ?
    `,[t]);if(s.error){console.error("Error al obtener documento:",s.error);const n=kt.find(r=>r.id===parseInt(t));if(n)return n;throw new Error("Error al obtener documento")}if(!s.data.rows||s.data.rows.length===0){const n=kt.find(r=>r.id===parseInt(t));return n||null}return s.data.rows[0]}catch(e){console.error("Error en getDocumentoById:",e);const s=kt.find(n=>n.id===parseInt(t));if(s)return s;throw e}}async function tS(){const t=Sa(bi);if(t)return console.log("Obteniendo categoras desde cach"),t;try{console.log("Obteniendo categoras desde la base de datos");const s=await se("SELECT * FROM categorias_documentos ORDER BY nombre");return s.error?(console.error("Error al obtener categoras:",s.error),console.log("Usando datos de muestra para categoras"),$s(bi,Qr,600),Qr):!s.data.rows||s.data.rows.length===0?(console.log("No hay categoras en la base de datos, usando datos de muestra"),$s(bi,Qr,600),Qr):($s(bi,s.data.rows,600),s.data.rows)}catch(e){return console.error("Error en getAllCategorias:",e),console.log("Usando datos de muestra para categoras debido a error"),Qr}}async function sS(t){try{const e=`
      INSERT INTO documentos (
        titulo, descripcion, categoria_id, proceso_id, version, 
        fecha_publicacion, estado, url_documento, autor, codigo, tags,
        created_at, updated_at
      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
    `,s=[t.titulo,t.descripcion||"",t.categoria_id,t.proceso_id||null,t.version,t.fecha_publicacion,t.estado,t.url_documento||"",t.autor||"",t.codigo||"",t.tags||"",t.created_at,t.updated_at],n=await se(e,s);if(n.error)throw console.error("Error al crear documento:",n.error),new Error("Error al crear documento");return Dn(on),n.data}catch(e){throw console.error("Error en createDocumento:",e),e}}async function nS(t,e){try{const s=`
      UPDATE documentos
      SET titulo = ?, descripcion = ?, categoria_id = ?, proceso_id = ?,
          version = ?, fecha_publicacion = ?, estado = ?, 
          url_documento = ?, autor = ?, codigo = ?, tags = ?, updated_at = ?
      WHERE id = ?
    `,n=[e.titulo,e.descripcion||"",e.categoria_id,e.proceso_id||null,e.version,e.fecha_publicacion,e.estado,e.url_documento||"",e.autor||"",e.codigo||"",e.tags||"",e.updated_at,t],r=await se(s,n);if(r.error)throw console.error("Error al actualizar documento:",r.error),new Error("Error al actualizar documento");return Dn(on),r.data}catch(s){throw console.error("Error en updateDocumento:",s),s}}async function rS(t){try{const s=await se("DELETE FROM documentos WHERE id = ?",[t]);if(s.error)throw console.error("Error al eliminar documento:",s.error),new Error("Error al eliminar documento");return Dn(on),s.data}catch(e){throw console.error("Error en deleteDocumento:",e),e}}async function oS(t){try{const e=`
      SELECT d.*, c.nombre as categoria_nombre, p.nombre as proceso_nombre
      FROM documentos d
      LEFT JOIN categorias_documentos c ON d.categoria_id = c.id
      LEFT JOIN procesos p ON d.proceso_id = p.id
      WHERE d.titulo LIKE ? OR d.descripcion LIKE ? OR d.codigo LIKE ?
      ORDER BY d.titulo
    `,s=`%${t}%`,n=await se(e,[s,s,s]);return n.error?(console.error("Error al buscar documentos:",n.error),kt.filter(o=>o.titulo.toLowerCase().includes(t.toLowerCase())||o.descripcion&&o.descripcion.toLowerCase().includes(t.toLowerCase())||o.codigo&&o.codigo.toLowerCase().includes(t.toLowerCase()))):n.data.rows}catch(e){return console.error("Error en searchDocumentos:",e),kt.filter(n=>n.titulo.toLowerCase().includes(t.toLowerCase())||n.descripcion&&n.descripcion.toLowerCase().includes(t.toLowerCase())||n.codigo&&n.codigo.toLowerCase().includes(t.toLowerCase()))}}const Bu={getAllDocumentos:Zx,getDocumentoById:eS,getAllCategorias:tS,createDocumento:sS,updateDocumento:nS,deleteDocumento:rS,searchDocumentos:oS},Pp=p.createContext(),MP=()=>p.useContext(Pp),Ap=({children:t})=>{const e=Al(),[s,n]=p.useState(!1),[r,o]=p.useState(null),[i,a]=p.useState(!1),[u,l]=p.useState(!1);qu({queryKey:["dbConnection"],queryFn:async()=>{if(u)return{connected:i};try{l(!0),console.log("Verificando conexin a la base de datos Turso...");const b=await se("SELECT sqlite_version() as version");if(b.data&&b.data.rows&&b.data.rows.length>0){console.log("Conexin exitosa a Turso. Versin SQLite:",b.data.rows[0].version),a(!0);try{const g=await se(`
              SELECT name FROM sqlite_master 
              WHERE type='table' 
              ORDER BY name
            `);g.data&&g.data.rows&&g.data.rows.length>0?console.log("Tablas disponibles:",g.data.rows.map(y=>y.name).join(", ")):console.warn("No se encontraron tablas en la base de datos")}catch(g){console.error("Error al consultar las tablas:",g)}return{connected:!0,version:b.data.rows[0].version}}else{console.error("Error al conectar con la base de datos:",b.error);const g="Error al conectar con la base de datos (respuesta incompleta). Verifica tu conexin a internet y las credenciales.";return o(g),a(!1),{connected:!1,error:g}}}catch(b){console.error("Error al conectar con la base de datos:",b);const g=`Error al conectar con la base de datos: ${b.message||"Error desconocido"}. Verifica tu conexin a internet y las credenciales.`;return o(g),a(!1),{connected:!1,error:b}}},onSuccess:b=>{var g;if(a(b.connected),b.connected)o(null);else{const y=((g=b.error)==null?void 0:g.message)||"Error desconocido al conectar con la base de datos";o(`Error al conectar con la base de datos: ${y}. Verifica tu conexin a internet y las credenciales.`)}},onError:b=>{console.error("Error en la consulta de conexin:",b),a(!1),o(`Error en la consulta de conexin: ${b.message||"Error desconocido"}. Verifica tu conexin a internet y las credenciales.`)},refetchOnWindowFocus:!1,refetchOnMount:!1,staleTime:1/0,retry:2,retryDelay:1e3});const f=p.useCallback(async(b,...g)=>{n(!0),o(null);try{console.log(`Ejecutando peticin: ${b.name||"annima"} con args:`,g);const y=b.name||"anonymous";if(y.startsWith("get")||y.startsWith("find")||y.startsWith("list")){const T=`${y}_${JSON.stringify(g)}`;return await Cl(T,async()=>{const S=await b(...g);return console.log(`Resultado de peticin ${y}:`,S),S})}else{const T=await b(...g);console.log(`Resultado de peticin ${y}:`,T);let S="";return y.includes("Personal")?S="Personal":y.includes("Auditoria")?S="Auditoria":y.includes("Documento")?S="Documento":y.includes("Norma")&&(S="Norma"),S&&(e.invalidateQueries({queryKey:[S]}),Object.keys(Pc).forEach(E=>{E.includes(S.toLowerCase())&&Dn(E)})),T}}catch(y){throw console.error("Error en la peticin:",y),o(y.message||"Error en la peticin a la base de datos"),y}finally{n(!1)}},[e]),d=(b,g)=>{const y={};return Object.keys(b).forEach(C=>{const T=b[C];typeof T=="function"&&(C.startsWith("get")||C.startsWith("find")||C.startsWith("list")?y[C]=(...E)=>{const P=[g,C,...E];return qu({queryKey:P,queryFn:()=>T(...E),staleTime:5*60*1e3,cacheTime:10*60*1e3,onError:O=>{console.error(`Error en ${g}.${C}:`,O),o(`Error al cargar datos: ${O.message}`)}})}:y[C]=(...E)=>Jx({mutationFn:()=>T(...E),onSuccess:()=>{e.invalidateQueries({queryKey:[g]}),Object.keys(Pc).forEach(P=>{P.includes(g.toLowerCase())&&Dn(P)})},onError:P=>{console.error(`Error en ${g}.${C}:`,P),o(`Error al guardar datos: ${P.message}`)}}),y[`${C}Original`]=T)}),y},h={personalService:d(Bi,"Personal"),auditoriasService:d(Ui,"Auditorias"),documentosService:d(Bu,"Documentos")},m={isLoading:s,error:r,dbConnected:i,services:vx,handleRequest:f,personalService:Bi,auditoriasService:Ui,documentosService:Bu,personalQueryService:h.personalService,auditoriasQueryService:h.auditoriasService,documentosQueryService:h.documentosService,clearError:()=>o(null),clearCache:()=>{lp(),e.clear()}};return x.jsx(Pp.Provider,{value:m,children:t})};function Uu({children:t,allowedRoles:e}){const{currentUser:s,isAuthenticated:n}=fp(),r=Jy();return n?e&&!e.includes(s.role)?x.jsx(Za,{to:"/unauthorized",replace:!0}):t:x.jsx(Za,{to:"/login",state:{from:r},replace:!0})}const iS=p.lazy(()=>Jo(()=>import("./login-6ab56194.js"),["assets/login-6ab56194.js","assets/vendor-b9987279.js","assets/label-fb300fbb.js","assets/alert-circle-7a0a2dee.js"])),aS=p.lazy(()=>Jo(()=>import("./MenuPrincipal-a250b4b2.js"),["assets/MenuPrincipal-a250b4b2.js","assets/vendor-b9987279.js","assets/CalendarioEventos-93752859.js","assets/label-fb300fbb.js","assets/alert-circle-7a0a2dee.js","assets/check-circle-fce04168.js","assets/alert-triangle-9b352924.js"])),cS=p.lazy(()=>Jo(()=>import("./Unauthorized-814084ec.js"),["assets/Unauthorized-814084ec.js","assets/vendor-b9987279.js","assets/alert-triangle-9b352924.js"]));p.lazy(()=>Jo(()=>import("./CalendarioEventos-93752859.js").then(t=>t.Z),["assets/CalendarioEventos-93752859.js","assets/vendor-b9987279.js","assets/label-fb300fbb.js"]));const lS=p.lazy(()=>Jo(()=>import("./IsoAssistantPage-af4e6150.js"),["assets/IsoAssistantPage-af4e6150.js","assets/vendor-b9987279.js","assets/alert-circle-7a0a2dee.js","assets/check-circle-fce04168.js"])),uS=()=>x.jsx("div",{className:"flex items-center justify-center h-screen",children:x.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-green-600"})});function dS(){const{isAuthenticated:t,login:e,logout:s}=fp(),n=r=>{e(r)};return x.jsx(p.Suspense,{fallback:x.jsx(uS,{}),children:x.jsxs(Zy,{children:[x.jsx(di,{path:"/login",element:t?x.jsx(Za,{to:"/",replace:!0}):x.jsx(iS,{onLogin:n})}),x.jsx(di,{path:"/unauthorized",element:x.jsx(cS,{})}),x.jsx(di,{path:"/iso-assistant",element:x.jsx(Uu,{children:x.jsx(lS,{})})}),x.jsx(di,{path:"/*",element:x.jsx(Uu,{children:x.jsx(aS,{onLogout:s})})})]})})}const _p=p.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Ca=p.createContext({}),_l=p.createContext(null),Ea=typeof document<"u",fS=Ea?p.useLayoutEffect:p.useEffect,Ip=p.createContext({strict:!1}),Il=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),hS="framerAppearId",Op="data-"+Il(hS);function pS(t,e,s,n){const{visualElement:r}=p.useContext(Ca),o=p.useContext(Ip),i=p.useContext(_l),a=p.useContext(_p).reducedMotion,u=p.useRef();n=n||o.renderer,!u.current&&n&&(u.current=n(t,{visualState:e,parent:r,props:s,presenceContext:i,blockInitialAnimation:i?i.initial===!1:!1,reducedMotionConfig:a}));const l=u.current;p.useInsertionEffect(()=>{l&&l.update(s,i)});const f=p.useRef(!!(s[Op]&&!window.HandoffComplete));return fS(()=>{l&&(l.render(),f.current&&l.animationState&&l.animationState.animateChanges())}),p.useEffect(()=>{l&&(l.updateFeatures(),!f.current&&l.animationState&&l.animationState.animateChanges(),f.current&&(f.current=!1,window.HandoffComplete=!0))}),l}function Kn(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function mS(t,e,s){return p.useCallback(n=>{n&&t.mount&&t.mount(n),e&&(n?e.mount(n):e.unmount()),s&&(typeof s=="function"?s(n):Kn(s)&&(s.current=n))},[e])}function go(t){return typeof t=="string"||Array.isArray(t)}function Ta(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Ol=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ml=["initial",...Ol];function Ra(t){return Ta(t.animate)||Ml.some(e=>go(t[e]))}function Mp(t){return!!(Ra(t)||t.variants)}function yS(t,e){if(Ra(t)){const{initial:s,animate:n}=t;return{initial:s===!1||go(s)?s:void 0,animate:go(n)?n:void 0}}return t.inherit!==!1?e:{}}function gS(t){const{initial:e,animate:s}=yS(t,p.useContext(Ca));return p.useMemo(()=>({initial:e,animate:s}),[$u(e),$u(s)])}function $u(t){return Array.isArray(t)?t.join(" "):t}const zu={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},bo={};for(const t in zu)bo[t]={isEnabled:e=>zu[t].some(s=>!!e[s])};function bS(t){for(const e in t)bo[e]={...bo[e],...t[e]}}const Dp=p.createContext({}),Lp=p.createContext({}),vS=Symbol.for("motionComponentSymbol");function wS({preloadedFeatures:t,createVisualElement:e,useRender:s,useVisualState:n,Component:r}){t&&bS(t);function o(a,u){let l;const f={...p.useContext(_p),...a,layoutId:xS(a)},{isStatic:d}=f,h=gS(a),m=n(a,d);if(!d&&Ea){h.visualElement=pS(r,m,f,e);const b=p.useContext(Lp),g=p.useContext(Ip).strict;h.visualElement&&(l=h.visualElement.loadFeatures(f,g,t,b))}return p.createElement(Ca.Provider,{value:h},l&&h.visualElement?p.createElement(l,{visualElement:h.visualElement,...f}):null,s(r,a,mS(m,h.visualElement,u),m,d,h.visualElement))}const i=p.forwardRef(o);return i[vS]=r,i}function xS({layoutId:t}){const e=p.useContext(Dp).id;return e&&t!==void 0?e+"-"+t:t}function SS(t){function e(n,r={}){return wS(t(n,r))}if(typeof Proxy>"u")return e;const s=new Map;return new Proxy(e,{get:(n,r)=>(s.has(r)||s.set(r,e(r)),s.get(r))})}const CS=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Dl(t){return typeof t!="string"||t.includes("-")?!1:!!(CS.indexOf(t)>-1||/[A-Z]/.test(t))}const Hi={};function ES(t){Object.assign(Hi,t)}const ni=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Fn=new Set(ni);function kp(t,{layout:e,layoutId:s}){return Fn.has(t)||t.startsWith("origin")||(e||s!==void 0)&&(!!Hi[t]||t==="opacity")}const $e=t=>!!(t&&t.getVelocity),TS={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},RS=ni.length;function PS(t,{enableHardwareAcceleration:e=!0,allowTransformNone:s=!0},n,r){let o="";for(let i=0;i<RS;i++){const a=ni[i];if(t[a]!==void 0){const u=TS[a]||a;o+=`${u}(${t[a]}) `}}return e&&!t.z&&(o+="translateZ(0)"),o=o.trim(),r?o=r(t,n?"":o):s&&n&&(o="none"),o}const Np=t=>e=>typeof e=="string"&&e.startsWith(t),Vp=Np("--"),Uc=Np("var(--"),AS=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,_S=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ks=(t,e,s)=>Math.min(Math.max(s,t),e),qn={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},lo={...qn,transform:t=>Ks(0,1,t)},vi={...qn,default:1},uo=t=>Math.round(t*1e5)/1e5,Pa=/(-)?([\d]*\.?[\d])+/g,jp=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,IS=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function ri(t){return typeof t=="string"}const oi=t=>({test:e=>ri(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),vs=oi("deg"),Nt=oi("%"),V=oi("px"),OS=oi("vh"),MS=oi("vw"),Hu={...Nt,parse:t=>Nt.parse(t)/100,transform:t=>Nt.transform(t*100)},Wu={...qn,transform:Math.round},Fp={borderWidth:V,borderTopWidth:V,borderRightWidth:V,borderBottomWidth:V,borderLeftWidth:V,borderRadius:V,radius:V,borderTopLeftRadius:V,borderTopRightRadius:V,borderBottomRightRadius:V,borderBottomLeftRadius:V,width:V,maxWidth:V,height:V,maxHeight:V,size:V,top:V,right:V,bottom:V,left:V,padding:V,paddingTop:V,paddingRight:V,paddingBottom:V,paddingLeft:V,margin:V,marginTop:V,marginRight:V,marginBottom:V,marginLeft:V,rotate:vs,rotateX:vs,rotateY:vs,rotateZ:vs,scale:vi,scaleX:vi,scaleY:vi,scaleZ:vi,skew:vs,skewX:vs,skewY:vs,distance:V,translateX:V,translateY:V,translateZ:V,x:V,y:V,z:V,perspective:V,transformPerspective:V,opacity:lo,originX:Hu,originY:Hu,originZ:V,zIndex:Wu,fillOpacity:lo,strokeOpacity:lo,numOctaves:Wu};function Ll(t,e,s,n){const{style:r,vars:o,transform:i,transformOrigin:a}=t;let u=!1,l=!1,f=!0;for(const d in e){const h=e[d];if(Vp(d)){o[d]=h;continue}const m=Fp[d],b=_S(h,m);if(Fn.has(d)){if(u=!0,i[d]=b,!f)continue;h!==(m.default||0)&&(f=!1)}else d.startsWith("origin")?(l=!0,a[d]=b):r[d]=b}if(e.transform||(u||n?r.transform=PS(t.transform,s,f,n):r.transform&&(r.transform="none")),l){const{originX:d="50%",originY:h="50%",originZ:m=0}=a;r.transformOrigin=`${d} ${h} ${m}`}}const kl=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function qp(t,e,s){for(const n in e)!$e(e[n])&&!kp(n,s)&&(t[n]=e[n])}function DS({transformTemplate:t},e,s){return p.useMemo(()=>{const n=kl();return Ll(n,e,{enableHardwareAcceleration:!s},t),Object.assign({},n.vars,n.style)},[e])}function LS(t,e,s){const n=t.style||{},r={};return qp(r,n,t),Object.assign(r,DS(t,e,s)),t.transformValues?t.transformValues(r):r}function kS(t,e,s){const n={},r=LS(t,e,s);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const NS=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Wi(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||NS.has(t)}let Bp=t=>!Wi(t);function VS(t){t&&(Bp=e=>e.startsWith("on")?!Wi(e):t(e))}try{VS(require("@emotion/is-prop-valid").default)}catch{}function jS(t,e,s){const n={};for(const r in t)r==="values"&&typeof t.values=="object"||(Bp(r)||s===!0&&Wi(r)||!e&&!Wi(r)||t.draggable&&r.startsWith("onDrag"))&&(n[r]=t[r]);return n}function Gu(t,e,s){return typeof t=="string"?t:V.transform(e+s*t)}function FS(t,e,s){const n=Gu(e,t.x,t.width),r=Gu(s,t.y,t.height);return`${n} ${r}`}const qS={offset:"stroke-dashoffset",array:"stroke-dasharray"},BS={offset:"strokeDashoffset",array:"strokeDasharray"};function US(t,e,s=1,n=0,r=!0){t.pathLength=1;const o=r?qS:BS;t[o.offset]=V.transform(-n);const i=V.transform(e),a=V.transform(s);t[o.array]=`${i} ${a}`}function Nl(t,{attrX:e,attrY:s,attrScale:n,originX:r,originY:o,pathLength:i,pathSpacing:a=1,pathOffset:u=0,...l},f,d,h){if(Ll(t,l,f,h),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:b,dimensions:g}=t;m.transform&&(g&&(b.transform=m.transform),delete m.transform),g&&(r!==void 0||o!==void 0||b.transform)&&(b.transformOrigin=FS(g,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(m.x=e),s!==void 0&&(m.y=s),n!==void 0&&(m.scale=n),i!==void 0&&US(m,i,a,u,!1)}const Up=()=>({...kl(),attrs:{}}),Vl=t=>typeof t=="string"&&t.toLowerCase()==="svg";function $S(t,e,s,n){const r=p.useMemo(()=>{const o=Up();return Nl(o,e,{enableHardwareAcceleration:!1},Vl(n),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};qp(o,t.style,t),r.style={...o,...r.style}}return r}function zS(t=!1){return(s,n,r,{latestValues:o},i)=>{const u=(Dl(s)?$S:kS)(n,o,i,s),f={...jS(n,typeof s=="string",t),...u,ref:r},{children:d}=n,h=p.useMemo(()=>$e(d)?d.get():d,[d]);return p.createElement(s,{...f,children:h})}}function $p(t,{style:e,vars:s},n,r){Object.assign(t.style,e,r&&r.getProjectionStyles(n));for(const o in s)t.style.setProperty(o,s[o])}const zp=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Hp(t,e,s,n){$p(t,e,void 0,n);for(const r in e.attrs)t.setAttribute(zp.has(r)?r:Il(r),e.attrs[r])}function jl(t,e){const{style:s}=t,n={};for(const r in s)($e(s[r])||e.style&&$e(e.style[r])||kp(r,t))&&(n[r]=s[r]);return n}function Wp(t,e){const s=jl(t,e);for(const n in t)if($e(t[n])||$e(e[n])){const r=ni.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;s[r]=t[n]}return s}function Fl(t,e,s,n={},r={}){return typeof e=="function"&&(e=e(s!==void 0?s:t.custom,n,r)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(s!==void 0?s:t.custom,n,r)),e}function HS(t){const e=p.useRef(null);return e.current===null&&(e.current=t()),e.current}const Gi=t=>Array.isArray(t),WS=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),GS=t=>Gi(t)?t[t.length-1]||0:t;function Mi(t){const e=$e(t)?t.get():t;return WS(e)?e.toValue():e}function KS({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:s},n,r,o){const i={latestValues:QS(n,r,o,t),renderState:e()};return s&&(i.mount=a=>s(n,a,i)),i}const Gp=t=>(e,s)=>{const n=p.useContext(Ca),r=p.useContext(_l),o=()=>KS(t,e,n,r);return s?o():HS(o)};function QS(t,e,s,n){const r={},o=n(t,{});for(const h in o)r[h]=Mi(o[h]);let{initial:i,animate:a}=t;const u=Ra(t),l=Mp(t);e&&l&&!u&&t.inherit!==!1&&(i===void 0&&(i=e.initial),a===void 0&&(a=e.animate));let f=s?s.initial===!1:!1;f=f||i===!1;const d=f?a:i;return d&&typeof d!="boolean"&&!Ta(d)&&(Array.isArray(d)?d:[d]).forEach(m=>{const b=Fl(t,m);if(!b)return;const{transitionEnd:g,transition:y,...C}=b;for(const T in C){let S=C[T];if(Array.isArray(S)){const E=f?S.length-1:0;S=S[E]}S!==null&&(r[T]=S)}for(const T in g)r[T]=g[T]}),r}const ae=t=>t;class Ku{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const s=this.order.indexOf(e);s!==-1&&(this.order.splice(s,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function YS(t){let e=new Ku,s=new Ku,n=0,r=!1,o=!1;const i=new WeakSet,a={schedule:(u,l=!1,f=!1)=>{const d=f&&r,h=d?e:s;return l&&i.add(u),h.add(u)&&d&&r&&(n=e.order.length),u},cancel:u=>{s.remove(u),i.delete(u)},process:u=>{if(r){o=!0;return}if(r=!0,[e,s]=[s,e],s.clear(),n=e.order.length,n)for(let l=0;l<n;l++){const f=e.order[l];f(u),i.has(f)&&(a.schedule(f),t())}r=!1,o&&(o=!1,a.process(u))}};return a}const wi=["prepare","read","update","preRender","render","postRender"],XS=40;function JS(t,e){let s=!1,n=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=wi.reduce((d,h)=>(d[h]=YS(()=>s=!0),d),{}),i=d=>o[d].process(r),a=()=>{const d=performance.now();s=!1,r.delta=n?1e3/60:Math.max(Math.min(d-r.timestamp,XS),1),r.timestamp=d,r.isProcessing=!0,wi.forEach(i),r.isProcessing=!1,s&&e&&(n=!1,t(a))},u=()=>{s=!0,n=!0,r.isProcessing||t(a)};return{schedule:wi.reduce((d,h)=>{const m=o[h];return d[h]=(b,g=!1,y=!1)=>(s||u(),m.schedule(b,g,y)),d},{}),cancel:d=>wi.forEach(h=>o[h].cancel(d)),state:r,steps:o}}const{schedule:te,cancel:ds,state:Te,steps:Fa}=JS(typeof requestAnimationFrame<"u"?requestAnimationFrame:ae,!0),ZS={useVisualState:Gp({scrapeMotionValuesFromProps:Wp,createRenderState:Up,onMount:(t,e,{renderState:s,latestValues:n})=>{te.read(()=>{try{s.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{s.dimensions={x:0,y:0,width:0,height:0}}}),te.render(()=>{Nl(s,n,{enableHardwareAcceleration:!1},Vl(e.tagName),t.transformTemplate),Hp(e,s)})}})},eC={useVisualState:Gp({scrapeMotionValuesFromProps:jl,createRenderState:kl})};function tC(t,{forwardMotionProps:e=!1},s,n){return{...Dl(t)?ZS:eC,preloadedFeatures:s,useRender:zS(e),createVisualElement:n,Component:t}}function os(t,e,s,n={passive:!0}){return t.addEventListener(e,s,n),()=>t.removeEventListener(e,s)}const Kp=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Aa(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const sC=t=>e=>Kp(e)&&t(e,Aa(e));function is(t,e,s,n){return os(t,e,sC(s),n)}const nC=(t,e)=>s=>e(t(s)),zs=(...t)=>t.reduce(nC);function Qp(t){let e=null;return()=>{const s=()=>{e=null};return e===null?(e=t,s):!1}}const Qu=Qp("dragHorizontal"),Yu=Qp("dragVertical");function Yp(t){let e=!1;if(t==="y")e=Yu();else if(t==="x")e=Qu();else{const s=Qu(),n=Yu();s&&n?e=()=>{s(),n()}:(s&&s(),n&&n())}return e}function Xp(){const t=Yp(!0);return t?(t(),!1):!0}class Ys{constructor(e){this.isMounted=!1,this.node=e}update(){}}function Xu(t,e){const s="pointer"+(e?"enter":"leave"),n="onHover"+(e?"Start":"End"),r=(o,i)=>{if(o.pointerType==="touch"||Xp())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[n]&&te.update(()=>a[n](o,i))};return is(t.current,s,r,{passive:!t.getProps()[n]})}class rC extends Ys{mount(){this.unmount=zs(Xu(this.node,!0),Xu(this.node,!1))}unmount(){}}class oC extends Ys{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=zs(os(this.node.current,"focus",()=>this.onFocus()),os(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Jp=(t,e)=>e?t===e?!0:Jp(t,e.parentElement):!1;function qa(t,e){if(!e)return;const s=new PointerEvent("pointer"+t);e(s,Aa(s))}class iC extends Ys{constructor(){super(...arguments),this.removeStartListeners=ae,this.removeEndListeners=ae,this.removeAccessibleListeners=ae,this.startPointerPress=(e,s)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),o=is(window,"pointerup",(a,u)=>{if(!this.checkPressEnd())return;const{onTap:l,onTapCancel:f,globalTapTarget:d}=this.node.getProps();te.update(()=>{!d&&!Jp(this.node.current,a.target)?f&&f(a,u):l&&l(a,u)})},{passive:!(n.onTap||n.onPointerUp)}),i=is(window,"pointercancel",(a,u)=>this.cancelPress(a,u),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=zs(o,i),this.startPress(e,s)},this.startAccessiblePress=()=>{const e=o=>{if(o.key!=="Enter"||this.isPressing)return;const i=a=>{a.key!=="Enter"||!this.checkPressEnd()||qa("up",(u,l)=>{const{onTap:f}=this.node.getProps();f&&te.update(()=>f(u,l))})};this.removeEndListeners(),this.removeEndListeners=os(this.node.current,"keyup",i),qa("down",(a,u)=>{this.startPress(a,u)})},s=os(this.node.current,"keydown",e),n=()=>{this.isPressing&&qa("cancel",(o,i)=>this.cancelPress(o,i))},r=os(this.node.current,"blur",n);this.removeAccessibleListeners=zs(s,r)}}startPress(e,s){this.isPressing=!0;const{onTapStart:n,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&te.update(()=>n(e,s))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Xp()}cancelPress(e,s){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&te.update(()=>n(e,s))}mount(){const e=this.node.getProps(),s=is(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=os(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=zs(s,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const $c=new WeakMap,Ba=new WeakMap,aC=t=>{const e=$c.get(t.target);e&&e(t)},cC=t=>{t.forEach(aC)};function lC({root:t,...e}){const s=t||document;Ba.has(s)||Ba.set(s,{});const n=Ba.get(s),r=JSON.stringify(e);return n[r]||(n[r]=new IntersectionObserver(cC,{root:t,...e})),n[r]}function uC(t,e,s){const n=lC(e);return $c.set(t,s),n.observe(t),()=>{$c.delete(t),n.unobserve(t)}}const dC={some:0,all:1};class fC extends Ys{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:s,margin:n,amount:r="some",once:o}=e,i={root:s?s.current:void 0,rootMargin:n,threshold:typeof r=="number"?r:dC[r]},a=u=>{const{isIntersecting:l}=u;if(this.isInView===l||(this.isInView=l,o&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:f,onViewportLeave:d}=this.node.getProps(),h=l?f:d;h&&h(u)};return uC(this.node.current,i,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:s}=this.node;["amount","margin","root"].some(hC(e,s))&&this.startObserver()}unmount(){}}function hC({viewport:t={}},{viewport:e={}}={}){return s=>t[s]!==e[s]}const pC={inView:{Feature:fC},tap:{Feature:iC},focus:{Feature:oC},hover:{Feature:rC}};function Zp(t,e){if(!Array.isArray(e))return!1;const s=e.length;if(s!==t.length)return!1;for(let n=0;n<s;n++)if(e[n]!==t[n])return!1;return!0}function mC(t){const e={};return t.values.forEach((s,n)=>e[n]=s.get()),e}function yC(t){const e={};return t.values.forEach((s,n)=>e[n]=s.getVelocity()),e}function _a(t,e,s){const n=t.getProps();return Fl(n,e,s!==void 0?s:n.custom,mC(t),yC(t))}let gC=ae,ql=ae;const Hs=t=>t*1e3,as=t=>t/1e3,bC={current:!1},em=t=>Array.isArray(t)&&typeof t[0]=="number";function tm(t){return!!(!t||typeof t=="string"&&sm[t]||em(t)||Array.isArray(t)&&t.every(tm))}const io=([t,e,s,n])=>`cubic-bezier(${t}, ${e}, ${s}, ${n})`,sm={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:io([0,.65,.55,1]),circOut:io([.55,0,1,.45]),backIn:io([.31,.01,.66,-.59]),backOut:io([.33,1.53,.69,.99])};function nm(t){if(t)return em(t)?io(t):Array.isArray(t)?t.map(nm):sm[t]}function vC(t,e,s,{delay:n=0,duration:r,repeat:o=0,repeatType:i="loop",ease:a,times:u}={}){const l={[e]:s};u&&(l.offset=u);const f=nm(a);return Array.isArray(f)&&(l.easing=f),t.animate(l,{delay:n,duration:r,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:o+1,direction:i==="reverse"?"alternate":"normal"})}function wC(t,{repeat:e,repeatType:s="loop"}){const n=e&&s!=="loop"&&e%2===1?0:t.length-1;return t[n]}const rm=(t,e,s)=>(((1-3*s+3*e)*t+(3*s-6*e))*t+3*e)*t,xC=1e-7,SC=12;function CC(t,e,s,n,r){let o,i,a=0;do i=e+(s-e)/2,o=rm(i,n,r)-t,o>0?s=i:e=i;while(Math.abs(o)>xC&&++a<SC);return i}function ii(t,e,s,n){if(t===e&&s===n)return ae;const r=o=>CC(o,0,1,t,s);return o=>o===0||o===1?o:rm(r(o),e,n)}const EC=ii(.42,0,1,1),TC=ii(0,0,.58,1),om=ii(.42,0,.58,1),RC=t=>Array.isArray(t)&&typeof t[0]!="number",im=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,am=t=>e=>1-t(1-e),Bl=t=>1-Math.sin(Math.acos(t)),cm=am(Bl),PC=im(Bl),lm=ii(.33,1.53,.69,.99),Ul=am(lm),AC=im(Ul),_C=t=>(t*=2)<1?.5*Ul(t):.5*(2-Math.pow(2,-10*(t-1))),IC={linear:ae,easeIn:EC,easeInOut:om,easeOut:TC,circIn:Bl,circInOut:PC,circOut:cm,backIn:Ul,backInOut:AC,backOut:lm,anticipate:_C},Ju=t=>{if(Array.isArray(t)){ql(t.length===4);const[e,s,n,r]=t;return ii(e,s,n,r)}else if(typeof t=="string")return IC[t];return t},$l=(t,e)=>s=>!!(ri(s)&&IS.test(s)&&s.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(s,e)),um=(t,e,s)=>n=>{if(!ri(n))return n;const[r,o,i,a]=n.match(Pa);return{[t]:parseFloat(r),[e]:parseFloat(o),[s]:parseFloat(i),alpha:a!==void 0?parseFloat(a):1}},OC=t=>Ks(0,255,t),Ua={...qn,transform:t=>Math.round(OC(t))},an={test:$l("rgb","red"),parse:um("red","green","blue"),transform:({red:t,green:e,blue:s,alpha:n=1})=>"rgba("+Ua.transform(t)+", "+Ua.transform(e)+", "+Ua.transform(s)+", "+uo(lo.transform(n))+")"};function MC(t){let e="",s="",n="",r="";return t.length>5?(e=t.substring(1,3),s=t.substring(3,5),n=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),s=t.substring(2,3),n=t.substring(3,4),r=t.substring(4,5),e+=e,s+=s,n+=n,r+=r),{red:parseInt(e,16),green:parseInt(s,16),blue:parseInt(n,16),alpha:r?parseInt(r,16)/255:1}}const zc={test:$l("#"),parse:MC,transform:an.transform},Qn={test:$l("hsl","hue"),parse:um("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:s,alpha:n=1})=>"hsla("+Math.round(t)+", "+Nt.transform(uo(e))+", "+Nt.transform(uo(s))+", "+uo(lo.transform(n))+")"},Me={test:t=>an.test(t)||zc.test(t)||Qn.test(t),parse:t=>an.test(t)?an.parse(t):Qn.test(t)?Qn.parse(t):zc.parse(t),transform:t=>ri(t)?t:t.hasOwnProperty("red")?an.transform(t):Qn.transform(t)},ne=(t,e,s)=>-s*t+s*e+t;function $a(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(e-t)*6*s:s<1/2?e:s<2/3?t+(e-t)*(2/3-s)*6:t}function DC({hue:t,saturation:e,lightness:s,alpha:n}){t/=360,e/=100,s/=100;let r=0,o=0,i=0;if(!e)r=o=i=s;else{const a=s<.5?s*(1+e):s+e-s*e,u=2*s-a;r=$a(u,a,t+1/3),o=$a(u,a,t),i=$a(u,a,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(i*255),alpha:n}}const za=(t,e,s)=>{const n=t*t;return Math.sqrt(Math.max(0,s*(e*e-n)+n))},LC=[zc,an,Qn],kC=t=>LC.find(e=>e.test(t));function Zu(t){const e=kC(t);let s=e.parse(t);return e===Qn&&(s=DC(s)),s}const dm=(t,e)=>{const s=Zu(t),n=Zu(e),r={...s};return o=>(r.red=za(s.red,n.red,o),r.green=za(s.green,n.green,o),r.blue=za(s.blue,n.blue,o),r.alpha=ne(s.alpha,n.alpha,o),an.transform(r))};function NC(t){var e,s;return isNaN(t)&&ri(t)&&(((e=t.match(Pa))===null||e===void 0?void 0:e.length)||0)+(((s=t.match(jp))===null||s===void 0?void 0:s.length)||0)>0}const fm={regex:AS,countKey:"Vars",token:"${v}",parse:ae},hm={regex:jp,countKey:"Colors",token:"${c}",parse:Me.parse},pm={regex:Pa,countKey:"Numbers",token:"${n}",parse:qn.parse};function Ha(t,{regex:e,countKey:s,token:n,parse:r}){const o=t.tokenised.match(e);o&&(t["num"+s]=o.length,t.tokenised=t.tokenised.replace(e,n),t.values.push(...o.map(r)))}function Ki(t){const e=t.toString(),s={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return s.value.includes("var(--")&&Ha(s,fm),Ha(s,hm),Ha(s,pm),s}function mm(t){return Ki(t).values}function ym(t){const{values:e,numColors:s,numVars:n,tokenised:r}=Ki(t),o=e.length;return i=>{let a=r;for(let u=0;u<o;u++)u<n?a=a.replace(fm.token,i[u]):u<n+s?a=a.replace(hm.token,Me.transform(i[u])):a=a.replace(pm.token,uo(i[u]));return a}}const VC=t=>typeof t=="number"?0:t;function jC(t){const e=mm(t);return ym(t)(e.map(VC))}const Qs={test:NC,parse:mm,createTransformer:ym,getAnimatableNone:jC},gm=(t,e)=>s=>`${s>0?e:t}`;function bm(t,e){return typeof t=="number"?s=>ne(t,e,s):Me.test(t)?dm(t,e):t.startsWith("var(")?gm(t,e):wm(t,e)}const vm=(t,e)=>{const s=[...t],n=s.length,r=t.map((o,i)=>bm(o,e[i]));return o=>{for(let i=0;i<n;i++)s[i]=r[i](o);return s}},FC=(t,e)=>{const s={...t,...e},n={};for(const r in s)t[r]!==void 0&&e[r]!==void 0&&(n[r]=bm(t[r],e[r]));return r=>{for(const o in n)s[o]=n[o](r);return s}},wm=(t,e)=>{const s=Qs.createTransformer(e),n=Ki(t),r=Ki(e);return n.numVars===r.numVars&&n.numColors===r.numColors&&n.numNumbers>=r.numNumbers?zs(vm(n.values,r.values),s):gm(t,e)},vo=(t,e,s)=>{const n=e-t;return n===0?1:(s-t)/n},ed=(t,e)=>s=>ne(t,e,s);function qC(t){return typeof t=="number"?ed:typeof t=="string"?Me.test(t)?dm:wm:Array.isArray(t)?vm:typeof t=="object"?FC:ed}function BC(t,e,s){const n=[],r=s||qC(t[0]),o=t.length-1;for(let i=0;i<o;i++){let a=r(t[i],t[i+1]);if(e){const u=Array.isArray(e)?e[i]||ae:e;a=zs(u,a)}n.push(a)}return n}function xm(t,e,{clamp:s=!0,ease:n,mixer:r}={}){const o=t.length;if(ql(o===e.length),o===1)return()=>e[0];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const i=BC(e,n,r),a=i.length,u=l=>{let f=0;if(a>1)for(;f<t.length-2&&!(l<t[f+1]);f++);const d=vo(t[f],t[f+1],l);return i[f](d)};return s?l=>u(Ks(t[0],t[o-1],l)):u}function UC(t,e){const s=t[t.length-1];for(let n=1;n<=e;n++){const r=vo(0,e,n);t.push(ne(s,1,r))}}function $C(t){const e=[0];return UC(e,t.length-1),e}function zC(t,e){return t.map(s=>s*e)}function HC(t,e){return t.map(()=>e||om).splice(0,t.length-1)}function Qi({duration:t=300,keyframes:e,times:s,ease:n="easeInOut"}){const r=RC(n)?n.map(Ju):Ju(n),o={done:!1,value:e[0]},i=zC(s&&s.length===e.length?s:$C(e),t),a=xm(i,e,{ease:Array.isArray(r)?r:HC(e,r)});return{calculatedDuration:t,next:u=>(o.value=a(u),o.done=u>=t,o)}}function Sm(t,e){return e?t*(1e3/e):0}const WC=5;function Cm(t,e,s){const n=Math.max(e-WC,0);return Sm(s-t(n),e-n)}const Wa=.001,GC=.01,td=10,KC=.05,QC=1;function YC({duration:t=800,bounce:e=.25,velocity:s=0,mass:n=1}){let r,o;gC(t<=Hs(td));let i=1-e;i=Ks(KC,QC,i),t=Ks(GC,td,as(t)),i<1?(r=l=>{const f=l*i,d=f*t,h=f-s,m=Hc(l,i),b=Math.exp(-d);return Wa-h/m*b},o=l=>{const d=l*i*t,h=d*s+s,m=Math.pow(i,2)*Math.pow(l,2)*t,b=Math.exp(-d),g=Hc(Math.pow(l,2),i);return(-r(l)+Wa>0?-1:1)*((h-m)*b)/g}):(r=l=>{const f=Math.exp(-l*t),d=(l-s)*t+1;return-Wa+f*d},o=l=>{const f=Math.exp(-l*t),d=(s-l)*(t*t);return f*d});const a=5/t,u=JC(r,o,a);if(t=Hs(t),isNaN(u))return{stiffness:100,damping:10,duration:t};{const l=Math.pow(u,2)*n;return{stiffness:l,damping:i*2*Math.sqrt(n*l),duration:t}}}const XC=12;function JC(t,e,s){let n=s;for(let r=1;r<XC;r++)n=n-t(n)/e(n);return n}function Hc(t,e){return t*Math.sqrt(1-e*e)}const ZC=["duration","bounce"],eE=["stiffness","damping","mass"];function sd(t,e){return e.some(s=>t[s]!==void 0)}function tE(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!sd(t,eE)&&sd(t,ZC)){const s=YC(t);e={...e,...s,mass:1},e.isResolvedFromDuration=!0}return e}function Em({keyframes:t,restDelta:e,restSpeed:s,...n}){const r=t[0],o=t[t.length-1],i={done:!1,value:r},{stiffness:a,damping:u,mass:l,duration:f,velocity:d,isResolvedFromDuration:h}=tE({...n,velocity:-as(n.velocity||0)}),m=d||0,b=u/(2*Math.sqrt(a*l)),g=o-r,y=as(Math.sqrt(a/l)),C=Math.abs(g)<5;s||(s=C?.01:2),e||(e=C?.005:.5);let T;if(b<1){const S=Hc(y,b);T=E=>{const P=Math.exp(-b*y*E);return o-P*((m+b*y*g)/S*Math.sin(S*E)+g*Math.cos(S*E))}}else if(b===1)T=S=>o-Math.exp(-y*S)*(g+(m+y*g)*S);else{const S=y*Math.sqrt(b*b-1);T=E=>{const P=Math.exp(-b*y*E),O=Math.min(S*E,300);return o-P*((m+b*y*g)*Math.sinh(O)+S*g*Math.cosh(O))/S}}return{calculatedDuration:h&&f||null,next:S=>{const E=T(S);if(h)i.done=S>=f;else{let P=m;S!==0&&(b<1?P=Cm(T,S,E):P=0);const O=Math.abs(P)<=s,I=Math.abs(o-E)<=e;i.done=O&&I}return i.value=i.done?o:E,i}}}function nd({keyframes:t,velocity:e=0,power:s=.8,timeConstant:n=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:i,min:a,max:u,restDelta:l=.5,restSpeed:f}){const d=t[0],h={done:!1,value:d},m=_=>a!==void 0&&_<a||u!==void 0&&_>u,b=_=>a===void 0?u:u===void 0||Math.abs(a-_)<Math.abs(u-_)?a:u;let g=s*e;const y=d+g,C=i===void 0?y:i(y);C!==y&&(g=C-d);const T=_=>-g*Math.exp(-_/n),S=_=>C+T(_),E=_=>{const D=T(_),j=S(_);h.done=Math.abs(D)<=l,h.value=h.done?C:j};let P,O;const I=_=>{m(h.value)&&(P=_,O=Em({keyframes:[h.value,b(h.value)],velocity:Cm(S,_,h.value),damping:r,stiffness:o,restDelta:l,restSpeed:f}))};return I(0),{calculatedDuration:null,next:_=>{let D=!1;return!O&&P===void 0&&(D=!0,E(_),I(_)),P!==void 0&&_>P?O.next(_-P):(!D&&E(_),h)}}}const sE=t=>{const e=({timestamp:s})=>t(s);return{start:()=>te.update(e,!0),stop:()=>ds(e),now:()=>Te.isProcessing?Te.timestamp:performance.now()}},rd=2e4;function od(t){let e=0;const s=50;let n=t.next(e);for(;!n.done&&e<rd;)e+=s,n=t.next(e);return e>=rd?1/0:e}const nE={decay:nd,inertia:nd,tween:Qi,keyframes:Qi,spring:Em};function Yi({autoplay:t=!0,delay:e=0,driver:s=sE,keyframes:n,type:r="keyframes",repeat:o=0,repeatDelay:i=0,repeatType:a="loop",onPlay:u,onStop:l,onComplete:f,onUpdate:d,...h}){let m=1,b=!1,g,y;const C=()=>{y=new Promise(N=>{g=N})};C();let T;const S=nE[r]||Qi;let E;S!==Qi&&typeof n[0]!="number"&&(E=xm([0,100],n,{clamp:!1}),n=[0,100]);const P=S({...h,keyframes:n});let O;a==="mirror"&&(O=S({...h,keyframes:[...n].reverse(),velocity:-(h.velocity||0)}));let I="idle",_=null,D=null,j=null;P.calculatedDuration===null&&o&&(P.calculatedDuration=od(P));const{calculatedDuration:U}=P;let k=1/0,G=1/0;U!==null&&(k=U+i,G=k*(o+1)-i);let L=0;const H=N=>{if(D===null)return;m>0&&(D=Math.min(D,N)),m<0&&(D=Math.min(N-G/m,D)),_!==null?L=_:L=Math.round(N-D)*m;const B=L-e*(m>=0?1:-1),F=m>=0?B<0:B>G;L=Math.max(B,0),I==="finished"&&_===null&&(L=G);let ye=L,wt=P;if(o){const jt=Math.min(L,G)/k;let xt=Math.floor(jt),Ft=jt%1;!Ft&&jt>=1&&(Ft=1),Ft===1&&xt--,xt=Math.min(xt,o+1),!!(xt%2)&&(a==="reverse"?(Ft=1-Ft,i&&(Ft-=i/k)):a==="mirror"&&(wt=O)),ye=Ks(0,1,Ft)*k}const X=F?{done:!1,value:n[0]}:wt.next(ye);E&&(X.value=E(X.value));let{done:hs}=X;!F&&U!==null&&(hs=m>=0?L>=G:L<=0);const ps=_===null&&(I==="finished"||I==="running"&&hs);return d&&d(X.value),ps&&Z(),X},M=()=>{T&&T.stop(),T=void 0},Q=()=>{I="idle",M(),g(),C(),D=j=null},Z=()=>{I="finished",f&&f(),M(),g()},Y=()=>{if(b)return;T||(T=s(H));const N=T.now();u&&u(),_!==null?D=N-_:(!D||I==="finished")&&(D=N),I==="finished"&&C(),j=D,_=null,I="running",T.start()};t&&Y();const ze={then(N,B){return y.then(N,B)},get time(){return as(L)},set time(N){N=Hs(N),L=N,_!==null||!T||m===0?_=N:D=T.now()-N/m},get duration(){const N=P.calculatedDuration===null?od(P):P.calculatedDuration;return as(N)},get speed(){return m},set speed(N){N===m||!T||(m=N,ze.time=as(L))},get state(){return I},play:Y,pause:()=>{I="paused",_=L},stop:()=>{b=!0,I!=="idle"&&(I="idle",l&&l(),Q())},cancel:()=>{j!==null&&H(j),Q()},complete:()=>{I="finished"},sample:N=>(D=0,H(N))};return ze}function rE(t){let e;return()=>(e===void 0&&(e=t()),e)}const oE=rE(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),iE=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),xi=10,aE=2e4,cE=(t,e)=>e.type==="spring"||t==="backgroundColor"||!tm(e.ease);function lE(t,e,{onUpdate:s,onComplete:n,...r}){if(!(oE()&&iE.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let i=!1,a,u,l=!1;const f=()=>{u=new Promise(S=>{a=S})};f();let{keyframes:d,duration:h=300,ease:m,times:b}=r;if(cE(e,r)){const S=Yi({...r,repeat:0,delay:0});let E={done:!1,value:d[0]};const P=[];let O=0;for(;!E.done&&O<aE;)E=S.sample(O),P.push(E.value),O+=xi;b=void 0,d=P,h=O-xi,m="linear"}const g=vC(t.owner.current,e,d,{...r,duration:h,ease:m,times:b}),y=()=>{l=!1,g.cancel()},C=()=>{l=!0,te.update(y),a(),f()};return g.onfinish=()=>{l||(t.set(wC(d,r)),n&&n(),C())},{then(S,E){return u.then(S,E)},attachTimeline(S){return g.timeline=S,g.onfinish=null,ae},get time(){return as(g.currentTime||0)},set time(S){g.currentTime=Hs(S)},get speed(){return g.playbackRate},set speed(S){g.playbackRate=S},get duration(){return as(h)},play:()=>{i||(g.play(),ds(y))},pause:()=>g.pause(),stop:()=>{if(i=!0,g.playState==="idle")return;const{currentTime:S}=g;if(S){const E=Yi({...r,autoplay:!1});t.setWithVelocity(E.sample(S-xi).value,E.sample(S).value,xi)}C()},complete:()=>{l||g.finish()},cancel:C}}function uE({keyframes:t,delay:e,onUpdate:s,onComplete:n}){const r=()=>(s&&s(t[t.length-1]),n&&n(),{time:0,speed:1,duration:0,play:ae,pause:ae,stop:ae,then:o=>(o(),Promise.resolve()),cancel:ae,complete:ae});return e?Yi({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const dE={type:"spring",stiffness:500,damping:25,restSpeed:10},fE=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),hE={type:"keyframes",duration:.8},pE={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},mE=(t,{keyframes:e})=>e.length>2?hE:Fn.has(t)?t.startsWith("scale")?fE(e[1]):dE:pE,Wc=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Qs.test(e)||e==="0")&&!e.startsWith("url(")),yE=new Set(["brightness","contrast","saturate","opacity"]);function gE(t){const[e,s]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=s.match(Pa)||[];if(!n)return t;const r=s.replace(n,"");let o=yE.has(e)?1:0;return n!==s&&(o*=100),e+"("+o+r+")"}const bE=/([a-z-]*)\(.*?\)/g,Gc={...Qs,getAnimatableNone:t=>{const e=t.match(bE);return e?e.map(gE).join(" "):t}},vE={...Fp,color:Me,backgroundColor:Me,outlineColor:Me,fill:Me,stroke:Me,borderColor:Me,borderTopColor:Me,borderRightColor:Me,borderBottomColor:Me,borderLeftColor:Me,filter:Gc,WebkitFilter:Gc},zl=t=>vE[t];function Tm(t,e){let s=zl(t);return s!==Gc&&(s=Qs),s.getAnimatableNone?s.getAnimatableNone(e):void 0}const Rm=t=>/^0[^.\s]+$/.test(t);function wE(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||Rm(t)}function xE(t,e,s,n){const r=Wc(e,s);let o;Array.isArray(s)?o=[...s]:o=[null,s];const i=n.from!==void 0?n.from:t.get();let a;const u=[];for(let l=0;l<o.length;l++)o[l]===null&&(o[l]=l===0?i:o[l-1]),wE(o[l])&&u.push(l),typeof o[l]=="string"&&o[l]!=="none"&&o[l]!=="0"&&(a=o[l]);if(r&&u.length&&a)for(let l=0;l<u.length;l++){const f=u[l];o[f]=Tm(e,a)}return o}function SE({when:t,delay:e,delayChildren:s,staggerChildren:n,staggerDirection:r,repeat:o,repeatType:i,repeatDelay:a,from:u,elapsed:l,...f}){return!!Object.keys(f).length}function Hl(t,e){return t[e]||t.default||t}const CE={skipAnimations:!1},Wl=(t,e,s,n={})=>r=>{const o=Hl(n,t)||{},i=o.delay||n.delay||0;let{elapsed:a=0}=n;a=a-Hs(i);const u=xE(e,t,s,o),l=u[0],f=u[u.length-1],d=Wc(t,l),h=Wc(t,f);let m={keyframes:u,velocity:e.getVelocity(),ease:"easeOut",...o,delay:-a,onUpdate:b=>{e.set(b),o.onUpdate&&o.onUpdate(b)},onComplete:()=>{r(),o.onComplete&&o.onComplete()}};if(SE(o)||(m={...m,...mE(t,m)}),m.duration&&(m.duration=Hs(m.duration)),m.repeatDelay&&(m.repeatDelay=Hs(m.repeatDelay)),!d||!h||bC.current||o.type===!1||CE.skipAnimations)return uE(m);if(!n.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const b=lE(e,t,m);if(b)return b}return Yi(m)};function Xi(t){return!!($e(t)&&t.add)}const Pm=t=>/^\-?\d*\.?\d+$/.test(t);function Gl(t,e){t.indexOf(e)===-1&&t.push(e)}function Kl(t,e){const s=t.indexOf(e);s>-1&&t.splice(s,1)}class Ql{constructor(){this.subscriptions=[]}add(e){return Gl(this.subscriptions,e),()=>Kl(this.subscriptions,e)}notify(e,s,n){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,s,n);else for(let o=0;o<r;o++){const i=this.subscriptions[o];i&&i(e,s,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const EE=t=>!isNaN(parseFloat(t));class TE{constructor(e,s={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,r=!0)=>{this.prev=this.current,this.current=n;const{delta:o,timestamp:i}=Te;this.lastUpdated!==i&&(this.timeDelta=o,this.lastUpdated=i,te.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>te.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=EE(this.current),this.owner=s.owner}onChange(e){return this.on("change",e)}on(e,s){this.events[e]||(this.events[e]=new Ql);const n=this.events[e].add(s);return e==="change"?()=>{n(),te.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,s){this.passiveEffect=e,this.stopPassiveEffect=s}set(e,s=!0){!s||!this.passiveEffect?this.updateAndNotify(e,s):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,s,n){this.set(s),this.prev=e,this.timeDelta=n}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Sm(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=e(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function jr(t,e){return new TE(t,e)}const Am=t=>e=>e.test(t),RE={test:t=>t==="auto",parse:t=>t},_m=[qn,V,Nt,vs,MS,OS,RE],Yr=t=>_m.find(Am(t)),PE=[..._m,Me,Qs],AE=t=>PE.find(Am(t));function _E(t,e,s){t.hasValue(e)?t.getValue(e).set(s):t.addValue(e,jr(s))}function IE(t,e){const s=_a(t,e);let{transitionEnd:n={},transition:r={},...o}=s?t.makeTargetAnimatable(s,!1):{};o={...o,...n};for(const i in o){const a=GS(o[i]);_E(t,i,a)}}function OE(t,e,s){var n,r;const o=Object.keys(e).filter(a=>!t.hasValue(a)),i=o.length;if(i)for(let a=0;a<i;a++){const u=o[a],l=e[u];let f=null;Array.isArray(l)&&(f=l[0]),f===null&&(f=(r=(n=s[u])!==null&&n!==void 0?n:t.readValue(u))!==null&&r!==void 0?r:e[u]),f!=null&&(typeof f=="string"&&(Pm(f)||Rm(f))?f=parseFloat(f):!AE(f)&&Qs.test(l)&&(f=Tm(u,l)),t.addValue(u,jr(f,{owner:t})),s[u]===void 0&&(s[u]=f),f!==null&&t.setBaseTarget(u,f))}}function ME(t,e){return e?(e[t]||e.default||e).from:void 0}function DE(t,e,s){const n={};for(const r in t){const o=ME(r,e);if(o!==void 0)n[r]=o;else{const i=s.getValue(r);i&&(n[r]=i.get())}}return n}function LE({protectedKeys:t,needsAnimating:e},s){const n=t.hasOwnProperty(s)&&e[s]!==!0;return e[s]=!1,n}function kE(t,e){const s=t.get();if(Array.isArray(e)){for(let n=0;n<e.length;n++)if(e[n]!==s)return!0}else return s!==e}function Im(t,e,{delay:s=0,transitionOverride:n,type:r}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:i,...a}=t.makeTargetAnimatable(e);const u=t.getValue("willChange");n&&(o=n);const l=[],f=r&&t.animationState&&t.animationState.getState()[r];for(const d in a){const h=t.getValue(d),m=a[d];if(!h||m===void 0||f&&LE(f,d))continue;const b={delay:s,elapsed:0,...Hl(o||{},d)};if(window.HandoffAppearAnimations){const C=t.getProps()[Op];if(C){const T=window.HandoffAppearAnimations(C,d,h,te);T!==null&&(b.elapsed=T,b.isHandoff=!0)}}let g=!b.isHandoff&&!kE(h,m);if(b.type==="spring"&&(h.getVelocity()||b.velocity)&&(g=!1),h.animation&&(g=!1),g)continue;h.start(Wl(d,h,m,t.shouldReduceMotion&&Fn.has(d)?{type:!1}:b));const y=h.animation;Xi(u)&&(u.add(d),y.then(()=>u.remove(d))),l.push(y)}return i&&Promise.all(l).then(()=>{i&&IE(t,i)}),l}function Kc(t,e,s={}){const n=_a(t,e,s.custom);let{transition:r=t.getDefaultTransition()||{}}=n||{};s.transitionOverride&&(r=s.transitionOverride);const o=n?()=>Promise.all(Im(t,n,s)):()=>Promise.resolve(),i=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:l=0,staggerChildren:f,staggerDirection:d}=r;return NE(t,e,l+u,f,d,s)}:()=>Promise.resolve(),{when:a}=r;if(a){const[u,l]=a==="beforeChildren"?[o,i]:[i,o];return u().then(()=>l())}else return Promise.all([o(),i(s.delay)])}function NE(t,e,s=0,n=0,r=1,o){const i=[],a=(t.variantChildren.size-1)*n,u=r===1?(l=0)=>l*n:(l=0)=>a-l*n;return Array.from(t.variantChildren).sort(VE).forEach((l,f)=>{l.notify("AnimationStart",e),i.push(Kc(l,e,{...o,delay:s+u(f)}).then(()=>l.notify("AnimationComplete",e)))}),Promise.all(i)}function VE(t,e){return t.sortNodePosition(e)}function jE(t,e,s={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const r=e.map(o=>Kc(t,o,s));n=Promise.all(r)}else if(typeof e=="string")n=Kc(t,e,s);else{const r=typeof e=="function"?_a(t,e,s.custom):e;n=Promise.all(Im(t,r,s))}return n.then(()=>t.notify("AnimationComplete",e))}const FE=[...Ol].reverse(),qE=Ol.length;function BE(t){return e=>Promise.all(e.map(({animation:s,options:n})=>jE(t,s,n)))}function UE(t){let e=BE(t);const s=zE();let n=!0;const r=(u,l)=>{const f=_a(t,l);if(f){const{transition:d,transitionEnd:h,...m}=f;u={...u,...m,...h}}return u};function o(u){e=u(t)}function i(u,l){const f=t.getProps(),d=t.getVariantContext(!0)||{},h=[],m=new Set;let b={},g=1/0;for(let C=0;C<qE;C++){const T=FE[C],S=s[T],E=f[T]!==void 0?f[T]:d[T],P=go(E),O=T===l?S.isActive:null;O===!1&&(g=C);let I=E===d[T]&&E!==f[T]&&P;if(I&&n&&t.manuallyAnimateOnMount&&(I=!1),S.protectedKeys={...b},!S.isActive&&O===null||!E&&!S.prevProp||Ta(E)||typeof E=="boolean")continue;let D=$E(S.prevProp,E)||T===l&&S.isActive&&!I&&P||C>g&&P,j=!1;const U=Array.isArray(E)?E:[E];let k=U.reduce(r,{});O===!1&&(k={});const{prevResolvedValues:G={}}=S,L={...G,...k},H=M=>{D=!0,m.has(M)&&(j=!0,m.delete(M)),S.needsAnimating[M]=!0};for(const M in L){const Q=k[M],Z=G[M];if(b.hasOwnProperty(M))continue;let Y=!1;Gi(Q)&&Gi(Z)?Y=!Zp(Q,Z):Y=Q!==Z,Y?Q!==void 0?H(M):m.add(M):Q!==void 0&&m.has(M)?H(M):S.protectedKeys[M]=!0}S.prevProp=E,S.prevResolvedValues=k,S.isActive&&(b={...b,...k}),n&&t.blockInitialAnimation&&(D=!1),D&&(!I||j)&&h.push(...U.map(M=>({animation:M,options:{type:T,...u}})))}if(m.size){const C={};m.forEach(T=>{const S=t.getBaseTarget(T);S!==void 0&&(C[T]=S)}),h.push({animation:C})}let y=!!h.length;return n&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(y=!1),n=!1,y?e(h):Promise.resolve()}function a(u,l,f){var d;if(s[u].isActive===l)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(m=>{var b;return(b=m.animationState)===null||b===void 0?void 0:b.setActive(u,l)}),s[u].isActive=l;const h=i(f,u);for(const m in s)s[m].protectedKeys={};return h}return{animateChanges:i,setActive:a,setAnimateFunction:o,getState:()=>s}}function $E(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Zp(e,t):!1}function Js(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function zE(){return{animate:Js(!0),whileInView:Js(),whileHover:Js(),whileTap:Js(),whileDrag:Js(),whileFocus:Js(),exit:Js()}}class HE extends Ys{constructor(e){super(e),e.animationState||(e.animationState=UE(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Ta(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:s}=this.node.prevProps||{};e!==s&&this.updateAnimationControlsSubscription()}unmount(){}}let WE=0;class GE extends Ys{constructor(){super(...arguments),this.id=WE++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:s,custom:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const o=this.node.animationState.setActive("exit",!e,{custom:n??this.node.getProps().custom});s&&!e&&o.then(()=>s(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const KE={animation:{Feature:HE},exit:{Feature:GE}},id=(t,e)=>Math.abs(t-e);function QE(t,e){const s=id(t.x,e.x),n=id(t.y,e.y);return Math.sqrt(s**2+n**2)}class Om{constructor(e,s,{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Ka(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,m=QE(d.offset,{x:0,y:0})>=3;if(!h&&!m)return;const{point:b}=d,{timestamp:g}=Te;this.history.push({...b,timestamp:g});const{onStart:y,onMove:C}=this.handlers;h||(y&&y(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,d)},this.handlePointerMove=(d,h)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=Ga(h,this.transformPagePoint),te.update(this.updatePoint,!0)},this.handlePointerUp=(d,h)=>{this.end();const{onEnd:m,onSessionEnd:b,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Ka(d.type==="pointercancel"?this.lastMoveEventInfo:Ga(h,this.transformPagePoint),this.history);this.startEvent&&m&&m(d,y),b&&b(d,y)},!Kp(e))return;this.dragSnapToOrigin=o,this.handlers=s,this.transformPagePoint=n,this.contextWindow=r||window;const i=Aa(e),a=Ga(i,this.transformPagePoint),{point:u}=a,{timestamp:l}=Te;this.history=[{...u,timestamp:l}];const{onSessionStart:f}=s;f&&f(e,Ka(a,this.history)),this.removeListeners=zs(is(this.contextWindow,"pointermove",this.handlePointerMove),is(this.contextWindow,"pointerup",this.handlePointerUp),is(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ds(this.updatePoint)}}function Ga(t,e){return e?{point:e(t.point)}:t}function ad(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ka({point:t},e){return{point:t,delta:ad(t,Mm(e)),offset:ad(t,YE(e)),velocity:XE(e,.1)}}function YE(t){return t[0]}function Mm(t){return t[t.length-1]}function XE(t,e){if(t.length<2)return{x:0,y:0};let s=t.length-1,n=null;const r=Mm(t);for(;s>=0&&(n=t[s],!(r.timestamp-n.timestamp>Hs(e)));)s--;if(!n)return{x:0,y:0};const o=as(r.timestamp-n.timestamp);if(o===0)return{x:0,y:0};const i={x:(r.x-n.x)/o,y:(r.y-n.y)/o};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function Xe(t){return t.max-t.min}function Qc(t,e=0,s=.01){return Math.abs(t-e)<=s}function cd(t,e,s,n=.5){t.origin=n,t.originPoint=ne(e.min,e.max,t.origin),t.scale=Xe(s)/Xe(e),(Qc(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=ne(s.min,s.max,t.origin)-t.originPoint,(Qc(t.translate)||isNaN(t.translate))&&(t.translate=0)}function fo(t,e,s,n){cd(t.x,e.x,s.x,n?n.originX:void 0),cd(t.y,e.y,s.y,n?n.originY:void 0)}function ld(t,e,s){t.min=s.min+e.min,t.max=t.min+Xe(e)}function JE(t,e,s){ld(t.x,e.x,s.x),ld(t.y,e.y,s.y)}function ud(t,e,s){t.min=e.min-s.min,t.max=t.min+Xe(e)}function ho(t,e,s){ud(t.x,e.x,s.x),ud(t.y,e.y,s.y)}function ZE(t,{min:e,max:s},n){return e!==void 0&&t<e?t=n?ne(e,t,n.min):Math.max(t,e):s!==void 0&&t>s&&(t=n?ne(s,t,n.max):Math.min(t,s)),t}function dd(t,e,s){return{min:e!==void 0?t.min+e:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function eT(t,{top:e,left:s,bottom:n,right:r}){return{x:dd(t.x,s,r),y:dd(t.y,e,n)}}function fd(t,e){let s=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([s,n]=[n,s]),{min:s,max:n}}function tT(t,e){return{x:fd(t.x,e.x),y:fd(t.y,e.y)}}function sT(t,e){let s=.5;const n=Xe(t),r=Xe(e);return r>n?s=vo(e.min,e.max-n,t.min):n>r&&(s=vo(t.min,t.max-r,e.min)),Ks(0,1,s)}function nT(t,e){const s={};return e.min!==void 0&&(s.min=e.min-t.min),e.max!==void 0&&(s.max=e.max-t.min),s}const Yc=.35;function rT(t=Yc){return t===!1?t=0:t===!0&&(t=Yc),{x:hd(t,"left","right"),y:hd(t,"top","bottom")}}function hd(t,e,s){return{min:pd(t,e),max:pd(t,s)}}function pd(t,e){return typeof t=="number"?t:t[e]||0}const md=()=>({translate:0,scale:1,origin:0,originPoint:0}),Yn=()=>({x:md(),y:md()}),yd=()=>({min:0,max:0}),ue=()=>({x:yd(),y:yd()});function et(t){return[t("x"),t("y")]}function Dm({top:t,left:e,right:s,bottom:n}){return{x:{min:e,max:s},y:{min:t,max:n}}}function oT({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function iT(t,e){if(!e)return t;const s=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:n.y,right:n.x}}function Qa(t){return t===void 0||t===1}function Xc({scale:t,scaleX:e,scaleY:s}){return!Qa(t)||!Qa(e)||!Qa(s)}function sn(t){return Xc(t)||Lm(t)||t.z||t.rotate||t.rotateX||t.rotateY}function Lm(t){return gd(t.x)||gd(t.y)}function gd(t){return t&&t!=="0%"}function Ji(t,e,s){const n=t-s,r=e*n;return s+r}function bd(t,e,s,n,r){return r!==void 0&&(t=Ji(t,r,n)),Ji(t,s,n)+e}function Jc(t,e=0,s=1,n,r){t.min=bd(t.min,e,s,n,r),t.max=bd(t.max,e,s,n,r)}function km(t,{x:e,y:s}){Jc(t.x,e.translate,e.scale,e.originPoint),Jc(t.y,s.translate,s.scale,s.originPoint)}function aT(t,e,s,n=!1){const r=s.length;if(!r)return;e.x=e.y=1;let o,i;for(let a=0;a<r;a++){o=s[a],i=o.projectionDelta;const u=o.instance;u&&u.style&&u.style.display==="contents"||(n&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Xn(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),i&&(e.x*=i.x.scale,e.y*=i.y.scale,km(t,i)),n&&sn(o.latestValues)&&Xn(t,o.latestValues))}e.x=vd(e.x),e.y=vd(e.y)}function vd(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function ws(t,e){t.min=t.min+e,t.max=t.max+e}function wd(t,e,[s,n,r]){const o=e[r]!==void 0?e[r]:.5,i=ne(t.min,t.max,o);Jc(t,e[s],e[n],i,e.scale)}const cT=["x","scaleX","originX"],lT=["y","scaleY","originY"];function Xn(t,e){wd(t.x,e,cT),wd(t.y,e,lT)}function Nm(t,e){return Dm(iT(t.getBoundingClientRect(),e))}function uT(t,e,s){const n=Nm(t,s),{scroll:r}=e;return r&&(ws(n.x,r.offset.x),ws(n.y,r.offset.y)),n}const Vm=({current:t})=>t?t.ownerDocument.defaultView:null,dT=new WeakMap;class fT{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ue(),this.visualElement=e}start(e,{snapToCursor:s=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const r=f=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(Aa(f,"page").point)},o=(f,d)=>{const{drag:h,dragPropagation:m,onDragStart:b}=this.getProps();if(h&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Yp(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),et(y=>{let C=this.getAxisMotionValue(y).get()||0;if(Nt.test(C)){const{projection:T}=this.visualElement;if(T&&T.layout){const S=T.layout.layoutBox[y];S&&(C=Xe(S)*(parseFloat(C)/100))}}this.originPoint[y]=C}),b&&te.update(()=>b(f,d),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},i=(f,d)=>{const{dragPropagation:h,dragDirectionLock:m,onDirectionLock:b,onDrag:g}=this.getProps();if(!h&&!this.openGlobalLock)return;const{offset:y}=d;if(m&&this.currentDirection===null){this.currentDirection=hT(y),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",d.point,y),this.updateAxis("y",d.point,y),this.visualElement.render(),g&&g(f,d)},a=(f,d)=>this.stop(f,d),u=()=>et(f=>{var d;return this.getAnimationState(f)==="paused"&&((d=this.getAxisMotionValue(f).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:l}=this.getProps();this.panSession=new Om(e,{onSessionStart:r,onStart:o,onMove:i,onSessionEnd:a,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:l,contextWindow:Vm(this.visualElement)})}stop(e,s){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=s;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&te.update(()=>o(e,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:s}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(e,s,n){const{drag:r}=this.getProps();if(!n||!Si(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let i=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(i=ZE(i,this.constraints[e],this.elastic[e])),o.set(i)}resolveConstraints(){var e;const{dragConstraints:s,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;s&&Kn(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&r?this.constraints=eT(r.layoutBox,s):this.constraints=!1,this.elastic=rT(n),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&et(i=>{this.getAxisMotionValue(i)&&(this.constraints[i]=nT(r.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:s}=this.getProps();if(!e||!Kn(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=uT(n,r.root,this.visualElement.getTransformPagePoint());let i=tT(r.layout.layoutBox,o);if(s){const a=s(oT(i));this.hasMutatedConstraints=!!a,a&&(i=Dm(a))}return i}startAnimation(e){const{drag:s,dragMomentum:n,dragElastic:r,dragTransition:o,dragSnapToOrigin:i,onDragTransitionEnd:a}=this.getProps(),u=this.constraints||{},l=et(f=>{if(!Si(f,s,this.currentDirection))return;let d=u&&u[f]||{};i&&(d={min:0,max:0});const h=r?200:1e6,m=r?40:1e7,b={type:"inertia",velocity:n?e[f]:0,bounceStiffness:h,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...o,...d};return this.startAxisValueAnimation(f,b)});return Promise.all(l).then(a)}startAxisValueAnimation(e,s){const n=this.getAxisMotionValue(e);return n.start(Wl(e,n,0,s))}stopAnimation(){et(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){et(e=>{var s;return(s=this.getAxisMotionValue(e).animation)===null||s===void 0?void 0:s.pause()})}getAnimationState(e){var s;return(s=this.getAxisMotionValue(e).animation)===null||s===void 0?void 0:s.state}getAxisMotionValue(e){const s="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),r=n[s];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){et(s=>{const{drag:n}=this.getProps();if(!Si(s,n,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(s);if(r&&r.layout){const{min:i,max:a}=r.layout.layoutBox[s];o.set(e[s]-ne(i,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:s}=this.getProps(),{projection:n}=this.visualElement;if(!Kn(s)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};et(i=>{const a=this.getAxisMotionValue(i);if(a){const u=a.get();r[i]=sT({min:u,max:u},this.constraints[i])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),et(i=>{if(!Si(i,e,null))return;const a=this.getAxisMotionValue(i),{min:u,max:l}=this.constraints[i];a.set(ne(u,l,r[i]))})}addListeners(){if(!this.visualElement.current)return;dT.set(this.visualElement,this);const e=this.visualElement.current,s=is(e,"pointerdown",u=>{const{drag:l,dragListener:f=!0}=this.getProps();l&&f&&this.start(u)}),n=()=>{const{dragConstraints:u}=this.getProps();Kn(u)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",n);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),n();const i=os(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:u,hasLayoutChanged:l})=>{this.isDragging&&l&&(et(f=>{const d=this.getAxisMotionValue(f);d&&(this.originPoint[f]+=u[f].translate,d.set(d.get()+u[f].translate))}),this.visualElement.render())});return()=>{i(),s(),o(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:i=Yc,dragMomentum:a=!0}=e;return{...e,drag:s,dragDirectionLock:n,dragPropagation:r,dragConstraints:o,dragElastic:i,dragMomentum:a}}}function Si(t,e,s){return(e===!0||e===t)&&(s===null||s===t)}function hT(t,e=10){let s=null;return Math.abs(t.y)>e?s="y":Math.abs(t.x)>e&&(s="x"),s}class pT extends Ys{constructor(e){super(e),this.removeGroupControls=ae,this.removeListeners=ae,this.controls=new fT(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ae}unmount(){this.removeGroupControls(),this.removeListeners()}}const xd=t=>(e,s)=>{t&&te.update(()=>t(e,s))};class mT extends Ys{constructor(){super(...arguments),this.removePointerDownListener=ae}onPointerDown(e){this.session=new Om(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Vm(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:s,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:xd(e),onStart:xd(s),onMove:n,onEnd:(o,i)=>{delete this.session,r&&te.update(()=>r(o,i))}}}mount(){this.removePointerDownListener=is(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function yT(){const t=p.useContext(_l);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:s,register:n}=t,r=p.useId();return p.useEffect(()=>n(r),[]),!e&&s?[!1,()=>s&&s(r)]:[!0]}const Di={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Sd(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Xr={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(V.test(t))t=parseFloat(t);else return t;const s=Sd(t,e.target.x),n=Sd(t,e.target.y);return`${s}% ${n}%`}},gT={correct:(t,{treeScale:e,projectionDelta:s})=>{const n=t,r=Qs.parse(t);if(r.length>5)return n;const o=Qs.createTransformer(t),i=typeof r[0]!="number"?1:0,a=s.x.scale*e.x,u=s.y.scale*e.y;r[0+i]/=a,r[1+i]/=u;const l=ne(a,u,.5);return typeof r[2+i]=="number"&&(r[2+i]/=l),typeof r[3+i]=="number"&&(r[3+i]/=l),o(r)}};class bT extends A.Component{componentDidMount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:n,layoutId:r}=this.props,{projection:o}=e;ES(vT),o&&(s.group&&s.group.add(o),n&&n.register&&r&&n.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Di.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:s,visualElement:n,drag:r,isPresent:o}=this.props,i=n.projection;return i&&(i.isPresent=o,r||e.layoutDependency!==s||s===void 0?i.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?i.promote():i.relegate()||te.postRender(()=>{const a=i.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function jm(t){const[e,s]=yT(),n=p.useContext(Dp);return A.createElement(bT,{...t,layoutGroup:n,switchLayoutGroup:p.useContext(Lp),isPresent:e,safeToRemove:s})}const vT={borderRadius:{...Xr,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Xr,borderTopRightRadius:Xr,borderBottomLeftRadius:Xr,borderBottomRightRadius:Xr,boxShadow:gT},Fm=["TopLeft","TopRight","BottomLeft","BottomRight"],wT=Fm.length,Cd=t=>typeof t=="string"?parseFloat(t):t,Ed=t=>typeof t=="number"||V.test(t);function xT(t,e,s,n,r,o){r?(t.opacity=ne(0,s.opacity!==void 0?s.opacity:1,ST(n)),t.opacityExit=ne(e.opacity!==void 0?e.opacity:1,0,CT(n))):o&&(t.opacity=ne(e.opacity!==void 0?e.opacity:1,s.opacity!==void 0?s.opacity:1,n));for(let i=0;i<wT;i++){const a=`border${Fm[i]}Radius`;let u=Td(e,a),l=Td(s,a);if(u===void 0&&l===void 0)continue;u||(u=0),l||(l=0),u===0||l===0||Ed(u)===Ed(l)?(t[a]=Math.max(ne(Cd(u),Cd(l),n),0),(Nt.test(l)||Nt.test(u))&&(t[a]+="%")):t[a]=l}(e.rotate||s.rotate)&&(t.rotate=ne(e.rotate||0,s.rotate||0,n))}function Td(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const ST=qm(0,.5,cm),CT=qm(.5,.95,ae);function qm(t,e,s){return n=>n<t?0:n>e?1:s(vo(t,e,n))}function Rd(t,e){t.min=e.min,t.max=e.max}function Ze(t,e){Rd(t.x,e.x),Rd(t.y,e.y)}function Pd(t,e,s,n,r){return t-=e,t=Ji(t,1/s,n),r!==void 0&&(t=Ji(t,1/r,n)),t}function ET(t,e=0,s=1,n=.5,r,o=t,i=t){if(Nt.test(e)&&(e=parseFloat(e),e=ne(i.min,i.max,e/100)-i.min),typeof e!="number")return;let a=ne(o.min,o.max,n);t===o&&(a-=e),t.min=Pd(t.min,e,s,a,r),t.max=Pd(t.max,e,s,a,r)}function Ad(t,e,[s,n,r],o,i){ET(t,e[s],e[n],e[r],e.scale,o,i)}const TT=["x","scaleX","originX"],RT=["y","scaleY","originY"];function _d(t,e,s,n){Ad(t.x,e,TT,s?s.x:void 0,n?n.x:void 0),Ad(t.y,e,RT,s?s.y:void 0,n?n.y:void 0)}function Id(t){return t.translate===0&&t.scale===1}function Bm(t){return Id(t.x)&&Id(t.y)}function PT(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function Um(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function Od(t){return Xe(t.x)/Xe(t.y)}class AT{constructor(){this.members=[]}add(e){Gl(this.members,e),e.scheduleRender()}remove(e){if(Kl(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(e){const s=this.members.findIndex(r=>e===r);if(s===0)return!1;let n;for(let r=s;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){n=o;break}}return n?(this.promote(n),!0):!1}promote(e,s){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,s&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:s,resumingFrom:n}=e;s.onExitComplete&&s.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Md(t,e,s){let n="";const r=t.x.translate/e.x,o=t.y.translate/e.y;if((r||o)&&(n=`translate3d(${r}px, ${o}px, 0) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),s){const{rotate:u,rotateX:l,rotateY:f}=s;u&&(n+=`rotate(${u}deg) `),l&&(n+=`rotateX(${l}deg) `),f&&(n+=`rotateY(${f}deg) `)}const i=t.x.scale*e.x,a=t.y.scale*e.y;return(i!==1||a!==1)&&(n+=`scale(${i}, ${a})`),n||"none"}const _T=(t,e)=>t.depth-e.depth;class IT{constructor(){this.children=[],this.isDirty=!1}add(e){Gl(this.children,e),this.isDirty=!0}remove(e){Kl(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(_T),this.isDirty=!1,this.children.forEach(e)}}function OT(t,e){const s=performance.now(),n=({timestamp:r})=>{const o=r-s;o>=e&&(ds(n),t(o-e))};return te.read(n,!0),()=>ds(n)}function MT(t){window.MotionDebug&&window.MotionDebug.record(t)}function DT(t){return t instanceof SVGElement&&t.tagName!=="svg"}function LT(t,e,s){const n=$e(t)?t:jr(t);return n.start(Wl("",n,e,s)),n.animation}const Dd=["","X","Y","Z"],kT={visibility:"hidden"},Ld=1e3;let NT=0;const nn={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function $m({attachResizeListener:t,defaultParent:e,measureScroll:s,checkIsScrollRoot:n,resetTransform:r}){return class{constructor(i={},a=e==null?void 0:e()){this.id=NT++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,nn.totalNodes=nn.resolvedTargetDeltas=nn.recalculatedProjection=0,this.nodes.forEach(FT),this.nodes.forEach(zT),this.nodes.forEach(HT),this.nodes.forEach(qT),MT(nn)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new IT)}addEventListener(i,a){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new Ql),this.eventHandlers.get(i).add(a)}notifyListeners(i,...a){const u=this.eventHandlers.get(i);u&&u.notify(...a)}hasListeners(i){return this.eventHandlers.has(i)}mount(i,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=DT(i),this.instance=i;const{layoutId:u,layout:l,visualElement:f}=this.options;if(f&&!f.current&&f.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(l||u)&&(this.isLayoutDirty=!0),t){let d;const h=()=>this.root.updateBlockedByResize=!1;t(i,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=OT(h,250),Di.hasAnimatedSinceResize&&(Di.hasAnimatedSinceResize=!1,this.nodes.forEach(Nd))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeTargetChanged:m,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||f.getDefaultTransition()||YT,{onLayoutAnimationStart:y,onLayoutAnimationComplete:C}=f.getProps(),T=!this.targetLayout||!Um(this.targetLayout,b)||m,S=!h&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||h&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,S);const E={...Hl(g,"layout"),onPlay:y,onComplete:C};(f.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else h||Nd(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ds(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(WT),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const d=this.path[f];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:u}=this.options;if(a===void 0&&!u)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(kd);return}this.isUpdating||this.nodes.forEach(UT),this.isUpdating=!1,this.nodes.forEach($T),this.nodes.forEach(VT),this.nodes.forEach(jT),this.clearAllSnapshots();const a=performance.now();Te.delta=Ks(0,1e3/60,a-Te.timestamp),Te.timestamp=a,Te.isProcessing=!0,Fa.update.process(Te),Fa.preRender.process(Te),Fa.render.process(Te),Te.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(BT),this.sharedNodes.forEach(GT)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,te.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){te.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ue(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:i,isRoot:n(this.instance),offset:s(this.instance)})}resetTransform(){if(!r)return;const i=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!Bm(this.projectionDelta),u=this.getTransformTemplate(),l=u?u(this.latestValues,""):void 0,f=l!==this.prevTransformTemplateValue;i&&(a||sn(this.latestValues)||f)&&(r(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const a=this.measurePageBox();let u=this.removeElementScroll(a);return i&&(u=this.removeTransform(u)),XT(u),{animationId:this.root.animationId,measuredBox:a,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:i}=this.options;if(!i)return ue();const a=i.measureViewportBox(),{scroll:u}=this.root;return u&&(ws(a.x,u.offset.x),ws(a.y,u.offset.y)),a}removeElementScroll(i){const a=ue();Ze(a,i);for(let u=0;u<this.path.length;u++){const l=this.path[u],{scroll:f,options:d}=l;if(l!==this.root&&f&&d.layoutScroll){if(f.isRoot){Ze(a,i);const{scroll:h}=this.root;h&&(ws(a.x,-h.offset.x),ws(a.y,-h.offset.y))}ws(a.x,f.offset.x),ws(a.y,f.offset.y)}}return a}applyTransform(i,a=!1){const u=ue();Ze(u,i);for(let l=0;l<this.path.length;l++){const f=this.path[l];!a&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Xn(u,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),sn(f.latestValues)&&Xn(u,f.latestValues)}return sn(this.latestValues)&&Xn(u,this.latestValues),u}removeTransform(i){const a=ue();Ze(a,i);for(let u=0;u<this.path.length;u++){const l=this.path[u];if(!l.instance||!sn(l.latestValues))continue;Xc(l.latestValues)&&l.updateSnapshot();const f=ue(),d=l.measurePageBox();Ze(f,d),_d(a,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,f)}return sn(this.latestValues)&&_d(a,this.latestValues),a}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Te.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){var a;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==u;if(!(i||l&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=Te.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ue(),this.relativeTargetOrigin=ue(),ho(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Ze(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ue(),this.targetWithTransforms=ue()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),JE(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ze(this.target,this.layout.layoutBox),km(this.target,this.targetDelta)):Ze(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ue(),this.relativeTargetOrigin=ue(),ho(this.relativeTargetOrigin,this.target,m.target),Ze(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}nn.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Xc(this.parent.latestValues)||Lm(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var i;const a=this.getLead(),u=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||!((i=this.parent)===null||i===void 0)&&i.isProjectionDirty)&&(l=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Te.timestamp&&(l=!1),l)return;const{layout:f,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||d))return;Ze(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;aT(this.layoutCorrected,this.treeScale,this.path,u),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:b}=a;if(!b){this.projectionTransform&&(this.projectionDelta=Yn(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Yn(),this.projectionDeltaWithTransform=Yn());const g=this.projectionTransform;fo(this.projectionDelta,this.layoutCorrected,b,this.latestValues),this.projectionTransform=Md(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==h||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b)),nn.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),i){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(i,a=!1){const u=this.snapshot,l=u?u.latestValues:{},f={...this.latestValues},d=Yn();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=ue(),m=u?u.source:void 0,b=this.layout?this.layout.source:void 0,g=m!==b,y=this.getStack(),C=!y||y.members.length<=1,T=!!(g&&!C&&this.options.crossfade===!0&&!this.path.some(QT));this.animationProgress=0;let S;this.mixTargetDelta=E=>{const P=E/1e3;Vd(d.x,i.x,P),Vd(d.y,i.y,P),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ho(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),KT(this.relativeTarget,this.relativeTargetOrigin,h,P),S&&PT(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=ue()),Ze(S,this.relativeTarget)),g&&(this.animationValues=f,xT(f,l,this.latestValues,P,T,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ds(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=te.update(()=>{Di.hasAnimatedSinceResize=!0,this.currentAnimation=LT(0,Ld,{...i,onUpdate:a=>{this.mixTargetDelta(a),i.onUpdate&&i.onUpdate(a)},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Ld),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:a,target:u,layout:l,latestValues:f}=i;if(!(!a||!u||!l)){if(this!==i&&this.layout&&l&&zm(this.options.animationType,this.layout.layoutBox,l.layoutBox)){u=this.target||ue();const d=Xe(this.layout.layoutBox.x);u.x.min=i.target.x.min,u.x.max=u.x.min+d;const h=Xe(this.layout.layoutBox.y);u.y.min=i.target.y.min,u.y.max=u.y.min+h}Ze(a,u),Xn(a,f),fo(this.projectionDeltaWithTransform,this.layoutCorrected,a,f)}}registerSharedNode(i,a){this.sharedNodes.has(i)||this.sharedNodes.set(i,new AT),this.sharedNodes.get(i).add(a);const l=a.options.initialPromotionConfig;a.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(a):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){var i;const{layoutId:a}=this.options;return a?((i=this.getStack())===null||i===void 0?void 0:i.lead)||this:this}getPrevLead(){var i;const{layoutId:a}=this.options;return a?(i=this.getStack())===null||i===void 0?void 0:i.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:a,preserveFollowOpacity:u}={}){const l=this.getStack();l&&l.promote(this,u),i&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetRotation(){const{visualElement:i}=this.options;if(!i)return;let a=!1;const{latestValues:u}=i;if((u.rotate||u.rotateX||u.rotateY||u.rotateZ)&&(a=!0),!a)return;const l={};for(let f=0;f<Dd.length;f++){const d="rotate"+Dd[f];u[d]&&(l[d]=u[d],i.setStaticValue(d,0))}i.render();for(const f in l)i.setStaticValue(f,l[f]);i.scheduleRender()}getProjectionStyles(i){var a,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return kT;const l={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,l.opacity="",l.pointerEvents=Mi(i==null?void 0:i.pointerEvents)||"",l.transform=f?f(this.latestValues,""):"none",l;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Mi(i==null?void 0:i.pointerEvents)||""),this.hasProjected&&!sn(this.latestValues)&&(g.transform=f?f({},""):"none",this.hasProjected=!1),g}const h=d.animationValues||d.latestValues;this.applyTransformsToTarget(),l.transform=Md(this.projectionDeltaWithTransform,this.treeScale,h),f&&(l.transform=f(h,l.transform));const{x:m,y:b}=this.projectionDelta;l.transformOrigin=`${m.origin*100}% ${b.origin*100}% 0`,d.animationValues?l.opacity=d===this?(u=(a=h.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:l.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const g in Hi){if(h[g]===void 0)continue;const{correct:y,applyTo:C}=Hi[g],T=l.transform==="none"?h[g]:y(h[g],d);if(C){const S=C.length;for(let E=0;E<S;E++)l[C[E]]=T}else l[g]=T}return this.options.layoutId&&(l.pointerEvents=d===this?Mi(i==null?void 0:i.pointerEvents)||"":"none"),l}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>{var a;return(a=i.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(kd),this.root.sharedNodes.clear()}}}function VT(t){t.updateLayout()}function jT(t){var e;const s=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&s&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:o}=t.options,i=s.source!==t.layout.source;o==="size"?et(d=>{const h=i?s.measuredBox[d]:s.layoutBox[d],m=Xe(h);h.min=n[d].min,h.max=h.min+m}):zm(o,s.layoutBox,n)&&et(d=>{const h=i?s.measuredBox[d]:s.layoutBox[d],m=Xe(n[d]);h.max=h.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+m)});const a=Yn();fo(a,n,s.layoutBox);const u=Yn();i?fo(u,t.applyTransform(r,!0),s.measuredBox):fo(u,n,s.layoutBox);const l=!Bm(a);let f=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:m}=d;if(h&&m){const b=ue();ho(b,s.layoutBox,h.layoutBox);const g=ue();ho(g,n,m.layoutBox),Um(b,g)||(f=!0),d.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=b,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:s,delta:u,layoutDelta:a,hasLayoutChanged:l,hasRelativeTargetChanged:f})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function FT(t){nn.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function qT(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function BT(t){t.clearSnapshot()}function kd(t){t.clearMeasurements()}function UT(t){t.isLayoutDirty=!1}function $T(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Nd(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function zT(t){t.resolveTargetDelta()}function HT(t){t.calcProjection()}function WT(t){t.resetRotation()}function GT(t){t.removeLeadSnapshot()}function Vd(t,e,s){t.translate=ne(e.translate,0,s),t.scale=ne(e.scale,1,s),t.origin=e.origin,t.originPoint=e.originPoint}function jd(t,e,s,n){t.min=ne(e.min,s.min,n),t.max=ne(e.max,s.max,n)}function KT(t,e,s,n){jd(t.x,e.x,s.x,n),jd(t.y,e.y,s.y,n)}function QT(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const YT={duration:.45,ease:[.4,0,.1,1]},Fd=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),qd=Fd("applewebkit/")&&!Fd("chrome/")?Math.round:ae;function Bd(t){t.min=qd(t.min),t.max=qd(t.max)}function XT(t){Bd(t.x),Bd(t.y)}function zm(t,e,s){return t==="position"||t==="preserve-aspect"&&!Qc(Od(e),Od(s),.2)}const JT=$m({attachResizeListener:(t,e)=>os(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ya={current:void 0},Hm=$m({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Ya.current){const t=new JT({});t.mount(window),t.setOptions({layoutScroll:!0}),Ya.current=t}return Ya.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),ZT={pan:{Feature:mT},drag:{Feature:pT,ProjectionNode:Hm,MeasureLayout:jm}},eR=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function tR(t){const e=eR.exec(t);if(!e)return[,];const[,s,n]=e;return[s,n]}function Zc(t,e,s=1){const[n,r]=tR(t);if(!n)return;const o=window.getComputedStyle(e).getPropertyValue(n);if(o){const i=o.trim();return Pm(i)?parseFloat(i):i}else return Uc(r)?Zc(r,e,s+1):r}function sR(t,{...e},s){const n=t.current;if(!(n instanceof Element))return{target:e,transitionEnd:s};s&&(s={...s}),t.values.forEach(r=>{const o=r.get();if(!Uc(o))return;const i=Zc(o,n);i&&r.set(i)});for(const r in e){const o=e[r];if(!Uc(o))continue;const i=Zc(o,n);i&&(e[r]=i,s||(s={}),s[r]===void 0&&(s[r]=o))}return{target:e,transitionEnd:s}}const nR=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Wm=t=>nR.has(t),rR=t=>Object.keys(t).some(Wm),Ud=t=>t===qn||t===V,$d=(t,e)=>parseFloat(t.split(", ")[e]),zd=(t,e)=>(s,{transform:n})=>{if(n==="none"||!n)return 0;const r=n.match(/^matrix3d\((.+)\)$/);if(r)return $d(r[1],e);{const o=n.match(/^matrix\((.+)\)$/);return o?$d(o[1],t):0}},oR=new Set(["x","y","z"]),iR=ni.filter(t=>!oR.has(t));function aR(t){const e=[];return iR.forEach(s=>{const n=t.getValue(s);n!==void 0&&(e.push([s,n.get()]),n.set(s.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Fr={width:({x:t},{paddingLeft:e="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),height:({y:t},{paddingTop:e="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:zd(4,13),y:zd(5,14)};Fr.translateX=Fr.x;Fr.translateY=Fr.y;const cR=(t,e,s)=>{const n=e.measureViewportBox(),r=e.current,o=getComputedStyle(r),{display:i}=o,a={};i==="none"&&e.setStaticValue("display",t.display||"block"),s.forEach(l=>{a[l]=Fr[l](n,o)}),e.render();const u=e.measureViewportBox();return s.forEach(l=>{const f=e.getValue(l);f&&f.jump(a[l]),t[l]=Fr[l](u,o)}),t},lR=(t,e,s={},n={})=>{e={...e},n={...n};const r=Object.keys(e).filter(Wm);let o=[],i=!1;const a=[];if(r.forEach(u=>{const l=t.getValue(u);if(!t.hasValue(u))return;let f=s[u],d=Yr(f);const h=e[u];let m;if(Gi(h)){const b=h.length,g=h[0]===null?1:0;f=h[g],d=Yr(f);for(let y=g;y<b&&h[y]!==null;y++)m?ql(Yr(h[y])===m):m=Yr(h[y])}else m=Yr(h);if(d!==m)if(Ud(d)&&Ud(m)){const b=l.get();typeof b=="string"&&l.set(parseFloat(b)),typeof h=="string"?e[u]=parseFloat(h):Array.isArray(h)&&m===V&&(e[u]=h.map(parseFloat))}else d!=null&&d.transform&&(m!=null&&m.transform)&&(f===0||h===0)?f===0?l.set(m.transform(f)):e[u]=d.transform(h):(i||(o=aR(t),i=!0),a.push(u),n[u]=n[u]!==void 0?n[u]:e[u],l.jump(h))}),a.length){const u=a.indexOf("height")>=0?window.pageYOffset:null,l=cR(e,t,a);return o.length&&o.forEach(([f,d])=>{t.getValue(f).set(d)}),t.render(),Ea&&u!==null&&window.scrollTo({top:u}),{target:l,transitionEnd:n}}else return{target:e,transitionEnd:n}};function uR(t,e,s,n){return rR(e)?lR(t,e,s,n):{target:e,transitionEnd:n}}const dR=(t,e,s,n)=>{const r=sR(t,e,n);return e=r.target,n=r.transitionEnd,uR(t,e,s,n)},el={current:null},Gm={current:!1};function fR(){if(Gm.current=!0,!!Ea)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>el.current=t.matches;t.addListener(e),e()}else el.current=!1}function hR(t,e,s){const{willChange:n}=e;for(const r in e){const o=e[r],i=s[r];if($e(o))t.addValue(r,o),Xi(n)&&n.add(r);else if($e(i))t.addValue(r,jr(o,{owner:t})),Xi(n)&&n.remove(r);else if(i!==o)if(t.hasValue(r)){const a=t.getValue(r);!a.hasAnimated&&a.set(o)}else{const a=t.getStaticValue(r);t.addValue(r,jr(a!==void 0?a:o,{owner:t}))}}for(const r in s)e[r]===void 0&&t.removeValue(r);return e}const Hd=new WeakMap,Km=Object.keys(bo),pR=Km.length,Wd=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],mR=Ml.length;class yR{constructor({parent:e,props:s,presenceContext:n,reducedMotionConfig:r,visualState:o},i={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>te.render(this.render,!1,!0);const{latestValues:a,renderState:u}=o;this.latestValues=a,this.baseTarget={...a},this.initialValues=s.initial?{...a}:{},this.renderState=u,this.parent=e,this.props=s,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=i,this.isControllingVariants=Ra(s),this.isVariantNode=Mp(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:l,...f}=this.scrapeMotionValuesFromProps(s,{});for(const d in f){const h=f[d];a[d]!==void 0&&$e(h)&&(h.set(a[d],!1),Xi(l)&&l.add(d))}}scrapeMotionValuesFromProps(e,s){return{}}mount(e){this.current=e,Hd.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,n)=>this.bindToMotionValue(n,s)),Gm.current||fR(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:el.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Hd.delete(this.current),this.projection&&this.projection.unmount(),ds(this.notifyUpdate),ds(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,s){const n=Fn.has(e),r=s.on("change",i=>{this.latestValues[e]=i,this.props.onUpdate&&te.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),o=s.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),o()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...s},n,r,o){let i,a;for(let u=0;u<pR;u++){const l=Km[u],{isEnabled:f,Feature:d,ProjectionNode:h,MeasureLayout:m}=bo[l];h&&(i=h),f(s)&&(!this.features[l]&&d&&(this.features[l]=new d(this)),m&&(a=m))}if((this.type==="html"||this.type==="svg")&&!this.projection&&i){this.projection=new i(this.latestValues,this.parent&&this.parent.projection);const{layoutId:u,layout:l,drag:f,dragConstraints:d,layoutScroll:h,layoutRoot:m}=s;this.projection.setOptions({layoutId:u,layout:l,alwaysMeasureLayout:!!f||d&&Kn(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof l=="string"?l:"both",initialPromotionConfig:o,layoutScroll:h,layoutRoot:m})}return a}updateFeatures(){for(const e in this.features){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ue()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,s){this.latestValues[e]=s}makeTargetAnimatable(e,s=!0){return this.makeTargetAnimatableFromInstance(e,this.props,s)}update(e,s){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let n=0;n<Wd.length;n++){const r=Wd[n];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o=e["on"+r];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=hR(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const s={};for(let n=0;n<mR;n++){const r=Ml[n],o=this.props[r];(go(o)||o===!1)&&(s[r]=o)}return s}addVariantChild(e){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(e),()=>s.variantChildren.delete(e)}addValue(e,s){s!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,s)),this.values.set(e,s),this.latestValues[e]=s.get()}removeValue(e){this.values.delete(e);const s=this.valueSubscriptions.get(e);s&&(s(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,s){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&s!==void 0&&(n=jr(s,{owner:this}),this.addValue(e,n)),n}readValue(e){var s;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(s=this.getBaseTargetFromProps(this.props,e))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,s){this.baseTarget[e]=s}getBaseTarget(e){var s;const{initial:n}=this.props,r=typeof n=="string"||typeof n=="object"?(s=Fl(this.props,n))===null||s===void 0?void 0:s[e]:void 0;if(n&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!$e(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,s){return this.events[e]||(this.events[e]=new Ql),this.events[e].add(s)}notify(e,...s){this.events[e]&&this.events[e].notify(...s)}}class Qm extends yR{sortInstanceNodePosition(e,s){return e.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(e,s){return e.style?e.style[s]:void 0}removeValueFromRenderState(e,{vars:s,style:n}){delete s[e],delete n[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:s,...n},{transformValues:r},o){let i=DE(n,e||{},this);if(r&&(s&&(s=r(s)),n&&(n=r(n)),i&&(i=r(i))),o){OE(this,n,i);const a=dR(this,n,i,s);s=a.transitionEnd,n=a.target}return{transition:e,transitionEnd:s,...n}}}function gR(t){return window.getComputedStyle(t)}class bR extends Qm{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,s){if(Fn.has(s)){const n=zl(s);return n&&n.default||0}else{const n=gR(e),r=(Vp(s)?n.getPropertyValue(s):n[s])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:s}){return Nm(e,s)}build(e,s,n,r){Ll(e,s,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,s){return jl(e,s)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;$e(e)&&(this.childSubscription=e.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}renderInstance(e,s,n,r){$p(e,s,n,r)}}class vR extends Qm{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,s){return e[s]}readValueFromInstance(e,s){if(Fn.has(s)){const n=zl(s);return n&&n.default||0}return s=zp.has(s)?s:Il(s),e.getAttribute(s)}measureInstanceViewportBox(){return ue()}scrapeMotionValuesFromProps(e,s){return Wp(e,s)}build(e,s,n,r){Nl(e,s,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,s,n,r){Hp(e,s,n,r)}mount(e){this.isSVGTag=Vl(e.tagName),super.mount(e)}}const wR=(t,e)=>Dl(t)?new vR(e,{enableHardwareAcceleration:!1}):new bR(e,{enableHardwareAcceleration:!0}),xR={layout:{ProjectionNode:Hm,MeasureLayout:jm}},SR={...KE,...pC,...ZT,...xR},CR=SS((t,e)=>tC(t,e,SR,wR)),ER=Kf("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Zi=A.forwardRef(({className:t,variant:e,size:s,asChild:n=!1,...r},o)=>{const i=n?Vg:"button";return x.jsx(i,{className:le(ER({variant:e,size:s,className:t})),ref:o,...r})});Zi.displayName="Button";const Ym=A.forwardRef(({className:t,type:e,...s},n)=>x.jsx("input",{type:e,className:le("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...s}));Ym.displayName="Input";var Xm={exports:{}},Jm={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qr=p;function TR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var RR=typeof Object.is=="function"?Object.is:TR,PR=qr.useState,AR=qr.useEffect,_R=qr.useLayoutEffect,IR=qr.useDebugValue;function OR(t,e){var s=e(),n=PR({inst:{value:s,getSnapshot:e}}),r=n[0].inst,o=n[1];return _R(function(){r.value=s,r.getSnapshot=e,Xa(r)&&o({inst:r})},[t,s,e]),AR(function(){return Xa(r)&&o({inst:r}),t(function(){Xa(r)&&o({inst:r})})},[t]),IR(s),s}function Xa(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!RR(t,s)}catch{return!0}}function MR(t,e){return e()}var DR=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?MR:OR;Jm.useSyncExternalStore=qr.useSyncExternalStore!==void 0?qr.useSyncExternalStore:DR;Xm.exports=Jm;var LR=Xm.exports;function kR(){return LR.useSyncExternalStore(NR,()=>!0,()=>!1)}function NR(){return()=>{}}var Yl="Avatar",[VR,LP]=Zo(Yl),[jR,Zm]=VR(Yl),ey=p.forwardRef((t,e)=>{const{__scopeAvatar:s,...n}=t,[r,o]=p.useState("idle");return x.jsx(jR,{scope:s,imageLoadingStatus:r,onImageLoadingStatusChange:o,children:x.jsx(me.span,{...n,ref:e})})});ey.displayName=Yl;var ty="AvatarImage",sy=p.forwardRef((t,e)=>{const{__scopeAvatar:s,src:n,onLoadingStatusChange:r=()=>{},...o}=t,i=Zm(ty,s),a=FR(n,o),u=ls(l=>{r(l),i.onImageLoadingStatusChange(l)});return us(()=>{a!=="idle"&&u(a)},[a,u]),a==="loaded"?x.jsx(me.img,{...o,ref:e,src:n}):null});sy.displayName=ty;var ny="AvatarFallback",ry=p.forwardRef((t,e)=>{const{__scopeAvatar:s,delayMs:n,...r}=t,o=Zm(ny,s),[i,a]=p.useState(n===void 0);return p.useEffect(()=>{if(n!==void 0){const u=window.setTimeout(()=>a(!0),n);return()=>window.clearTimeout(u)}},[n]),i&&o.imageLoadingStatus!=="loaded"?x.jsx(me.span,{...r,ref:e}):null});ry.displayName=ny;function Gd(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function FR(t,{referrerPolicy:e,crossOrigin:s}){const n=kR(),r=p.useRef(null),o=(()=>n?(r.current||(r.current=new window.Image),r.current):null)(),[i,a]=p.useState(()=>Gd(o,t));return us(()=>{a(Gd(o,t))},[o,t]),us(()=>{const u=d=>()=>{a(d)};if(!o)return;const l=u("loaded"),f=u("error");return o.addEventListener("load",l),o.addEventListener("error",f),e&&(o.referrerPolicy=e),typeof s=="string"&&(o.crossOrigin=s),()=>{o.removeEventListener("load",l),o.removeEventListener("error",f)}},[o,s,e]),i}var oy=ey,iy=sy,ay=ry;const cy=p.forwardRef(({className:t,...e},s)=>x.jsx(oy,{ref:s,className:le("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));cy.displayName=oy.displayName;const qR=p.forwardRef(({className:t,...e},s)=>x.jsx(iy,{ref:s,className:le("aspect-square h-full w-full",t),...e}));qR.displayName=iy.displayName;const BR=p.forwardRef(({className:t,...e},s)=>x.jsx(ay,{ref:s,className:le("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));BR.displayName=ay.displayName;const ly=A.forwardRef(({className:t,...e},s)=>x.jsx("textarea",{className:le("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...e}));ly.displayName="Textarea";const uy=p.forwardRef(({className:t,...e},s)=>x.jsx("div",{ref:s,className:le("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));uy.displayName="Card";const dy=p.forwardRef(({className:t,...e},s)=>x.jsx("div",{ref:s,className:le("flex flex-col space-y-1.5 p-6",t),...e}));dy.displayName="CardHeader";const fy=p.forwardRef(({className:t,...e},s)=>x.jsx("h3",{ref:s,className:le("text-lg font-semibold leading-none tracking-tight",t),...e}));fy.displayName="CardTitle";const UR=p.forwardRef(({className:t,...e},s)=>x.jsx("p",{ref:s,className:le("text-sm text-muted-foreground",t),...e}));UR.displayName="CardDescription";const hy=p.forwardRef(({className:t,...e},s)=>x.jsx("div",{ref:s,className:le("p-6 pt-0",t),...e}));hy.displayName="CardContent";const $R=p.forwardRef(({className:t,...e},s)=>x.jsx("div",{ref:s,className:le("flex items-center p-6 pt-0",t),...e}));$R.displayName="CardFooter";var zR=df[" useId ".trim().toString()]||(()=>{}),HR=0;function py(t){const[e,s]=p.useState(zR());return us(()=>{t||s(n=>n??String(HR++))},[t]),t||(e?`radix-${e}`:"")}var WR=p.createContext(void 0);function my(t){const e=p.useContext(WR);return t||e||"ltr"}var Ja="rovingFocusGroup.onEntryFocus",GR={bubbles:!1,cancelable:!0},ai="RovingFocusGroup",[tl,yy,KR]=Sf(ai),[QR,gy]=Zo(ai,[KR]),[YR,XR]=QR(ai),by=p.forwardRef((t,e)=>x.jsx(tl.Provider,{scope:t.__scopeRovingFocusGroup,children:x.jsx(tl.Slot,{scope:t.__scopeRovingFocusGroup,children:x.jsx(JR,{...t,ref:e})})}));by.displayName=ai;var JR=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:s,orientation:n,loop:r=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:u,onEntryFocus:l,preventScrollOnEntryFocus:f=!1,...d}=t,h=p.useRef(null),m=cs(e,h),b=my(o),[g,y]=cl({prop:i,defaultProp:a??null,onChange:u,caller:ai}),[C,T]=p.useState(!1),S=ls(l),E=yy(s),P=p.useRef(!1),[O,I]=p.useState(0);return p.useEffect(()=>{const _=h.current;if(_)return _.addEventListener(Ja,S),()=>_.removeEventListener(Ja,S)},[S]),x.jsx(YR,{scope:s,orientation:n,dir:b,loop:r,currentTabStopId:g,onItemFocus:p.useCallback(_=>y(_),[y]),onItemShiftTab:p.useCallback(()=>T(!0),[]),onFocusableItemAdd:p.useCallback(()=>I(_=>_+1),[]),onFocusableItemRemove:p.useCallback(()=>I(_=>_-1),[]),children:x.jsx(me.div,{tabIndex:C||O===0?-1:0,"data-orientation":n,...d,ref:m,style:{outline:"none",...t.style},onMouseDown:ie(t.onMouseDown,()=>{P.current=!0}),onFocus:ie(t.onFocus,_=>{const D=!P.current;if(_.target===_.currentTarget&&D&&!C){const j=new CustomEvent(Ja,GR);if(_.currentTarget.dispatchEvent(j),!j.defaultPrevented){const U=E().filter(M=>M.focusable),k=U.find(M=>M.active),G=U.find(M=>M.id===g),H=[k,G,...U].filter(Boolean).map(M=>M.ref.current);xy(H,f)}}P.current=!1}),onBlur:ie(t.onBlur,()=>T(!1))})})}),vy="RovingFocusGroupItem",wy=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:s,focusable:n=!0,active:r=!1,tabStopId:o,children:i,...a}=t,u=py(),l=o||u,f=XR(vy,s),d=f.currentTabStopId===l,h=yy(s),{onFocusableItemAdd:m,onFocusableItemRemove:b,currentTabStopId:g}=f;return p.useEffect(()=>{if(n)return m(),()=>b()},[n,m,b]),x.jsx(tl.ItemSlot,{scope:s,id:l,focusable:n,active:r,children:x.jsx(me.span,{tabIndex:d?0:-1,"data-orientation":f.orientation,...a,ref:e,onMouseDown:ie(t.onMouseDown,y=>{n?f.onItemFocus(l):y.preventDefault()}),onFocus:ie(t.onFocus,()=>f.onItemFocus(l)),onKeyDown:ie(t.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){f.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const C=tP(y,f.orientation,f.dir);if(C!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let S=h().filter(E=>E.focusable).map(E=>E.ref.current);if(C==="last")S.reverse();else if(C==="prev"||C==="next"){C==="prev"&&S.reverse();const E=S.indexOf(y.currentTarget);S=f.loop?sP(S,E+1):S.slice(E+1)}setTimeout(()=>xy(S))}}),children:typeof i=="function"?i({isCurrentTabStop:d,hasTabStop:g!=null}):i})})});wy.displayName=vy;var ZR={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function eP(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function tP(t,e,s){const n=eP(t.key,s);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return ZR[n]}function xy(t,e=!1){const s=document.activeElement;for(const n of t)if(n===s||(n.focus({preventScroll:e}),document.activeElement!==s))return}function sP(t,e){return t.map((s,n)=>t[(e+n)%t.length])}var nP=by,rP=wy,Ia="Tabs",[oP,kP]=Zo(Ia,[gy]),Sy=gy(),[iP,Xl]=oP(Ia),Cy=p.forwardRef((t,e)=>{const{__scopeTabs:s,value:n,onValueChange:r,defaultValue:o,orientation:i="horizontal",dir:a,activationMode:u="automatic",...l}=t,f=my(a),[d,h]=cl({prop:n,onChange:r,defaultProp:o??"",caller:Ia});return x.jsx(iP,{scope:s,baseId:py(),value:d,onValueChange:h,orientation:i,dir:f,activationMode:u,children:x.jsx(me.div,{dir:f,"data-orientation":i,...l,ref:e})})});Cy.displayName=Ia;var Ey="TabsList",Ty=p.forwardRef((t,e)=>{const{__scopeTabs:s,loop:n=!0,...r}=t,o=Xl(Ey,s),i=Sy(s);return x.jsx(nP,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:n,children:x.jsx(me.div,{role:"tablist","aria-orientation":o.orientation,...r,ref:e})})});Ty.displayName=Ey;var Ry="TabsTrigger",Py=p.forwardRef((t,e)=>{const{__scopeTabs:s,value:n,disabled:r=!1,...o}=t,i=Xl(Ry,s),a=Sy(s),u=Iy(i.baseId,n),l=Oy(i.baseId,n),f=n===i.value;return x.jsx(rP,{asChild:!0,...a,focusable:!r,active:f,children:x.jsx(me.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":l,"data-state":f?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:u,...o,ref:e,onMouseDown:ie(t.onMouseDown,d=>{!r&&d.button===0&&d.ctrlKey===!1?i.onValueChange(n):d.preventDefault()}),onKeyDown:ie(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&i.onValueChange(n)}),onFocus:ie(t.onFocus,()=>{const d=i.activationMode!=="manual";!f&&!r&&d&&i.onValueChange(n)})})})});Py.displayName=Ry;var Ay="TabsContent",_y=p.forwardRef((t,e)=>{const{__scopeTabs:s,value:n,forceMount:r,children:o,...i}=t,a=Xl(Ay,s),u=Iy(a.baseId,n),l=Oy(a.baseId,n),f=n===a.value,d=p.useRef(f);return p.useEffect(()=>{const h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),x.jsx(al,{present:r||f,children:({present:h})=>x.jsx(me.div,{"data-state":f?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":u,hidden:!h,id:l,tabIndex:0,...i,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:h&&o})})});_y.displayName=Ay;function Iy(t,e){return`${t}-trigger-${e}`}function Oy(t,e){return`${t}-content-${e}`}var aP=Cy,My=Ty,Dy=Py,Ly=_y;const cP=aP,ky=p.forwardRef(({className:t,...e},s)=>x.jsx(My,{ref:s,className:le("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));ky.displayName=My.displayName;const sl=p.forwardRef(({className:t,...e},s)=>x.jsx(Dy,{ref:s,className:le("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));sl.displayName=Dy.displayName;const nl=p.forwardRef(({className:t,...e},s)=>x.jsx(Ly,{ref:s,className:le("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));nl.displayName=Ly.displayName;const lP=({onClose:t})=>{const[e,s]=p.useState(""),[n,r]=p.useState(!1),[o,i]=p.useState([]),[a,u]=p.useState(""),[l,f]=p.useState(!1),[d,h]=p.useState("chat"),[m,b]=p.useState(!1),g=p.useRef(null),{toast:y}=sh();p.useEffect(()=>{var E;(E=g.current)==null||E.scrollIntoView({behavior:"smooth"})},[o]);const C=async E=>{if(E.preventDefault(),!e.trim())return;const P={role:"user",content:e,timestamp:new Date().toISOString()};i(I=>[...I,P]),r(!0);const O=o.map(I=>({role:I.role,content:I.content}));try{const I=await fetch("/api/assistant/iso",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e.trim(),documentContext:a.trim()||null,history:O})}),_=await I.json();if(!I.ok)throw new Error(_.error||"Error al procesar la consulta");i(D=>[...D,{role:"assistant",content:_.reply,usage:_.usage,timestamp:new Date().toISOString()}]),s("")}catch(I){console.error("Error:",I),y({title:"Error",description:I.message,variant:"destructive"})}finally{r(!1)}},T=E=>{navigator.clipboard.writeText(E),b(!0),setTimeout(()=>b(!1),2e3),y({title:"Copiado al portapapeles",description:"El texto se ha copiado correctamente"})},S=E=>E.split(`
`).map((P,O)=>x.jsxs(A.Fragment,{children:[P,x.jsx("br",{})]},O));return x.jsxs(CR.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:`fixed bottom-4 right-4 z-50 bg-white dark:bg-gray-900 rounded-lg shadow-lg 
                overflow-hidden flex flex-col ${l?"w-4/5 md:w-1/2 lg:w-1/3 h-3/4":"w-64 h-14"}`,children:[x.jsxs("div",{className:"flex items-center justify-between p-3 bg-primary text-primary-foreground",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(cy,{className:"h-6 w-6",children:x.jsx(Qf,{size:16})}),x.jsx("h3",{className:"text-sm font-medium",children:"Asistente ISO"})]}),x.jsxs("div",{className:"flex items-center gap-1",children:[l?x.jsx("button",{onClick:()=>f(!1),className:"text-primary-foreground hover:text-white",children:x.jsx(Ab,{size:18})}):x.jsx("button",{onClick:()=>f(!0),className:"text-primary-foreground hover:text-white",children:x.jsx(_b,{size:18})}),x.jsx("button",{onClick:t,className:"text-primary-foreground hover:text-white",children:x.jsx(Yf,{size:18})})]})]}),l&&x.jsx(x.Fragment,{children:x.jsxs(cP,{value:d,onValueChange:h,className:"flex-grow flex flex-col",children:[x.jsxs(ky,{className:"w-full justify-start p-0 bg-muted/30",children:[x.jsx(sl,{value:"chat",className:"flex-1",children:"Chat"}),x.jsx(sl,{value:"context",className:"flex-1",children:"Contexto"})]}),x.jsxs(nl,{value:"chat",className:"flex-grow flex flex-col m-0 p-0",children:[x.jsxs("div",{className:"flex-grow overflow-y-auto p-3 space-y-4",children:[o.length===0?x.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[x.jsx(Ob,{className:"mx-auto h-12 w-12 opacity-20 mb-2"}),x.jsx("h3",{className:"text-lg font-semibold",children:"Asistente ISO 9001"}),x.jsx("p",{className:"text-sm mt-1",children:"Consulta cualquier duda sobre normas ISO, procedimientos de calidad o mejores prcticas."})]}):o.map((E,P)=>x.jsx("div",{className:`flex ${E.role==="user"?"justify-end":"justify-start"}`,children:x.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${E.role==="user"?"bg-primary text-primary-foreground":"bg-muted"}`,children:[x.jsxs("div",{className:"relative",children:[E.role==="assistant"&&x.jsx("button",{onClick:()=>T(E.content),className:"absolute top-0 right-0 p-1 text-muted-foreground hover:text-foreground",title:"Copiar respuesta",children:m?x.jsx(Pb,{size:14}):x.jsx(Ib,{size:14})}),x.jsx("div",{className:"pr-6",children:S(E.content)})]}),x.jsx("div",{className:"text-xs mt-1 opacity-70",children:new Date(E.timestamp).toLocaleTimeString()})]})},P)),x.jsx("div",{ref:g})]}),x.jsx("form",{onSubmit:C,className:"p-3 border-t",children:x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(Ym,{value:e,onChange:E=>s(E.target.value),placeholder:"Haz una consulta sobre ISO 9001...",disabled:n,className:"flex-grow"}),x.jsx(Zi,{type:"submit",size:"icon",disabled:n||!e.trim(),children:n?x.jsx(Mb,{className:"h-4 w-4 animate-spin"}):x.jsx(Db,{className:"h-4 w-4"})})]})})]}),x.jsx(nl,{value:"context",className:"flex-grow flex flex-col m-0 p-3",children:x.jsxs(uy,{className:"flex-grow",children:[x.jsx(dy,{className:"pb-2",children:x.jsx(fy,{className:"text-sm",children:"Contexto documental"})}),x.jsxs(hy,{children:[x.jsx("div",{className:"mb-3 text-sm text-muted-foreground",children:"Aade contexto especfico como extractos de normas, documentos o procedimientos para que el asistente los considere al responder."}),x.jsx(ly,{value:a,onChange:E=>u(E.target.value),placeholder:"Ejemplo: Procedimiento de Auditora Interna v2.1, seccin 4.3: 'Las no conformidades deben clasificarse segn...'",className:"h-32"}),x.jsx("div",{className:"flex justify-end mt-2",children:x.jsx(Zi,{variant:"outline",size:"sm",onClick:()=>u(""),children:"Limpiar"})})]})]})})]})})]})},Ny=p.createContext(),uP=()=>{const t=p.useContext(Ny);if(!t)throw new Error("useAssistant debe usarse dentro de un AssistantProvider");return t},dP=({children:t})=>{const[e,s]=p.useState(!1),n=()=>s(!0),r=()=>s(!1),o=()=>s(i=>!i);return x.jsxs(Ny.Provider,{value:{showAssistant:n,hideAssistant:r,toggleAssistant:o},children:[t,e&&x.jsx(lP,{onClose:r})]})},fP=()=>{const{toggleAssistant:t}=uP();return x.jsx(Zi,{onClick:t,variant:"outline",size:"icon",className:"fixed bottom-5 right-5 h-12 w-12 rounded-full shadow-lg bg-primary hover:bg-primary/90 text-primary-foreground",title:"Asistente ISO",children:x.jsx(Qf,{size:20})})};function hP(){return x.jsx(eg,{children:x.jsx(B0,{children:x.jsx(Ap,{children:x.jsx(q0,{children:x.jsx(dP,{children:x.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[x.jsx(dS,{}),x.jsx(fP,{}),x.jsx(Fb,{}),x.jsx(fv,{position:"top-right",richColors:!0,closeButton:!0})]})})})})})})}const pP=new kx({defaultOptions:{queries:{staleTime:5*60*1e3,cacheTime:10*60*1e3,retry:3,retryDelay:t=>Math.min(1e3*2**t,3e4),refetchOnWindowFocus:!1,onError:t=>{console.error("[Query Error]",t)}},mutations:{retry:2,onError:t=>{console.error("[Mutation Error]",t)}}}});ec.createRoot(document.getElementById("root")).render(x.jsx(A.StrictMode,{children:x.jsx(qx,{client:pP,children:x.jsx(Ap,{children:x.jsx(hP,{})})})}));export{UR as $,vP as A,Zi as B,Pb as C,Tf as D,ER as E,ky as F,sl as G,nl as H,Ym as I,ly as J,Kf as K,Dp as L,uy as M,hy as N,Ab as O,_l as P,k0 as Q,nP as R,MP as S,cP as T,qu as U,Ob as V,Al as W,Yf as X,Jx as Y,dy as Z,fy as _,fS as a,mf as a0,Ib as a1,bP as a2,us as a3,ob as a4,_b as a5,xP as a6,Mb as a7,AP as a8,_P as a9,HS as b,fs as c,IP as d,fp as e,te as f,Sf as g,Zo as h,gy as i,x as j,al as k,cs as l,CR as m,ie as n,me as o,rP as p,ls as q,kg as r,Cf as s,my as t,sh as u,Af as v,Li as w,cl as x,py as y,le as z};
