import{c as S,u as z,j as e,M as h,Z as p,_ as j,$ as g,N as k,I,J as M,B as m,a7 as C,V as O,m as o,T as B,F as L,G as w,H as A}from"./index-48325535.js";import{r}from"./vendor-b9987279.js";import{A as E}from"./alert-circle-7a0a2dee.js";import{C as R,B as D}from"./check-circle-fce04168.js";const G=S("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),V=S("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),H=()=>{const[a,c]=r.useState(""),[i,x]=r.useState(null),[t,y]=r.useState(!1),[n,u]=r.useState(null),[v,b]=r.useState(""),{toast:N}=z(),T=async s=>{const l=s.target.files[0];if(l)if(x(l),b(l.name),l.type==="text/plain")try{const d=await l.text();c(d)}catch(d){console.error("Error al leer el archivo:",d)}else c(`Archivo seleccionado: ${l.name} (${Math.round(l.size/1024)} KB)`)},F=async()=>{if(!a&&!i){N({title:"Error",description:"Por favor, ingrese texto o seleccione un archivo para analizar",variant:"destructive"});return}y(!0);try{let s=new FormData;if(i)s.append("document",i);else{const P=new Blob([a],{type:"text/plain"});s.append("document",P,"documento.txt")}s.append("documentName",v||"Documento sin nombre");const l=await fetch("/api/assistant/analyze-document",{method:"POST",body:s});if(!l.ok)throw new Error("Error al analizar el documento");const d=await l.json();u(d),N({title:"Análisis completado",description:"El documento ha sido analizado correctamente."})}catch(s){console.error("Error:",s),N({title:"Error",description:s.message,variant:"destructive"})}finally{y(!1)}},f=()=>{c(""),x(null),b(""),u(null)};return e.jsx("div",{className:"container mx-auto py-6 space-y-6",children:e.jsxs(h,{children:[e.jsxs(p,{children:[e.jsx(j,{className:"text-2xl",children:"Análisis de Documentos ISO"}),e.jsx(g,{children:"Sube un documento o ingresa texto para analizar su cumplimiento con las normas ISO 9001"})]}),e.jsx(k,{className:"space-y-4",children:n?e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[e.jsxs("div",{className:"bg-primary/10 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(R,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-lg font-medium",children:"Análisis Completado"})]}),e.jsxs("p",{className:"text-sm mb-2",children:["Documento: ",n.documentName||"Documento sin nombre"]}),e.jsx("hr",{className:"my-2"}),e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsx("h4",{className:"font-medium",children:"Aspectos destacados:"}),e.jsx("div",{className:"bg-card p-3 rounded border",children:e.jsx("pre",{className:"whitespace-pre-wrap text-sm",children:n.highlights||"No se encontraron aspectos destacados."})}),e.jsx("h4",{className:"font-medium",children:"Cumplimiento con ISO 9001:"}),e.jsx("div",{className:"bg-card p-3 rounded border",children:e.jsx("pre",{className:"whitespace-pre-wrap text-sm",children:n.compliance||"No se pudo evaluar el cumplimiento."})}),e.jsx("h4",{className:"font-medium",children:"Recomendaciones:"}),e.jsx("div",{className:"bg-card p-3 rounded border",children:e.jsx("pre",{className:"whitespace-pre-wrap text-sm",children:n.recommendations||"No hay recomendaciones disponibles."})})]})]}),e.jsx("div",{className:"flex justify-end space-x-2",children:e.jsx(m,{variant:"outline",onClick:f,children:"Nuevo Análisis"})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border rounded-lg p-4 space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nombre del documento (opcional)"}),e.jsx(I,{value:v,onChange:s=>b(s.target.value),placeholder:"Ejemplo: Procedimiento de Auditoría Interna",disabled:t})]}),e.jsxs("div",{className:"border rounded-lg p-4 space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Ingrese el contenido del documento a analizar"}),e.jsx(M,{value:a,onChange:s=>c(s.target.value),placeholder:"Pegue aquí el texto del documento que desea analizar...",className:"min-h-[200px]",disabled:t})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"O suba un archivo (PDF, Word, texto)"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{type:"file",onChange:T,accept:".pdf,.doc,.docx,.txt,.md",disabled:t,className:"max-w-md"}),e.jsx(m,{type:"button",variant:"ghost",size:"icon",title:"Limpiar selección",disabled:t||!i&&!a,onClick:f,children:e.jsx(E,{size:16})})]}),i&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Archivo seleccionado: ",i.name," (",Math.round(i.size/1024)," KB)"]})]}),e.jsxs("div",{className:"flex justify-end mt-4 space-x-2",children:[e.jsx(m,{onClick:f,variant:"outline",disabled:t||!i&&!a,children:"Limpiar"}),e.jsx(m,{onClick:F,disabled:t||!a&&!i,children:t?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"mr-2 h-4 w-4 animate-spin"}),"Analizando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),"Analizar Documento"]})})]})]})})]})})},$=()=>{const[a,c]=r.useState(!1);return e.jsx("div",{className:"flex flex-col w-full h-[600px] rounded-lg border bg-slate-50 dark:bg-slate-900 p-4",children:e.jsxs("div",{className:"mx-auto max-w-3xl w-full h-full flex flex-col justify-center items-center text-center gap-6",children:[e.jsx(o.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},className:"flex items-center justify-center w-20 h-20 rounded-full bg-blue-100 dark:bg-blue-900",children:e.jsx(D,{className:"h-10 w-10 text-blue-600 dark:text-blue-300"})}),e.jsx(o.h2,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.5},className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Asistente Especializado ISO 9001"}),e.jsxs(o.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},className:"text-center px-4 max-w-xl",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4 text-amber-600 dark:text-amber-400 bg-amber-50 dark:bg-amber-950/50 p-3 rounded-lg",children:[e.jsx(E,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Servicio temporalmente no disponible"})]}),e.jsx("p",{className:"mb-4 text-gray-600 dark:text-gray-300",children:"El Asistente ISO 9001 ha sido implementado con éxito en la interfaz de usuario, pero actualmente está pausado debido a la necesidad de crédito en la API de OpenAI."}),e.jsx("p",{className:"mb-6 text-gray-600 dark:text-gray-300",children:"Todas las funcionalidades tanto de backend como frontend están listas para ser activadas cuando se disponga de una clave API con crédito suficiente."})]}),e.jsx(o.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.5},children:e.jsxs(m,{onClick:()=>c(!a),variant:"outline",className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4"}),a?"Ocultar detalles técnicos":"Ver detalles técnicos"]})}),a&&e.jsxs(o.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-white dark:bg-gray-800 p-4 rounded-lg text-left w-full max-w-2xl overflow-y-auto mt-4 border",children:[e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Implementación técnica:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-sm text-gray-600 dark:text-gray-300",children:[e.jsxs("li",{children:["Backend: Sistema de conversaciones con contexto implementado en ",e.jsx("code",{children:"isoAssistantService.js"})]}),e.jsxs("li",{children:["API: Endpoints para crear conversaciones y enviar mensajes configurados en ",e.jsx("code",{children:"index.js"})]}),e.jsx("li",{children:"Frontend: Componente de chat con soporte para Markdown y animaciones"}),e.jsx("li",{children:"Integración: Analizador de documentos listo para verificar conformidad con ISO 9001"}),e.jsxs("li",{children:["Modelo: Configurado para usar ",e.jsx("code",{children:"gpt-4o"})," cuando esté disponible"]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/30 rounded text-sm",children:[e.jsx("p",{className:"font-medium",children:"Próximos pasos:"}),e.jsxs("ol",{className:"list-decimal list-inside mt-2 space-y-1",children:[e.jsx("li",{children:"Añadir crédito a la cuenta de OpenAI"}),e.jsx("li",{children:"Actualizar la clave API en el archivo .env"}),e.jsx("li",{children:"Reiniciar el servidor backend"})]})]})]})]})})},Z=()=>{const[a,c]=r.useState(!0),[i,x]=r.useState("assistant"),{toast:t}=z();return r.useEffect(()=>{(async()=>{try{const n=await fetch("/api/assistant/initialize"),u=await n.json();if(!n.ok)throw new Error(u.error||"Error al inicializar el asistente");t({title:"Asistente ISO inicializado",description:"El asistente de normas ISO 9001 está listo para ayudarte"})}catch(n){console.error("Error:",n),t({title:"Error",description:"No se pudo inicializar el asistente ISO. Algunas funciones podrían no estar disponibles.",variant:"destructive"})}finally{c(!1)}})()},[t]),a?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[500px]",children:[e.jsx(C,{className:"h-12 w-12 animate-spin text-primary mb-4"}),e.jsx("h2",{className:"text-xl font-medium",children:"Iniciando Asistente ISO..."}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Estamos preparando la base de conocimiento sobre normas ISO 9001."})]}):e.jsx("div",{className:"container mx-auto py-6",children:e.jsxs(o.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx(h,{className:"mb-6",children:e.jsxs(p,{children:[e.jsx(j,{className:"text-3xl",children:"Asistente de Normas ISO"}),e.jsx(g,{children:"Herramientas de inteligencia artificial para asesorarte en la implementación y cumplimiento de normas ISO 9001"})]})}),e.jsxs(B,{value:i,onValueChange:x,children:[e.jsxs(L,{className:"mb-6",children:[e.jsxs(w,{value:"assistant",className:"flex items-center",children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),"Asistente Virtual"]}),e.jsxs(w,{value:"analyzer",className:"flex items-center",children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),"Análisis de Documentos"]})]}),e.jsx(A,{value:"assistant",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(h,{className:"lg:col-span-2",children:[e.jsxs(p,{children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5"}),"Asistente ISO 9001"]}),e.jsx(g,{children:"Consulta dudas sobre la norma ISO 9001:2015 y recibe orientación personalizada."})]}),e.jsx(k,{children:e.jsx($,{})})]}),e.jsxs(h,{children:[e.jsx(p,{children:e.jsx(j,{children:"Recursos de ayuda"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Normas disponibles"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-1",children:[e.jsx("li",{children:"ISO 9001:2015 - Sistema de gestión de calidad"}),e.jsx("li",{children:"ISO 14001:2015 - Gestión ambiental"}),e.jsx("li",{children:"ISO 45001:2018 - Seguridad y salud laboral"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Tutoriales"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-1",children:[e.jsx("li",{children:"Guía de implementación ISO 9001"}),e.jsx("li",{children:"Preparación de auditorías"}),e.jsx("li",{children:"Gestión de no conformidades"})]})]})]})]})]})}),e.jsx(A,{value:"analyzer",className:"space-y-4",children:e.jsx(H,{})})]})]})})};export{Z as default};
