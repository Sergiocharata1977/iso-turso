import{r as o,R as v,_ as b}from"./vendor-b9987279.js";import{u as j,j as e,m as u,I as p,B as w}from"./index-48325535.js";import{L as h}from"./label-fb300fbb.js";import{A as y}from"./alert-circle-7a0a2dee.js";function C({onLogin:x}){const{toast:m}=j(),[r,c]=o.useState(!1),[n,d]=o.useState(""),[a,i]=o.useState({email:"",password:"",rememberMe:localStorage.getItem("rememberMe")==="true"});v.useEffect(()=>{if(localStorage.getItem("rememberMe")==="true"){const s=localStorage.getItem("savedEmail");s&&i(t=>({...t,email:s}))}},[]);const g=async s=>{s.preventDefault(),c(!0),d("");try{const{authService:t}=await b(()=>import("./index-48325535.js").then(f=>f.a9),["assets/index-48325535.js","assets/vendor-b9987279.js","assets/index-3e2ab41c.css"]),l=await t.login(a.email,a.password);a.rememberMe?(localStorage.setItem("rememberMe","true"),localStorage.setItem("savedEmail",a.email)):(localStorage.removeItem("rememberMe"),localStorage.removeItem("savedEmail")),x({name:l.name,email:l.email,role:l.role,id:l.id}),m({title:"Inicio de sesión exitoso",description:"Bienvenido al sistema"})}catch(t){console.error("Error de inicio de sesión:",t),d(t.message||"Usuario o contraseña incorrectos"),m({title:"Error de autenticación",description:t.message||"Usuario o contraseña incorrectos",variant:"destructive"})}finally{c(!1)}};return e.jsxs("div",{className:"min-h-screen flex",children:[e.jsx("div",{className:"hidden lg:block lg:w-1/2 relative",children:e.jsx("img",{className:"absolute inset-0 w-full h-full object-cover",alt:"Modern office with people working",src:"https://images.unsplash.com/photo-1607615896122-6c919f897e55"})}),e.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8 bg-background",children:e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("img",{alt:"Company Logo",className:"mx-auto h-16 w-auto mb-6",src:"https://images.unsplash.com/photo-1485531865381-286666aa80a9"}),e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Bienvenido al Sistema de Gestión de Calidad"}),e.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Ingrese sus credenciales para acceder"})]}),e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[n&&e.jsxs(u.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-destructive/10 text-destructive rounded-lg p-3 flex items-center",children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),n]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"email",children:"Usuario"}),e.jsx(p,{id:"email",value:a.email,onChange:s=>i({...a,email:s.target.value}),required:!0,className:"w-full",disabled:r,autoComplete:"username"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"password",children:"Contraseña"}),e.jsx(p,{id:"password",type:"password",value:a.password,onChange:s=>i({...a,password:s.target.value}),required:!0,className:"w-full",disabled:r,autoComplete:"current-password"})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary",checked:a.rememberMe,onChange:s=>i({...a,rememberMe:s.target.checked}),disabled:r}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-muted-foreground",children:"Recordar sesión"})]})}),e.jsx(w,{type:"submit",className:"w-full",disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin mr-2",children:"⭮"}),"Iniciando sesión..."]}):"Ingresar al sistema"})]})]})})]})}export{C as default};
